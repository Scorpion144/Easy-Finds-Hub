function lI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function eE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tE={exports:{}},Nd={},nE={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=Symbol.for("react.element"),aI=Symbol.for("react.portal"),uI=Symbol.for("react.fragment"),cI=Symbol.for("react.strict_mode"),hI=Symbol.for("react.profiler"),dI=Symbol.for("react.provider"),fI=Symbol.for("react.context"),pI=Symbol.for("react.forward_ref"),mI=Symbol.for("react.suspense"),gI=Symbol.for("react.memo"),yI=Symbol.for("react.lazy"),Zv=Symbol.iterator;function vI(t){return t===null||typeof t!="object"?null:(t=Zv&&t[Zv]||t["@@iterator"],typeof t=="function"?t:null)}var rE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iE=Object.assign,sE={};function al(t,e,n){this.props=t,this.context=e,this.refs=sE,this.updater=n||rE}al.prototype.isReactComponent={};al.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};al.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oE(){}oE.prototype=al.prototype;function Hg(t,e,n){this.props=t,this.context=e,this.refs=sE,this.updater=n||rE}var Wg=Hg.prototype=new oE;Wg.constructor=Hg;iE(Wg,al.prototype);Wg.isPureReactComponent=!0;var e1=Array.isArray,lE=Object.prototype.hasOwnProperty,qg={current:null},aE={key:!0,ref:!0,__self:!0,__source:!0};function uE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lE.call(e,r)&&!aE.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:fu,type:t,key:s,ref:o,props:i,_owner:qg.current}}function wI(t,e){return{$$typeof:fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kg(t){return typeof t=="object"&&t!==null&&t.$$typeof===fu}function xI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var t1=/\/+/g;function zf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xI(""+t.key):e.toString(36)}function bc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fu:case aI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zf(o,0):r,e1(i)?(n="",t!=null&&(n=t.replace(t1,"$&/")+"/"),bc(i,e,n,"",function(u){return u})):i!=null&&(Kg(i)&&(i=wI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(t1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",e1(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+zf(s,l);o+=bc(s,e,n,a,i)}else if(a=vI(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+zf(s,l++),o+=bc(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gu(t,e,n){if(t==null)return t;var r=[],i=0;return bc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function _I(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},Ic={transition:null},EI={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Ic,ReactCurrentOwner:qg};function cE(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Gu,forEach:function(t,e,n){Gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gu(t,function(){e++}),e},toArray:function(t){return Gu(t,function(e){return e})||[]},only:function(t){if(!Kg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=al;ge.Fragment=uI;ge.Profiler=hI;ge.PureComponent=Hg;ge.StrictMode=cI;ge.Suspense=mI;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EI;ge.act=cE;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)lE.call(e,a)&&!aE.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:fu,type:t.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:fI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dI,_context:t},t.Consumer=t};ge.createElement=uE;ge.createFactory=function(t){var e=uE.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:pI,render:t}};ge.isValidElement=Kg;ge.lazy=function(t){return{$$typeof:yI,_payload:{_status:-1,_result:t},_init:_I}};ge.memo=function(t,e){return{$$typeof:gI,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Ic.transition;Ic.transition={};try{t()}finally{Ic.transition=e}};ge.unstable_act=cE;ge.useCallback=function(t,e){return sn.current.useCallback(t,e)};ge.useContext=function(t){return sn.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};ge.useEffect=function(t,e){return sn.current.useEffect(t,e)};ge.useId=function(){return sn.current.useId()};ge.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return sn.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};ge.useRef=function(t){return sn.current.useRef(t)};ge.useState=function(t){return sn.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return sn.current.useTransition()};ge.version="18.3.1";nE.exports=ge;var U=nE.exports;const Ie=eE(U),TI=lI({__proto__:null,default:Ie},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI=U,SI=Symbol.for("react.element"),CI=Symbol.for("react.fragment"),AI=Object.prototype.hasOwnProperty,bI=kI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,II={key:!0,ref:!0,__self:!0,__source:!0};function hE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)AI.call(e,r)&&!II.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:SI,type:t,key:s,ref:o,props:i,_owner:bI.current}}Nd.Fragment=CI;Nd.jsx=hE;Nd.jsxs=hE;tE.exports=Nd;var v=tE.exports,dE={exports:{}},Sn={},fE={exports:{}},pE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,oe){var le=q.length;q.push(oe);e:for(;0<le;){var De=le-1>>>1,Ae=q[De];if(0<i(Ae,oe))q[De]=oe,q[le]=Ae,le=De;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var oe=q[0],le=q.pop();if(le!==oe){q[0]=le;e:for(var De=0,Ae=q.length,$e=Ae>>>1;De<$e;){var bn=2*(De+1)-1,Wn=q[bn],mn=bn+1,In=q[mn];if(0>i(Wn,le))mn<Ae&&0>i(In,Wn)?(q[De]=In,q[mn]=le,De=mn):(q[De]=Wn,q[bn]=le,De=bn);else if(mn<Ae&&0>i(In,le))q[De]=In,q[mn]=le,De=mn;else break e}}return oe}function i(q,oe){var le=q.sortIndex-oe.sortIndex;return le!==0?le:q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,f=3,m=!1,g=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var oe=n(u);oe!==null;){if(oe.callback===null)r(u);else if(oe.startTime<=q)r(u),oe.sortIndex=oe.expirationTime,e(a,oe);else break;oe=n(u)}}function M(q){if(_=!1,C(q),!g)if(n(a)!==null)g=!0,Qe(L);else{var oe=n(u);oe!==null&&be(M,oe.startTime-q)}}function L(q,oe){g=!1,_&&(_=!1,w(E),E=-1),m=!0;var le=f;try{for(C(oe),d=n(a);d!==null&&(!(d.expirationTime>oe)||q&&!P());){var De=d.callback;if(typeof De=="function"){d.callback=null,f=d.priorityLevel;var Ae=De(d.expirationTime<=oe);oe=t.unstable_now(),typeof Ae=="function"?d.callback=Ae:d===n(a)&&r(a),C(oe)}else r(a);d=n(a)}if(d!==null)var $e=!0;else{var bn=n(u);bn!==null&&be(M,bn.startTime-oe),$e=!1}return $e}finally{d=null,f=le,m=!1}}var V=!1,A=null,E=-1,S=5,I=-1;function P(){return!(t.unstable_now()-I<S)}function R(){if(A!==null){var q=t.unstable_now();I=q;var oe=!0;try{oe=A(!0,q)}finally{oe?b():(V=!1,A=null)}}else V=!1}var b;if(typeof x=="function")b=function(){x(R)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Pe=we.port2;we.port1.onmessage=R,b=function(){Pe.postMessage(null)}}else b=function(){T(R,0)};function Qe(q){A=q,V||(V=!0,b())}function be(q,oe){E=T(function(){q(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Qe(L))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var oe=3;break;default:oe=f}var le=f;f=oe;try{return q()}finally{f=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,oe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var le=f;f=q;try{return oe()}finally{f=le}},t.unstable_scheduleCallback=function(q,oe,le){var De=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?De+le:De):le=De,q){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=le+Ae,q={id:h++,callback:oe,priorityLevel:q,startTime:le,expirationTime:Ae,sortIndex:-1},le>De?(q.sortIndex=le,e(u,q),n(a)===null&&q===n(u)&&(_?(w(E),E=-1):_=!0,be(M,le-De))):(q.sortIndex=Ae,e(a,q),g||m||(g=!0,Qe(L))),q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(q){var oe=f;return function(){var le=f;f=oe;try{return q.apply(this,arguments)}finally{f=le}}}})(pE);fE.exports=pE;var NI=fE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=U,kn=NI;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mE=new Set,Ia={};function zs(t,e){Bo(t,e),Bo(t+"Capture",e)}function Bo(t,e){for(Ia[t]=e,t=0;t<e.length;t++)mE.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xp=Object.prototype.hasOwnProperty,PI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n1={},r1={};function MI(t){return Xp.call(r1,t)?!0:Xp.call(n1,t)?!1:PI.test(t)?r1[t]=!0:(n1[t]=!0,!1)}function OI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DI(t,e,n,r){if(e===null||typeof e>"u"||OI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Qg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Qg);Mt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Qg);Mt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Qg);Mt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jg(t,e,n,r){var i=Mt.hasOwnProperty(e)?Mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DI(e,n,i,r)&&(n=null),r||i===null?MI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qu=Symbol.for("react.element"),mo=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),Yg=Symbol.for("react.strict_mode"),Zp=Symbol.for("react.profiler"),gE=Symbol.for("react.provider"),yE=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),em=Symbol.for("react.suspense"),tm=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),vE=Symbol.for("react.offscreen"),i1=Symbol.iterator;function Vl(t){return t===null||typeof t!="object"?null:(t=i1&&t[i1]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Uf;function Ql(t){if(Uf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uf=e&&e[1]||""}return`
`+Uf+t}var $f=!1;function Hf(t,e){if(!t||$f)return"";$f=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{$f=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ql(t):""}function VI(t){switch(t.tag){case 5:return Ql(t.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return t=Hf(t.type,!1),t;case 11:return t=Hf(t.type.render,!1),t;case 1:return t=Hf(t.type,!0),t;default:return""}}function nm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case go:return"Fragment";case mo:return"Portal";case Zp:return"Profiler";case Yg:return"StrictMode";case em:return"Suspense";case tm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yE:return(t.displayName||"Context")+".Consumer";case gE:return(t._context.displayName||"Context")+".Provider";case Xg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zg:return e=t.displayName||null,e!==null?e:nm(t.type)||"Memo";case ri:e=t._payload,t=t._init;try{return nm(t(e))}catch{}}return null}function LI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nm(e);case 8:return e===Yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jI(t){var e=wE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ju(t){t._valueTracker||(t._valueTracker=jI(t))}function xE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rm(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _E(t,e){e=e.checked,e!=null&&Jg(t,"checked",e,!1)}function im(t,e){_E(t,e);var n=ji(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sm(t,e.type,n):e.hasOwnProperty("defaultValue")&&sm(t,e.type,ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function o1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sm(t,e,n){(e!=="number"||eh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jl=Array.isArray;function Io(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ji(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function om(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function l1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Jl(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ji(n)}}function EE(t,e){var n=ji(e.value),r=ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function a1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yu,kE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yu=Yu||document.createElement("div"),Yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var la={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FI=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(t){FI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),la[e]=la[t]})});function SE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||la.hasOwnProperty(t)&&la[t]?(""+e).trim():e+"px"}function CE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var BI=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function am(t,e){if(e){if(BI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function um(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cm=null;function ey(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hm=null,No=null,Ro=null;function u1(t){if(t=gu(t)){if(typeof hm!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Dd(e),hm(t.stateNode,t.type,e))}}function AE(t){No?Ro?Ro.push(t):Ro=[t]:No=t}function bE(){if(No){var t=No,e=Ro;if(Ro=No=null,u1(t),e)for(t=0;t<e.length;t++)u1(e[t])}}function IE(t,e){return t(e)}function NE(){}var Wf=!1;function RE(t,e,n){if(Wf)return t(e,n);Wf=!0;try{return IE(t,e,n)}finally{Wf=!1,(No!==null||Ro!==null)&&(NE(),bE())}}function Ra(t,e){var n=t.stateNode;if(n===null)return null;var r=Dd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var dm=!1;if(zr)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){dm=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{dm=!1}function zI(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var aa=!1,th=null,nh=!1,fm=null,UI={onError:function(t){aa=!0,th=t}};function $I(t,e,n,r,i,s,o,l,a){aa=!1,th=null,zI.apply(UI,arguments)}function HI(t,e,n,r,i,s,o,l,a){if($I.apply(this,arguments),aa){if(aa){var u=th;aa=!1,th=null}else throw Error(H(198));nh||(nh=!0,fm=u)}}function Us(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c1(t){if(Us(t)!==t)throw Error(H(188))}function WI(t){var e=t.alternate;if(!e){if(e=Us(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c1(i),t;if(s===r)return c1(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function ME(t){return t=WI(t),t!==null?OE(t):null}function OE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OE(t);if(e!==null)return e;t=t.sibling}return null}var DE=kn.unstable_scheduleCallback,h1=kn.unstable_cancelCallback,qI=kn.unstable_shouldYield,KI=kn.unstable_requestPaint,rt=kn.unstable_now,GI=kn.unstable_getCurrentPriorityLevel,ty=kn.unstable_ImmediatePriority,VE=kn.unstable_UserBlockingPriority,rh=kn.unstable_NormalPriority,QI=kn.unstable_LowPriority,LE=kn.unstable_IdlePriority,Rd=null,vr=null;function JI(t){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(Rd,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:ZI,YI=Math.log,XI=Math.LN2;function ZI(t){return t>>>=0,t===0?32:31-(YI(t)/XI|0)|0}var Xu=64,Zu=4194304;function Yl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Yl(l):(s&=o,s!==0&&(r=Yl(s)))}else o=n&~i,o!==0?r=Yl(o):s!==0&&(r=Yl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),i=1<<n,r|=t[n],e&=~i;return r}function eN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-tr(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=eN(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function pm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jE(){var t=Xu;return Xu<<=1,!(Xu&4194240)&&(Xu=64),t}function qf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function nN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-tr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ny(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function FE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BE,ry,zE,UE,$E,mm=!1,ec=[],_i=null,Ei=null,Ti=null,Pa=new Map,Ma=new Map,ai=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d1(t,e){switch(t){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":Pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function jl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=gu(e),e!==null&&ry(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iN(t,e,n,r,i){switch(e){case"focusin":return _i=jl(_i,t,e,n,r,i),!0;case"dragenter":return Ei=jl(Ei,t,e,n,r,i),!0;case"mouseover":return Ti=jl(Ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pa.set(s,jl(Pa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ma.set(s,jl(Ma.get(s)||null,t,e,n,r,i)),!0}return!1}function HE(t){var e=us(t.target);if(e!==null){var n=Us(e);if(n!==null){if(e=n.tag,e===13){if(e=PE(n),e!==null){t.blockedOn=e,$E(t.priority,function(){zE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cm=r,n.target.dispatchEvent(r),cm=null}else return e=gu(n),e!==null&&ry(e),t.blockedOn=n,!1;e.shift()}return!0}function f1(t,e,n){Nc(t)&&n.delete(e)}function sN(){mm=!1,_i!==null&&Nc(_i)&&(_i=null),Ei!==null&&Nc(Ei)&&(Ei=null),Ti!==null&&Nc(Ti)&&(Ti=null),Pa.forEach(f1),Ma.forEach(f1)}function Fl(t,e){t.blockedOn===e&&(t.blockedOn=null,mm||(mm=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,sN)))}function Oa(t){function e(i){return Fl(i,t)}if(0<ec.length){Fl(ec[0],t);for(var n=1;n<ec.length;n++){var r=ec[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_i!==null&&Fl(_i,t),Ei!==null&&Fl(Ei,t),Ti!==null&&Fl(Ti,t),Pa.forEach(e),Ma.forEach(e),n=0;n<ai.length;n++)r=ai[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ai.length&&(n=ai[0],n.blockedOn===null);)HE(n),n.blockedOn===null&&ai.shift()}var Po=Qr.ReactCurrentBatchConfig,sh=!0;function oN(t,e,n,r){var i=Ne,s=Po.transition;Po.transition=null;try{Ne=1,iy(t,e,n,r)}finally{Ne=i,Po.transition=s}}function lN(t,e,n,r){var i=Ne,s=Po.transition;Po.transition=null;try{Ne=4,iy(t,e,n,r)}finally{Ne=i,Po.transition=s}}function iy(t,e,n,r){if(sh){var i=gm(t,e,n,r);if(i===null)np(t,e,r,oh,n),d1(t,r);else if(iN(i,t,e,n,r))r.stopPropagation();else if(d1(t,r),e&4&&-1<rN.indexOf(t)){for(;i!==null;){var s=gu(i);if(s!==null&&BE(s),s=gm(t,e,n,r),s===null&&np(t,e,r,oh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else np(t,e,r,null,n)}}var oh=null;function gm(t,e,n,r){if(oh=null,t=ey(r),t=us(t),t!==null)if(e=Us(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oh=t,null}function WE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GI()){case ty:return 1;case VE:return 4;case rh:case QI:return 16;case LE:return 536870912;default:return 16}default:return 16}}var pi=null,sy=null,Rc=null;function qE(){if(Rc)return Rc;var t,e=sy,n=e.length,r,i="value"in pi?pi.value:pi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rc=i.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tc(){return!0}function p1(){return!1}function Cn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tc:p1,this.isPropagationStopped=p1,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tc)},persist:function(){},isPersistent:tc}),e}var ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oy=Cn(ul),mu=Ke({},ul,{view:0,detail:0}),aN=Cn(mu),Kf,Gf,Bl,Pd=Ke({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ly,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bl&&(Bl&&t.type==="mousemove"?(Kf=t.screenX-Bl.screenX,Gf=t.screenY-Bl.screenY):Gf=Kf=0,Bl=t),Kf)},movementY:function(t){return"movementY"in t?t.movementY:Gf}}),m1=Cn(Pd),uN=Ke({},Pd,{dataTransfer:0}),cN=Cn(uN),hN=Ke({},mu,{relatedTarget:0}),Qf=Cn(hN),dN=Ke({},ul,{animationName:0,elapsedTime:0,pseudoElement:0}),fN=Cn(dN),pN=Ke({},ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mN=Cn(pN),gN=Ke({},ul,{data:0}),g1=Cn(gN),yN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wN[t])?!!e[t]:!1}function ly(){return xN}var _N=Ke({},mu,{key:function(t){if(t.key){var e=yN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ly,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EN=Cn(_N),TN=Ke({},Pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y1=Cn(TN),kN=Ke({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ly}),SN=Cn(kN),CN=Ke({},ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),AN=Cn(CN),bN=Ke({},Pd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IN=Cn(bN),NN=[9,13,27,32],ay=zr&&"CompositionEvent"in window,ua=null;zr&&"documentMode"in document&&(ua=document.documentMode);var RN=zr&&"TextEvent"in window&&!ua,KE=zr&&(!ay||ua&&8<ua&&11>=ua),v1=" ",w1=!1;function GE(t,e){switch(t){case"keyup":return NN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yo=!1;function PN(t,e){switch(t){case"compositionend":return QE(e);case"keypress":return e.which!==32?null:(w1=!0,v1);case"textInput":return t=e.data,t===v1&&w1?null:t;default:return null}}function MN(t,e){if(yo)return t==="compositionend"||!ay&&GE(t,e)?(t=qE(),Rc=sy=pi=null,yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KE&&e.locale!=="ko"?null:e.data;default:return null}}var ON={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ON[t.type]:e==="textarea"}function JE(t,e,n,r){AE(r),e=lh(e,"onChange"),0<e.length&&(n=new oy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ca=null,Da=null;function DN(t){lT(t,0)}function Md(t){var e=xo(t);if(xE(e))return t}function VN(t,e){if(t==="change")return e}var YE=!1;if(zr){var Jf;if(zr){var Yf="oninput"in document;if(!Yf){var _1=document.createElement("div");_1.setAttribute("oninput","return;"),Yf=typeof _1.oninput=="function"}Jf=Yf}else Jf=!1;YE=Jf&&(!document.documentMode||9<document.documentMode)}function E1(){ca&&(ca.detachEvent("onpropertychange",XE),Da=ca=null)}function XE(t){if(t.propertyName==="value"&&Md(Da)){var e=[];JE(e,Da,t,ey(t)),RE(DN,e)}}function LN(t,e,n){t==="focusin"?(E1(),ca=e,Da=n,ca.attachEvent("onpropertychange",XE)):t==="focusout"&&E1()}function jN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Md(Da)}function FN(t,e){if(t==="click")return Md(e)}function BN(t,e){if(t==="input"||t==="change")return Md(e)}function zN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ir=typeof Object.is=="function"?Object.is:zN;function Va(t,e){if(ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xp.call(e,i)||!ir(t[i],e[i]))return!1}return!0}function T1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function k1(t,e){var n=T1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=T1(n)}}function ZE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eT(){for(var t=window,e=eh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eh(t.document)}return e}function uy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UN(t){var e=eT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZE(n.ownerDocument.documentElement,n)){if(r!==null&&uy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=k1(n,s);var o=k1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $N=zr&&"documentMode"in document&&11>=document.documentMode,vo=null,ym=null,ha=null,vm=!1;function S1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vm||vo==null||vo!==eh(r)||(r=vo,"selectionStart"in r&&uy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ha&&Va(ha,r)||(ha=r,r=lh(ym,"onSelect"),0<r.length&&(e=new oy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vo)))}function nc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wo={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Xf={},tT={};zr&&(tT=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Od(t){if(Xf[t])return Xf[t];if(!wo[t])return t;var e=wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tT)return Xf[t]=e[n];return t}var nT=Od("animationend"),rT=Od("animationiteration"),iT=Od("animationstart"),sT=Od("transitionend"),oT=new Map,C1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hi(t,e){oT.set(t,e),zs(e,[t])}for(var Zf=0;Zf<C1.length;Zf++){var ep=C1[Zf],HN=ep.toLowerCase(),WN=ep[0].toUpperCase()+ep.slice(1);Hi(HN,"on"+WN)}Hi(nT,"onAnimationEnd");Hi(rT,"onAnimationIteration");Hi(iT,"onAnimationStart");Hi("dblclick","onDoubleClick");Hi("focusin","onFocus");Hi("focusout","onBlur");Hi(sT,"onTransitionEnd");Bo("onMouseEnter",["mouseout","mouseover"]);Bo("onMouseLeave",["mouseout","mouseover"]);Bo("onPointerEnter",["pointerout","pointerover"]);Bo("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xl));function A1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HI(r,e,void 0,t),t.currentTarget=null}function lT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;A1(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;A1(i,l,u),s=a}}}if(nh)throw t=fm,nh=!1,fm=null,t}function je(t,e){var n=e[Tm];n===void 0&&(n=e[Tm]=new Set);var r=t+"__bubble";n.has(r)||(aT(e,t,2,!1),n.add(r))}function tp(t,e,n){var r=0;e&&(r|=4),aT(n,t,r,e)}var rc="_reactListening"+Math.random().toString(36).slice(2);function La(t){if(!t[rc]){t[rc]=!0,mE.forEach(function(n){n!=="selectionchange"&&(qN.has(n)||tp(n,!1,t),tp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rc]||(e[rc]=!0,tp("selectionchange",!1,e))}}function aT(t,e,n,r){switch(WE(e)){case 1:var i=oN;break;case 4:i=lN;break;default:i=iy}n=i.bind(null,e,n,t),i=void 0,!dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function np(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=us(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}RE(function(){var u=s,h=ey(n),d=[];e:{var f=oT.get(t);if(f!==void 0){var m=oy,g=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":m=EN;break;case"focusin":g="focus",m=Qf;break;case"focusout":g="blur",m=Qf;break;case"beforeblur":case"afterblur":m=Qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=m1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=cN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=SN;break;case nT:case rT:case iT:m=fN;break;case sT:m=AN;break;case"scroll":m=aN;break;case"wheel":m=IN;break;case"copy":case"cut":case"paste":m=mN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=y1}var _=(e&4)!==0,T=!_&&t==="scroll",w=_?f!==null?f+"Capture":null:f;_=[];for(var x=u,C;x!==null;){C=x;var M=C.stateNode;if(C.tag===5&&M!==null&&(C=M,w!==null&&(M=Ra(x,w),M!=null&&_.push(ja(x,M,C)))),T)break;x=x.return}0<_.length&&(f=new m(f,g,null,n,h),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==cm&&(g=n.relatedTarget||n.fromElement)&&(us(g)||g[Ur]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?us(g):null,g!==null&&(T=Us(g),g!==T||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(_=m1,M="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(_=y1,M="onPointerLeave",w="onPointerEnter",x="pointer"),T=m==null?f:xo(m),C=g==null?f:xo(g),f=new _(M,x+"leave",m,n,h),f.target=T,f.relatedTarget=C,M=null,us(h)===u&&(_=new _(w,x+"enter",g,n,h),_.target=C,_.relatedTarget=T,M=_),T=M,m&&g)t:{for(_=m,w=g,x=0,C=_;C;C=ro(C))x++;for(C=0,M=w;M;M=ro(M))C++;for(;0<x-C;)_=ro(_),x--;for(;0<C-x;)w=ro(w),C--;for(;x--;){if(_===w||w!==null&&_===w.alternate)break t;_=ro(_),w=ro(w)}_=null}else _=null;m!==null&&b1(d,f,m,_,!1),g!==null&&T!==null&&b1(d,T,g,_,!0)}}e:{if(f=u?xo(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var L=VN;else if(x1(f))if(YE)L=BN;else{L=jN;var V=LN}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=FN);if(L&&(L=L(t,u))){JE(d,L,n,h);break e}V&&V(t,f,u),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&sm(f,"number",f.value)}switch(V=u?xo(u):window,t){case"focusin":(x1(V)||V.contentEditable==="true")&&(vo=V,ym=u,ha=null);break;case"focusout":ha=ym=vo=null;break;case"mousedown":vm=!0;break;case"contextmenu":case"mouseup":case"dragend":vm=!1,S1(d,n,h);break;case"selectionchange":if($N)break;case"keydown":case"keyup":S1(d,n,h)}var A;if(ay)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else yo?GE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(KE&&n.locale!=="ko"&&(yo||E!=="onCompositionStart"?E==="onCompositionEnd"&&yo&&(A=qE()):(pi=h,sy="value"in pi?pi.value:pi.textContent,yo=!0)),V=lh(u,E),0<V.length&&(E=new g1(E,t,null,n,h),d.push({event:E,listeners:V}),A?E.data=A:(A=QE(n),A!==null&&(E.data=A)))),(A=RN?PN(t,n):MN(t,n))&&(u=lh(u,"onBeforeInput"),0<u.length&&(h=new g1("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=A))}lT(d,e)})}function ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ra(t,n),s!=null&&r.unshift(ja(t,s,i)),s=Ra(t,e),s!=null&&r.push(ja(t,s,i))),t=t.return}return r}function ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Ra(n,s),a!=null&&o.unshift(ja(n,a,l))):i||(a=Ra(n,s),a!=null&&o.push(ja(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KN=/\r\n?/g,GN=/\u0000|\uFFFD/g;function I1(t){return(typeof t=="string"?t:""+t).replace(KN,`
`).replace(GN,"")}function ic(t,e,n){if(e=I1(e),I1(t)!==e&&n)throw Error(H(425))}function ah(){}var wm=null,xm=null;function _m(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,QN=typeof clearTimeout=="function"?clearTimeout:void 0,N1=typeof Promise=="function"?Promise:void 0,JN=typeof queueMicrotask=="function"?queueMicrotask:typeof N1<"u"?function(t){return N1.resolve(null).then(t).catch(YN)}:Em;function YN(t){setTimeout(function(){throw t})}function rp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Oa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Oa(e)}function ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function R1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cl=Math.random().toString(36).slice(2),pr="__reactFiber$"+cl,Fa="__reactProps$"+cl,Ur="__reactContainer$"+cl,Tm="__reactEvents$"+cl,XN="__reactListeners$"+cl,ZN="__reactHandles$"+cl;function us(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ur]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=R1(t);t!==null;){if(n=t[pr])return n;t=R1(t)}return e}t=n,n=t.parentNode}return null}function gu(t){return t=t[pr]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Dd(t){return t[Fa]||null}var km=[],_o=-1;function Wi(t){return{current:t}}function ze(t){0>_o||(t.current=km[_o],km[_o]=null,_o--)}function Ve(t,e){_o++,km[_o]=t.current,t.current=e}var Fi={},qt=Wi(Fi),hn=Wi(!1),bs=Fi;function zo(t,e){var n=t.type.contextTypes;if(!n)return Fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dn(t){return t=t.childContextTypes,t!=null}function uh(){ze(hn),ze(qt)}function P1(t,e,n){if(qt.current!==Fi)throw Error(H(168));Ve(qt,e),Ve(hn,n)}function uT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,LI(t)||"Unknown",i));return Ke({},n,r)}function ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fi,bs=qt.current,Ve(qt,t),Ve(hn,hn.current),!0}function M1(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=uT(t,e,bs),r.__reactInternalMemoizedMergedChildContext=t,ze(hn),ze(qt),Ve(qt,t)):ze(hn),Ve(hn,n)}var Mr=null,Vd=!1,ip=!1;function cT(t){Mr===null?Mr=[t]:Mr.push(t)}function eR(t){Vd=!0,cT(t)}function qi(){if(!ip&&Mr!==null){ip=!0;var t=0,e=Ne;try{var n=Mr;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mr=null,Vd=!1}catch(i){throw Mr!==null&&(Mr=Mr.slice(t+1)),DE(ty,qi),i}finally{Ne=e,ip=!1}}return null}var Eo=[],To=0,hh=null,dh=0,Dn=[],Vn=0,Is=null,Or=1,Dr="";function rs(t,e){Eo[To++]=dh,Eo[To++]=hh,hh=t,dh=e}function hT(t,e,n){Dn[Vn++]=Or,Dn[Vn++]=Dr,Dn[Vn++]=Is,Is=t;var r=Or;t=Dr;var i=32-tr(r)-1;r&=~(1<<i),n+=1;var s=32-tr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Or=1<<32-tr(e)+i|n<<i|r,Dr=s+t}else Or=1<<s|n<<i|r,Dr=t}function cy(t){t.return!==null&&(rs(t,1),hT(t,1,0))}function hy(t){for(;t===hh;)hh=Eo[--To],Eo[To]=null,dh=Eo[--To],Eo[To]=null;for(;t===Is;)Is=Dn[--Vn],Dn[Vn]=null,Dr=Dn[--Vn],Dn[Vn]=null,Or=Dn[--Vn],Dn[Vn]=null}var En=null,xn=null,Ue=!1,Jn=null;function dT(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function O1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,xn=ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:Or,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,xn=null,!0):!1;default:return!1}}function Sm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cm(t){if(Ue){var e=xn;if(e){var n=e;if(!O1(t,e)){if(Sm(t))throw Error(H(418));e=ki(n.nextSibling);var r=En;e&&O1(t,e)?dT(r,n):(t.flags=t.flags&-4097|2,Ue=!1,En=t)}}else{if(Sm(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ue=!1,En=t}}}function D1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function sc(t){if(t!==En)return!1;if(!Ue)return D1(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_m(t.type,t.memoizedProps)),e&&(e=xn)){if(Sm(t))throw fT(),Error(H(418));for(;e;)dT(t,e),e=ki(e.nextSibling)}if(D1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=En?ki(t.stateNode.nextSibling):null;return!0}function fT(){for(var t=xn;t;)t=ki(t.nextSibling)}function Uo(){xn=En=null,Ue=!1}function dy(t){Jn===null?Jn=[t]:Jn.push(t)}var tR=Qr.ReactCurrentBatchConfig;function zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function oc(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V1(t){var e=t._init;return e(t._payload)}function pT(t){function e(w,x){if(t){var C=w.deletions;C===null?(w.deletions=[x],w.flags|=16):C.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=bi(w,x),w.index=0,w.sibling=null,w}function s(w,x,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<x?(w.flags|=2,x):C):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,x,C,M){return x===null||x.tag!==6?(x=hp(C,w.mode,M),x.return=w,x):(x=i(x,C),x.return=w,x)}function a(w,x,C,M){var L=C.type;return L===go?h(w,x,C.props.children,M,C.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ri&&V1(L)===x.type)?(M=i(x,C.props),M.ref=zl(w,x,C),M.return=w,M):(M=Fc(C.type,C.key,C.props,null,w.mode,M),M.ref=zl(w,x,C),M.return=w,M)}function u(w,x,C,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=dp(C,w.mode,M),x.return=w,x):(x=i(x,C.children||[]),x.return=w,x)}function h(w,x,C,M,L){return x===null||x.tag!==7?(x=ws(C,w.mode,M,L),x.return=w,x):(x=i(x,C),x.return=w,x)}function d(w,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return x=hp(""+x,w.mode,C),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qu:return C=Fc(x.type,x.key,x.props,null,w.mode,C),C.ref=zl(w,null,x),C.return=w,C;case mo:return x=dp(x,w.mode,C),x.return=w,x;case ri:var M=x._init;return d(w,M(x._payload),C)}if(Jl(x)||Vl(x))return x=ws(x,w.mode,C,null),x.return=w,x;oc(w,x)}return null}function f(w,x,C,M){var L=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(w,x,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Qu:return C.key===L?a(w,x,C,M):null;case mo:return C.key===L?u(w,x,C,M):null;case ri:return L=C._init,f(w,x,L(C._payload),M)}if(Jl(C)||Vl(C))return L!==null?null:h(w,x,C,M,null);oc(w,C)}return null}function m(w,x,C,M,L){if(typeof M=="string"&&M!==""||typeof M=="number")return w=w.get(C)||null,l(x,w,""+M,L);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Qu:return w=w.get(M.key===null?C:M.key)||null,a(x,w,M,L);case mo:return w=w.get(M.key===null?C:M.key)||null,u(x,w,M,L);case ri:var V=M._init;return m(w,x,C,V(M._payload),L)}if(Jl(M)||Vl(M))return w=w.get(C)||null,h(x,w,M,L,null);oc(x,M)}return null}function g(w,x,C,M){for(var L=null,V=null,A=x,E=x=0,S=null;A!==null&&E<C.length;E++){A.index>E?(S=A,A=null):S=A.sibling;var I=f(w,A,C[E],M);if(I===null){A===null&&(A=S);break}t&&A&&I.alternate===null&&e(w,A),x=s(I,x,E),V===null?L=I:V.sibling=I,V=I,A=S}if(E===C.length)return n(w,A),Ue&&rs(w,E),L;if(A===null){for(;E<C.length;E++)A=d(w,C[E],M),A!==null&&(x=s(A,x,E),V===null?L=A:V.sibling=A,V=A);return Ue&&rs(w,E),L}for(A=r(w,A);E<C.length;E++)S=m(A,w,E,C[E],M),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?E:S.key),x=s(S,x,E),V===null?L=S:V.sibling=S,V=S);return t&&A.forEach(function(P){return e(w,P)}),Ue&&rs(w,E),L}function _(w,x,C,M){var L=Vl(C);if(typeof L!="function")throw Error(H(150));if(C=L.call(C),C==null)throw Error(H(151));for(var V=L=null,A=x,E=x=0,S=null,I=C.next();A!==null&&!I.done;E++,I=C.next()){A.index>E?(S=A,A=null):S=A.sibling;var P=f(w,A,I.value,M);if(P===null){A===null&&(A=S);break}t&&A&&P.alternate===null&&e(w,A),x=s(P,x,E),V===null?L=P:V.sibling=P,V=P,A=S}if(I.done)return n(w,A),Ue&&rs(w,E),L;if(A===null){for(;!I.done;E++,I=C.next())I=d(w,I.value,M),I!==null&&(x=s(I,x,E),V===null?L=I:V.sibling=I,V=I);return Ue&&rs(w,E),L}for(A=r(w,A);!I.done;E++,I=C.next())I=m(A,w,E,I.value,M),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?E:I.key),x=s(I,x,E),V===null?L=I:V.sibling=I,V=I);return t&&A.forEach(function(R){return e(w,R)}),Ue&&rs(w,E),L}function T(w,x,C,M){if(typeof C=="object"&&C!==null&&C.type===go&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Qu:e:{for(var L=C.key,V=x;V!==null;){if(V.key===L){if(L=C.type,L===go){if(V.tag===7){n(w,V.sibling),x=i(V,C.props.children),x.return=w,w=x;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ri&&V1(L)===V.type){n(w,V.sibling),x=i(V,C.props),x.ref=zl(w,V,C),x.return=w,w=x;break e}n(w,V);break}else e(w,V);V=V.sibling}C.type===go?(x=ws(C.props.children,w.mode,M,C.key),x.return=w,w=x):(M=Fc(C.type,C.key,C.props,null,w.mode,M),M.ref=zl(w,x,C),M.return=w,w=M)}return o(w);case mo:e:{for(V=C.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(w,x.sibling),x=i(x,C.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=dp(C,w.mode,M),x.return=w,w=x}return o(w);case ri:return V=C._init,T(w,x,V(C._payload),M)}if(Jl(C))return g(w,x,C,M);if(Vl(C))return _(w,x,C,M);oc(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,x!==null&&x.tag===6?(n(w,x.sibling),x=i(x,C),x.return=w,w=x):(n(w,x),x=hp(C,w.mode,M),x.return=w,w=x),o(w)):n(w,x)}return T}var $o=pT(!0),mT=pT(!1),fh=Wi(null),ph=null,ko=null,fy=null;function py(){fy=ko=ph=null}function my(t){var e=fh.current;ze(fh),t._currentValue=e}function Am(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){ph=t,fy=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(fy!==t)if(t={context:t,memoizedValue:e,next:null},ko===null){if(ph===null)throw Error(H(308));ko=t,ph.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var cs=null;function gy(t){cs===null?cs=[t]:cs.push(t)}function gT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gy(e)):(n.next=i.next,i.next=n),e.interleaved=n,$r(t,r)}function $r(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ii=!1;function yy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$r(t,n)}return i=r.interleaved,i===null?(e.next=e,gy(r)):(e.next=i.next,i.next=e),r.interleaved=e,$r(t,n)}function Mc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}function L1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mh(t,e,n,r){var i=t.updateQueue;ii=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,h=u=a=null,l=s;do{var f=l.lane,m=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,_=l;switch(f=e,m=n,_.tag){case 1:if(g=_.payload,typeof g=="function"){d=g.call(m,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,f=typeof g=="function"?g.call(m,d,f):g,f==null)break e;d=Ke({},d,f);break e;case 2:ii=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=m,a=d):h=h.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rs|=o,t.lanes=o,t.memoizedState=d}}function j1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var yu={},wr=Wi(yu),Ba=Wi(yu),za=Wi(yu);function hs(t){if(t===yu)throw Error(H(174));return t}function vy(t,e){switch(Ve(za,e),Ve(Ba,t),Ve(wr,yu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lm(e,t)}ze(wr),Ve(wr,e)}function Ho(){ze(wr),ze(Ba),ze(za)}function vT(t){hs(za.current);var e=hs(wr.current),n=lm(e,t.type);e!==n&&(Ve(Ba,t),Ve(wr,n))}function wy(t){Ba.current===t&&(ze(wr),ze(Ba))}var We=Wi(0);function gh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sp=[];function xy(){for(var t=0;t<sp.length;t++)sp[t]._workInProgressVersionPrimary=null;sp.length=0}var Oc=Qr.ReactCurrentDispatcher,op=Qr.ReactCurrentBatchConfig,Ns=0,qe=null,ht=null,gt=null,yh=!1,da=!1,Ua=0,nR=0;function jt(){throw Error(H(321))}function _y(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ir(t[n],e[n]))return!1;return!0}function Ey(t,e,n,r,i,s){if(Ns=s,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oc.current=t===null||t.memoizedState===null?oR:lR,t=n(r,i),da){s=0;do{if(da=!1,Ua=0,25<=s)throw Error(H(301));s+=1,gt=ht=null,e.updateQueue=null,Oc.current=aR,t=n(r,i)}while(da)}if(Oc.current=vh,e=ht!==null&&ht.next!==null,Ns=0,gt=ht=qe=null,yh=!1,e)throw Error(H(300));return t}function Ty(){var t=Ua!==0;return Ua=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?qe.memoizedState=gt=t:gt=gt.next=t,gt}function Hn(){if(ht===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=gt===null?qe.memoizedState:gt.next;if(e!==null)gt=e,ht=t;else{if(t===null)throw Error(H(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?qe.memoizedState=gt=t:gt=gt.next=t}return gt}function $a(t,e){return typeof e=="function"?e(t):e}function lp(t){var e=Hn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var h=u.lane;if((Ns&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,qe.lanes|=h,Rs|=h}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,ir(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qe.lanes|=s,Rs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ap(t){var e=Hn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ir(s,e.memoizedState)||(cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function wT(){}function xT(t,e){var n=qe,r=Hn(),i=e(),s=!ir(r.memoizedState,i);if(s&&(r.memoizedState=i,cn=!0),r=r.queue,ky(TT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Ha(9,ET.bind(null,n,r,i,e),void 0,null),wt===null)throw Error(H(349));Ns&30||_T(n,e,i)}return i}function _T(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ET(t,e,n,r){e.value=n,e.getSnapshot=r,kT(e)&&ST(t)}function TT(t,e,n){return n(function(){kT(e)&&ST(t)})}function kT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ir(t,n)}catch{return!0}}function ST(t){var e=$r(t,1);e!==null&&nr(e,t,1,-1)}function F1(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=sR.bind(null,qe,t),[e.memoizedState,t]}function Ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CT(){return Hn().memoizedState}function Dc(t,e,n,r){var i=ar();qe.flags|=t,i.memoizedState=Ha(1|e,n,void 0,r===void 0?null:r)}function Ld(t,e,n,r){var i=Hn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&_y(r,o.deps)){i.memoizedState=Ha(e,n,s,r);return}}qe.flags|=t,i.memoizedState=Ha(1|e,n,s,r)}function B1(t,e){return Dc(8390656,8,t,e)}function ky(t,e){return Ld(2048,8,t,e)}function AT(t,e){return Ld(4,2,t,e)}function bT(t,e){return Ld(4,4,t,e)}function IT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NT(t,e,n){return n=n!=null?n.concat([t]):null,Ld(4,4,IT.bind(null,e,t),n)}function Sy(){}function RT(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_y(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PT(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_y(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MT(t,e,n){return Ns&21?(ir(n,e)||(n=jE(),qe.lanes|=n,Rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function rR(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=op.transition;op.transition={};try{t(!1),e()}finally{Ne=n,op.transition=r}}function OT(){return Hn().memoizedState}function iR(t,e,n){var r=Ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DT(t))VT(e,n);else if(n=gT(t,e,n,r),n!==null){var i=Xt();nr(n,t,r,i),LT(n,e,r)}}function sR(t,e,n){var r=Ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DT(t))VT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,ir(l,o)){var a=e.interleaved;a===null?(i.next=i,gy(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=gT(t,e,i,r),n!==null&&(i=Xt(),nr(n,t,r,i),LT(n,e,r))}}function DT(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function VT(t,e){da=yh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ny(t,n)}}var vh={readContext:$n,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},oR={readContext:$n,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:B1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dc(4194308,4,IT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dc(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iR.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:F1,useDebugValue:Sy,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=F1(!1),e=t[0];return t=rR.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,i=ar();if(Ue){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),wt===null)throw Error(H(349));Ns&30||_T(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,B1(TT.bind(null,r,s,t),[t]),r.flags|=2048,Ha(9,ET.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ar(),e=wt.identifierPrefix;if(Ue){var n=Dr,r=Or;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lR={readContext:$n,useCallback:RT,useContext:$n,useEffect:ky,useImperativeHandle:NT,useInsertionEffect:AT,useLayoutEffect:bT,useMemo:PT,useReducer:lp,useRef:CT,useState:function(){return lp($a)},useDebugValue:Sy,useDeferredValue:function(t){var e=Hn();return MT(e,ht.memoizedState,t)},useTransition:function(){var t=lp($a)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:wT,useSyncExternalStore:xT,useId:OT,unstable_isNewReconciler:!1},aR={readContext:$n,useCallback:RT,useContext:$n,useEffect:ky,useImperativeHandle:NT,useInsertionEffect:AT,useLayoutEffect:bT,useMemo:PT,useReducer:ap,useRef:CT,useState:function(){return ap($a)},useDebugValue:Sy,useDeferredValue:function(t){var e=Hn();return ht===null?e.memoizedState=t:MT(e,ht.memoizedState,t)},useTransition:function(){var t=ap($a)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:wT,useSyncExternalStore:xT,useId:OT,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jd={isMounted:function(t){return(t=t._reactInternals)?Us(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Ai(t),s=Lr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Si(t,s,i),e!==null&&(nr(e,t,i,r),Mc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Ai(t),s=Lr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Si(t,s,i),e!==null&&(nr(e,t,i,r),Mc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=Ai(t),i=Lr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Si(t,i,r),e!==null&&(nr(e,t,r,n),Mc(e,t,r))}};function z1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Va(n,r)||!Va(i,s):!0}function jT(t,e,n){var r=!1,i=Fi,s=e.contextType;return typeof s=="object"&&s!==null?s=$n(s):(i=dn(e)?bs:qt.current,r=e.contextTypes,s=(r=r!=null)?zo(t,i):Fi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function U1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jd.enqueueReplaceState(e,e.state,null)}function Im(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$n(s):(s=dn(e)?bs:qt.current,i.context=zo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jd.enqueueReplaceState(i,i.state,null),mh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wo(t,e){try{var n="",r=e;do n+=VI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function up(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uR=typeof WeakMap=="function"?WeakMap:Map;function FT(t,e,n){n=Lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xh||(xh=!0,Bm=r),Nm(t,e)},n}function BT(t,e,n){n=Lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Nm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Nm(t,e),typeof r!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=TR.bind(null,t,e,n),e.then(t,t))}function H1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lr(-1,1),e.tag=2,Si(n,e,1))),n.lanes|=1),t)}var cR=Qr.ReactCurrentOwner,cn=!1;function Jt(t,e,n,r){e.child=t===null?mT(e,null,n,r):$o(e,t.child,n,r)}function q1(t,e,n,r,i){n=n.render;var s=e.ref;return Mo(e,i),r=Ey(t,e,n,r,s,i),n=Ty(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(Ue&&n&&cy(e),e.flags|=1,Jt(t,e,r,i),e.child)}function K1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!My(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,zT(t,e,s,r,i)):(t=Fc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(o,r)&&t.ref===e.ref)return Hr(t,e,i)}return e.flags|=1,t=bi(s,r),t.ref=e.ref,t.return=e,e.child=t}function zT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Va(s,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,Hr(t,e,i)}return Rm(t,e,n,r,i)}function UT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Co,vn),vn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Co,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(Co,vn),vn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(Co,vn),vn|=r;return Jt(t,e,i,n),e.child}function $T(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rm(t,e,n,r,i){var s=dn(n)?bs:qt.current;return s=zo(e,s),Mo(e,i),n=Ey(t,e,n,r,s,i),r=Ty(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(Ue&&r&&cy(e),e.flags|=1,Jt(t,e,n,i),e.child)}function G1(t,e,n,r,i){if(dn(n)){var s=!0;ch(e)}else s=!1;if(Mo(e,i),e.stateNode===null)Vc(t,e),jT(e,n,r),Im(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$n(u):(u=dn(n)?bs:qt.current,u=zo(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&U1(e,o,r,u),ii=!1;var f=e.memoizedState;o.state=f,mh(e,r,o,i),a=e.memoizedState,l!==r||f!==a||hn.current||ii?(typeof h=="function"&&(bm(e,n,h,r),a=e.memoizedState),(l=ii||z1(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Gn(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=$n(a):(a=dn(n)?bs:qt.current,a=zo(e,a));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&U1(e,o,r,a),ii=!1,f=e.memoizedState,o.state=f,mh(e,r,o,i);var g=e.memoizedState;l!==d||f!==g||hn.current||ii?(typeof m=="function"&&(bm(e,n,m,r),g=e.memoizedState),(u=ii||z1(e,n,u,r,f,g,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Pm(t,e,n,r,s,i)}function Pm(t,e,n,r,i,s){$T(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&M1(e,n,!1),Hr(t,e,s);r=e.stateNode,cR.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$o(e,t.child,null,s),e.child=$o(e,null,l,s)):Jt(t,e,l,s),e.memoizedState=r.state,i&&M1(e,n,!0),e.child}function HT(t){var e=t.stateNode;e.pendingContext?P1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P1(t,e.context,!1),vy(t,e.containerInfo)}function Q1(t,e,n,r,i){return Uo(),dy(i),e.flags|=256,Jt(t,e,n,r),e.child}var Mm={dehydrated:null,treeContext:null,retryLane:0};function Om(t){return{baseLanes:t,cachePool:null,transitions:null}}function WT(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(We,i&1),t===null)return Cm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zd(o,r,0,null),t=ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Om(n),e.memoizedState=Mm,t):Cy(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return hR(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=bi(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=bi(l,s):(s=ws(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Om(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Mm,r}return s=t.child,t=s.sibling,r=bi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cy(t,e){return e=zd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lc(t,e,n,r){return r!==null&&dy(r),$o(e,t.child,null,n),t=Cy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=up(Error(H(422))),lc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=zd({mode:"visible",children:r.children},i,0,null),s=ws(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$o(e,t.child,null,o),e.child.memoizedState=Om(o),e.memoizedState=Mm,s);if(!(e.mode&1))return lc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(H(419)),r=up(s,r,void 0),lc(t,e,o,r)}if(l=(o&t.childLanes)!==0,cn||l){if(r=wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$r(t,i),nr(r,t,i,-1))}return Py(),r=up(Error(H(421))),lc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xn=ki(i.nextSibling),En=e,Ue=!0,Jn=null,t!==null&&(Dn[Vn++]=Or,Dn[Vn++]=Dr,Dn[Vn++]=Is,Or=t.id,Dr=t.overflow,Is=e),e=Cy(e,r.children),e.flags|=4096,e)}function J1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Am(t.return,e,n)}function cp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J1(t,n,e);else if(t.tag===19)J1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cp(e,!0,n,null,s);break;case"together":cp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=bi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dR(t,e,n){switch(e.tag){case 3:HT(e),Uo();break;case 5:vT(e);break;case 1:dn(e.type)&&ch(e);break;case 4:vy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(fh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?WT(t,e,n):(Ve(We,We.current&1),t=Hr(t,e,n),t!==null?t.sibling:null);Ve(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,UT(t,e,n)}return Hr(t,e,n)}var KT,Dm,GT,QT;KT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dm=function(){};GT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hs(wr.current);var s=null;switch(n){case"input":i=rm(t,i),r=rm(t,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=om(t,i),r=om(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ah)}am(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ia.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&je("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};QT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ul(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fR(t,e,n){var r=e.pendingProps;switch(hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return dn(e.type)&&uh(),Ft(e),null;case 3:return r=e.stateNode,Ho(),ze(hn),ze(qt),xy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&($m(Jn),Jn=null))),Dm(t,e),Ft(e),null;case 5:wy(e);var i=hs(za.current);if(n=e.type,t!==null&&e.stateNode!=null)GT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Ft(e),null}if(t=hs(wr.current),sc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pr]=e,r[Fa]=s,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(i=0;i<Xl.length;i++)je(Xl[i],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":s1(r,s),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},je("invalid",r);break;case"textarea":l1(r,s),je("invalid",r)}am(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ic(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ic(r.textContent,l,t),i=["children",""+l]):Ia.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":Ju(r),o1(r,s,!0);break;case"textarea":Ju(r),a1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ah)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pr]=e,t[Fa]=r,KT(t,e,!1,!1),e.stateNode=t;e:{switch(o=um(n,r),n){case"dialog":je("cancel",t),je("close",t),i=r;break;case"iframe":case"object":case"embed":je("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xl.length;i++)je(Xl[i],t);i=r;break;case"source":je("error",t),i=r;break;case"img":case"image":case"link":je("error",t),je("load",t),i=r;break;case"details":je("toggle",t),i=r;break;case"input":s1(t,r),i=rm(t,r),je("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),je("invalid",t);break;case"textarea":l1(t,r),i=om(t,r),je("invalid",t);break;default:i=r}am(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?CE(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&kE(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Na(t,a):typeof a=="number"&&Na(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ia.hasOwnProperty(s)?a!=null&&s==="onScroll"&&je("scroll",t):a!=null&&Jg(t,s,a,o))}switch(n){case"input":Ju(t),o1(t,r,!1);break;case"textarea":Ju(t),a1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ji(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Io(t,!!r.multiple,s,!1):r.defaultValue!=null&&Io(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ah)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)QT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=hs(za.current),hs(wr.current),sc(e)){if(r=e.stateNode,n=e.memoizedProps,r[pr]=e,(s=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:ic(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ic(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pr]=e,e.stateNode=r}return Ft(e),null;case 13:if(ze(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&xn!==null&&e.mode&1&&!(e.flags&128))fT(),Uo(),e.flags|=98560,s=!1;else if(s=sc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[pr]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),s=!1}else Jn!==null&&($m(Jn),Jn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ft===0&&(ft=3):Py())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Ho(),Dm(t,e),t===null&&La(e.stateNode.containerInfo),Ft(e),null;case 10:return my(e.type._context),Ft(e),null;case 17:return dn(e.type)&&uh(),Ft(e),null;case 19:if(ze(We),s=e.memoizedState,s===null)return Ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ul(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gh(t),o!==null){for(e.flags|=128,Ul(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>qo&&(e.flags|=128,r=!0,Ul(s,!1),e.lanes=4194304)}else{if(!r)if(t=gh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ul(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return Ft(e),null}else 2*rt()-s.renderingStartTime>qo&&n!==1073741824&&(e.flags|=128,r=!0,Ul(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=We.current,Ve(We,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Ry(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function pR(t,e){switch(hy(e),e.tag){case 1:return dn(e.type)&&uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ho(),ze(hn),ze(qt),xy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wy(e),null;case 13:if(ze(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(We),null;case 4:return Ho(),null;case 10:return my(e.type._context),null;case 22:case 23:return Ry(),null;case 24:return null;default:return null}}var ac=!1,$t=!1,mR=typeof WeakSet=="function"?WeakSet:Set,Z=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function Vm(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var Y1=!1;function gR(t,e){if(wm=sh,t=eT(),uy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++h===r&&(a=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(xm={focusedElem:t,selectionRange:n},sh=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,T=g.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?_:Gn(e.type,_),T);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(M){Ye(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return g=Y1,Y1=!1,g}function fa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Vm(e,n,s)}i=i.next}while(i!==r)}}function Fd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JT(t){var e=t.alternate;e!==null&&(t.alternate=null,JT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[Fa],delete e[Tm],delete e[XN],delete e[ZN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YT(t){return t.tag===5||t.tag===3||t.tag===4}function X1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ah));else if(r!==4&&(t=t.child,t!==null))for(jm(t,e,n),t=t.sibling;t!==null;)jm(t,e,n),t=t.sibling}function Fm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fm(t,e,n),t=t.sibling;t!==null;)Fm(t,e,n),t=t.sibling}var St=null,Qn=!1;function ei(t,e,n){for(n=n.child;n!==null;)XT(t,e,n),n=n.sibling}function XT(t,e,n){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(Rd,n)}catch{}switch(n.tag){case 5:$t||So(n,e);case 6:var r=St,i=Qn;St=null,ei(t,e,n),St=r,Qn=i,St!==null&&(Qn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Qn?(t=St,n=n.stateNode,t.nodeType===8?rp(t.parentNode,n):t.nodeType===1&&rp(t,n),Oa(t)):rp(St,n.stateNode));break;case 4:r=St,i=Qn,St=n.stateNode.containerInfo,Qn=!0,ei(t,e,n),St=r,Qn=i;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Vm(n,e,o),i=i.next}while(i!==r)}ei(t,e,n);break;case 1:if(!$t&&(So(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ye(n,e,l)}ei(t,e,n);break;case 21:ei(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,ei(t,e,n),$t=r):ei(t,e,n);break;default:ei(t,e,n)}}function Z1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mR),e.forEach(function(r){var i=SR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:St=l.stateNode,Qn=!1;break e;case 3:St=l.stateNode.containerInfo,Qn=!0;break e;case 4:St=l.stateNode.containerInfo,Qn=!0;break e}l=l.return}if(St===null)throw Error(H(160));XT(s,o,i),St=null,Qn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Ye(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZT(e,t),e=e.sibling}function ZT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),lr(t),r&4){try{fa(3,t,t.return),Fd(3,t)}catch(_){Ye(t,t.return,_)}try{fa(5,t,t.return)}catch(_){Ye(t,t.return,_)}}break;case 1:Kn(e,t),lr(t),r&512&&n!==null&&So(n,n.return);break;case 5:if(Kn(e,t),lr(t),r&512&&n!==null&&So(n,n.return),t.flags&32){var i=t.stateNode;try{Na(i,"")}catch(_){Ye(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&_E(i,s),um(l,o);var u=um(l,s);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?CE(i,d):h==="dangerouslySetInnerHTML"?kE(i,d):h==="children"?Na(i,d):Jg(i,h,d,u)}switch(l){case"input":im(i,s);break;case"textarea":EE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Io(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Io(i,!!s.multiple,s.defaultValue,!0):Io(i,!!s.multiple,s.multiple?[]:"",!1))}i[Fa]=s}catch(_){Ye(t,t.return,_)}}break;case 6:if(Kn(e,t),lr(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){Ye(t,t.return,_)}}break;case 3:if(Kn(e,t),lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oa(e.containerInfo)}catch(_){Ye(t,t.return,_)}break;case 4:Kn(e,t),lr(t);break;case 13:Kn(e,t),lr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Iy=rt())),r&4&&Z1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||h,Kn(e,t),$t=u):Kn(e,t),lr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(d=Z=h;Z!==null;){switch(f=Z,m=f.child,f.tag){case 0:case 11:case 14:case 15:fa(4,f,f.return);break;case 1:So(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){Ye(r,n,_)}}break;case 5:So(f,f.return);break;case 22:if(f.memoizedState!==null){tw(d);continue}}m!==null?(m.return=f,Z=m):tw(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=SE("display",o))}catch(_){Ye(t,t.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){Ye(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Kn(e,t),lr(t),r&4&&Z1(t);break;case 21:break;default:Kn(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YT(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Na(i,""),r.flags&=-33);var s=X1(t);Fm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=X1(t);jm(t,l,o);break;default:throw Error(H(161))}}catch(a){Ye(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yR(t,e,n){Z=t,ek(t)}function ek(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ac;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||$t;l=ac;var u=$t;if(ac=o,($t=a)&&!u)for(Z=i;Z!==null;)o=Z,a=o.child,o.tag===22&&o.memoizedState!==null?nw(i):a!==null?(a.return=o,Z=a):nw(i);for(;s!==null;)Z=s,ek(s),s=s.sibling;Z=i,ac=l,$t=u}ew(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):ew(t)}}function ew(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||Fd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&j1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}j1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Oa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}$t||e.flags&512&&Lm(e)}catch(f){Ye(e,e.return,f)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function tw(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function nw(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fd(4,e)}catch(a){Ye(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Ye(e,i,a)}}var s=e.return;try{Lm(e)}catch(a){Ye(e,s,a)}break;case 5:var o=e.return;try{Lm(e)}catch(a){Ye(e,o,a)}}}catch(a){Ye(e,e.return,a)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var vR=Math.ceil,wh=Qr.ReactCurrentDispatcher,Ay=Qr.ReactCurrentOwner,zn=Qr.ReactCurrentBatchConfig,ke=0,wt=null,lt=null,Rt=0,vn=0,Co=Wi(0),ft=0,Wa=null,Rs=0,Bd=0,by=0,pa=null,an=null,Iy=0,qo=1/0,Rr=null,xh=!1,Bm=null,Ci=null,uc=!1,mi=null,_h=0,ma=0,zm=null,Lc=-1,jc=0;function Xt(){return ke&6?rt():Lc!==-1?Lc:Lc=rt()}function Ai(t){return t.mode&1?ke&2&&Rt!==0?Rt&-Rt:tR.transition!==null?(jc===0&&(jc=jE()),jc):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:WE(t.type)),t):1}function nr(t,e,n,r){if(50<ma)throw ma=0,zm=null,Error(H(185));pu(t,n,r),(!(ke&2)||t!==wt)&&(t===wt&&(!(ke&2)&&(Bd|=n),ft===4&&ui(t,Rt)),fn(t,r),n===1&&ke===0&&!(e.mode&1)&&(qo=rt()+500,Vd&&qi()))}function fn(t,e){var n=t.callbackNode;tN(t,e);var r=ih(t,t===wt?Rt:0);if(r===0)n!==null&&h1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&h1(n),e===1)t.tag===0?eR(rw.bind(null,t)):cT(rw.bind(null,t)),JN(function(){!(ke&6)&&qi()}),n=null;else{switch(FE(r)){case 1:n=ty;break;case 4:n=VE;break;case 16:n=rh;break;case 536870912:n=LE;break;default:n=rh}n=ak(n,tk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tk(t,e){if(Lc=-1,jc=0,ke&6)throw Error(H(327));var n=t.callbackNode;if(Oo()&&t.callbackNode!==n)return null;var r=ih(t,t===wt?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Eh(t,r);else{e=r;var i=ke;ke|=2;var s=rk();(wt!==t||Rt!==e)&&(Rr=null,qo=rt()+500,vs(t,e));do try{_R();break}catch(l){nk(t,l)}while(!0);py(),wh.current=s,ke=i,lt!==null?e=0:(wt=null,Rt=0,e=ft)}if(e!==0){if(e===2&&(i=pm(t),i!==0&&(r=i,e=Um(t,i))),e===1)throw n=Wa,vs(t,0),ui(t,r),fn(t,rt()),n;if(e===6)ui(t,r);else{if(i=t.current.alternate,!(r&30)&&!wR(i)&&(e=Eh(t,r),e===2&&(s=pm(t),s!==0&&(r=s,e=Um(t,s))),e===1))throw n=Wa,vs(t,0),ui(t,r),fn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:is(t,an,Rr);break;case 3:if(ui(t,r),(r&130023424)===r&&(e=Iy+500-rt(),10<e)){if(ih(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Em(is.bind(null,t,an,Rr),e);break}is(t,an,Rr);break;case 4:if(ui(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-tr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vR(r/1960))-r,10<r){t.timeoutHandle=Em(is.bind(null,t,an,Rr),r);break}is(t,an,Rr);break;case 5:is(t,an,Rr);break;default:throw Error(H(329))}}}return fn(t,rt()),t.callbackNode===n?tk.bind(null,t):null}function Um(t,e){var n=pa;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=Eh(t,e),t!==2&&(e=an,an=n,e!==null&&$m(e)),t}function $m(t){an===null?an=t:an.push.apply(an,t)}function wR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ir(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ui(t,e){for(e&=~by,e&=~Bd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function rw(t){if(ke&6)throw Error(H(327));Oo();var e=ih(t,0);if(!(e&1))return fn(t,rt()),null;var n=Eh(t,e);if(t.tag!==0&&n===2){var r=pm(t);r!==0&&(e=r,n=Um(t,r))}if(n===1)throw n=Wa,vs(t,0),ui(t,e),fn(t,rt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,an,Rr),fn(t,rt()),null}function Ny(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(qo=rt()+500,Vd&&qi())}}function Ps(t){mi!==null&&mi.tag===0&&!(ke&6)&&Oo();var e=ke;ke|=1;var n=zn.transition,r=Ne;try{if(zn.transition=null,Ne=1,t)return t()}finally{Ne=r,zn.transition=n,ke=e,!(ke&6)&&qi()}}function Ry(){vn=Co.current,ze(Co)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QN(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uh();break;case 3:Ho(),ze(hn),ze(qt),xy();break;case 5:wy(r);break;case 4:Ho();break;case 13:ze(We);break;case 19:ze(We);break;case 10:my(r.type._context);break;case 22:case 23:Ry()}n=n.return}if(wt=t,lt=t=bi(t.current,null),Rt=vn=e,ft=0,Wa=null,by=Bd=Rs=0,an=pa=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}cs=null}return t}function nk(t,e){do{var n=lt;try{if(py(),Oc.current=vh,yh){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yh=!1}if(Ns=0,gt=ht=qe=null,da=!1,Ua=0,Ay.current=null,n===null||n.return===null){ft=1,Wa=e,lt=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Rt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=H1(o);if(m!==null){m.flags&=-257,W1(m,o,l,s,e),m.mode&1&&$1(s,u,e),e=m,a=u;var g=e.updateQueue;if(g===null){var _=new Set;_.add(a),e.updateQueue=_}else g.add(a);break e}else{if(!(e&1)){$1(s,u,e),Py();break e}a=Error(H(426))}}else if(Ue&&l.mode&1){var T=H1(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),W1(T,o,l,s,e),dy(Wo(a,l));break e}}s=a=Wo(a,l),ft!==4&&(ft=2),pa===null?pa=[s]:pa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=FT(s,a,e);L1(s,w);break e;case 1:l=a;var x=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ci===null||!Ci.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=BT(s,l,e);L1(s,M);break e}}s=s.return}while(s!==null)}sk(n)}catch(L){e=L,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function rk(){var t=wh.current;return wh.current=vh,t===null?vh:t}function Py(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(Rs&268435455)&&!(Bd&268435455)||ui(wt,Rt)}function Eh(t,e){var n=ke;ke|=2;var r=rk();(wt!==t||Rt!==e)&&(Rr=null,vs(t,e));do try{xR();break}catch(i){nk(t,i)}while(!0);if(py(),ke=n,wh.current=r,lt!==null)throw Error(H(261));return wt=null,Rt=0,ft}function xR(){for(;lt!==null;)ik(lt)}function _R(){for(;lt!==null&&!qI();)ik(lt)}function ik(t){var e=lk(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?sk(t):lt=e,Ay.current=null}function sk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pR(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,lt=null;return}}else if(n=fR(n,e,vn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);ft===0&&(ft=5)}function is(t,e,n){var r=Ne,i=zn.transition;try{zn.transition=null,Ne=1,ER(t,e,n,r)}finally{zn.transition=i,Ne=r}return null}function ER(t,e,n,r){do Oo();while(mi!==null);if(ke&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nN(t,s),t===wt&&(lt=wt=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uc||(uc=!0,ak(rh,function(){return Oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zn.transition,zn.transition=null;var o=Ne;Ne=1;var l=ke;ke|=4,Ay.current=null,gR(t,n),ZT(n,t),UN(xm),sh=!!wm,xm=wm=null,t.current=n,yR(n),KI(),ke=l,Ne=o,zn.transition=s}else t.current=n;if(uc&&(uc=!1,mi=t,_h=i),s=t.pendingLanes,s===0&&(Ci=null),JI(n.stateNode),fn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xh)throw xh=!1,t=Bm,Bm=null,t;return _h&1&&t.tag!==0&&Oo(),s=t.pendingLanes,s&1?t===zm?ma++:(ma=0,zm=t):ma=0,qi(),null}function Oo(){if(mi!==null){var t=FE(_h),e=zn.transition,n=Ne;try{if(zn.transition=null,Ne=16>t?16:t,mi===null)var r=!1;else{if(t=mi,mi=null,_h=0,ke&6)throw Error(H(331));var i=ke;for(ke|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(Z=u;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:fa(8,h,s)}var d=h.child;if(d!==null)d.return=h,Z=d;else for(;Z!==null;){h=Z;var f=h.sibling,m=h.return;if(JT(h),h===u){Z=null;break}if(f!==null){f.return=m,Z=f;break}Z=m}}}var g=s.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fa(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Z=w;break e}Z=s.return}}var x=t.current;for(Z=x;Z!==null;){o=Z;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Z=C;else e:for(o=x;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fd(9,l)}}catch(L){Ye(l,l.return,L)}if(l===o){Z=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Z=M;break e}Z=l.return}}if(ke=i,qi(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(Rd,t)}catch{}r=!0}return r}finally{Ne=n,zn.transition=e}}return!1}function iw(t,e,n){e=Wo(n,e),e=FT(t,e,1),t=Si(t,e,1),e=Xt(),t!==null&&(pu(t,1,e),fn(t,e))}function Ye(t,e,n){if(t.tag===3)iw(t,t,n);else for(;e!==null;){if(e.tag===3){iw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ci===null||!Ci.has(r))){t=Wo(n,t),t=BT(e,t,1),e=Si(e,t,1),t=Xt(),e!==null&&(pu(e,1,t),fn(e,t));break}}e=e.return}}function TR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Rt&n)===n&&(ft===4||ft===3&&(Rt&130023424)===Rt&&500>rt()-Iy?vs(t,0):by|=n),fn(t,e)}function ok(t,e){e===0&&(t.mode&1?(e=Zu,Zu<<=1,!(Zu&130023424)&&(Zu=4194304)):e=1);var n=Xt();t=$r(t,e),t!==null&&(pu(t,e,n),fn(t,n))}function kR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ok(t,n)}function SR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),ok(t,n)}var lk;lk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,dR(t,e,n);cn=!!(t.flags&131072)}else cn=!1,Ue&&e.flags&1048576&&hT(e,dh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vc(t,e),t=e.pendingProps;var i=zo(e,qt.current);Mo(e,n),i=Ey(null,e,r,t,i,n);var s=Ty();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(s=!0,ch(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yy(e),i.updater=jd,e.stateNode=i,i._reactInternals=e,Im(e,r,t,n),e=Pm(null,e,r,!0,s,n)):(e.tag=0,Ue&&s&&cy(e),Jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AR(r),t=Gn(r,t),i){case 0:e=Rm(null,e,r,t,n);break e;case 1:e=G1(null,e,r,t,n);break e;case 11:e=q1(null,e,r,t,n);break e;case 14:e=K1(null,e,r,Gn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),Rm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),G1(t,e,r,i,n);case 3:e:{if(HT(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,yT(t,e),mh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wo(Error(H(423)),e),e=Q1(t,e,r,n,i);break e}else if(r!==i){i=Wo(Error(H(424)),e),e=Q1(t,e,r,n,i);break e}else for(xn=ki(e.stateNode.containerInfo.firstChild),En=e,Ue=!0,Jn=null,n=mT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uo(),r===i){e=Hr(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return vT(e),t===null&&Cm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_m(r,i)?o=null:s!==null&&_m(r,s)&&(e.flags|=32),$T(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&Cm(e),null;case 13:return WT(t,e,n);case 4:return vy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$o(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),q1(t,e,r,i,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(fh,r._currentValue),r._currentValue=o,s!==null)if(ir(s.value,o)){if(s.children===i.children&&!hn.current){e=Hr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Lr(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Am(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Am(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Mo(e,n),i=$n(i),r=r(i),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,i=Gn(r,e.pendingProps),i=Gn(r.type,i),K1(t,e,r,i,n);case 15:return zT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gn(r,i),Vc(t,e),e.tag=1,dn(r)?(t=!0,ch(e)):t=!1,Mo(e,n),jT(e,r,i),Im(e,r,i,n),Pm(null,e,r,!0,t,n);case 19:return qT(t,e,n);case 22:return UT(t,e,n)}throw Error(H(156,e.tag))};function ak(t,e){return DE(t,e)}function CR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,r){return new CR(t,e,n,r)}function My(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AR(t){if(typeof t=="function")return My(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xg)return 11;if(t===Zg)return 14}return 2}function bi(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")My(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case go:return ws(n.children,i,s,e);case Yg:o=8,i|=8;break;case Zp:return t=Fn(12,n,e,i|2),t.elementType=Zp,t.lanes=s,t;case em:return t=Fn(13,n,e,i),t.elementType=em,t.lanes=s,t;case tm:return t=Fn(19,n,e,i),t.elementType=tm,t.lanes=s,t;case vE:return zd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gE:o=10;break e;case yE:o=9;break e;case Xg:o=11;break e;case Zg:o=14;break e;case ri:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ws(t,e,n,r){return t=Fn(7,t,r,e),t.lanes=n,t}function zd(t,e,n,r){return t=Fn(22,t,r,e),t.elementType=vE,t.lanes=n,t.stateNode={isHidden:!1},t}function hp(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function dp(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qf(0),this.expirationTimes=qf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Oy(t,e,n,r,i,s,o,l,a){return t=new bR(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yy(s),t}function IR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uk(t){if(!t)return Fi;t=t._reactInternals;e:{if(Us(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(dn(n))return uT(t,n,e)}return e}function ck(t,e,n,r,i,s,o,l,a){return t=Oy(n,r,!0,t,i,s,o,l,a),t.context=uk(null),n=t.current,r=Xt(),i=Ai(n),s=Lr(r,i),s.callback=e??null,Si(n,s,i),t.current.lanes=i,pu(t,i,r),fn(t,r),t}function Ud(t,e,n,r){var i=e.current,s=Xt(),o=Ai(i);return n=uk(n),e.context===null?e.context=n:e.pendingContext=n,e=Lr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Si(i,e,o),t!==null&&(nr(t,i,o,s),Mc(t,i,o)),o}function Th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dy(t,e){sw(t,e),(t=t.alternate)&&sw(t,e)}function NR(){return null}var hk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vy(t){this._internalRoot=t}$d.prototype.render=Vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Ud(t,e,null,null)};$d.prototype.unmount=Vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ps(function(){Ud(null,t,null,null)}),e[Ur]=null}};function $d(t){this._internalRoot=t}$d.prototype.unstable_scheduleHydration=function(t){if(t){var e=UE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ai.length&&e!==0&&e<ai[n].priority;n++);ai.splice(n,0,t),n===0&&HE(t)}};function Ly(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ow(){}function RR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Th(o);s.call(u)}}var o=ck(e,r,t,0,null,!1,!1,"",ow);return t._reactRootContainer=o,t[Ur]=o.current,La(t.nodeType===8?t.parentNode:t),Ps(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Th(a);l.call(u)}}var a=Oy(t,0,!1,null,null,!1,!1,"",ow);return t._reactRootContainer=a,t[Ur]=a.current,La(t.nodeType===8?t.parentNode:t),Ps(function(){Ud(e,a,n,r)}),a}function Wd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Th(o);l.call(a)}}Ud(e,o,t,i)}else o=RR(n,e,t,i,r);return Th(o)}BE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yl(e.pendingLanes);n!==0&&(ny(e,n|1),fn(e,rt()),!(ke&6)&&(qo=rt()+500,qi()))}break;case 13:Ps(function(){var r=$r(t,1);if(r!==null){var i=Xt();nr(r,t,1,i)}}),Dy(t,1)}};ry=function(t){if(t.tag===13){var e=$r(t,134217728);if(e!==null){var n=Xt();nr(e,t,134217728,n)}Dy(t,134217728)}};zE=function(t){if(t.tag===13){var e=Ai(t),n=$r(t,e);if(n!==null){var r=Xt();nr(n,t,e,r)}Dy(t,e)}};UE=function(){return Ne};$E=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};hm=function(t,e,n){switch(e){case"input":if(im(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dd(r);if(!i)throw Error(H(90));xE(r),im(r,i)}}}break;case"textarea":EE(t,n);break;case"select":e=n.value,e!=null&&Io(t,!!n.multiple,e,!1)}};IE=Ny;NE=Ps;var PR={usingClientEntryPoint:!1,Events:[gu,xo,Dd,AE,bE,Ny]},$l={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MR={bundleType:$l.bundleType,version:$l.version,rendererPackageName:$l.rendererPackageName,rendererConfig:$l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ME(t),t===null?null:t.stateNode},findFiberByHostInstance:$l.findFiberByHostInstance||NR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Rd=cc.inject(MR),vr=cc}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PR;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ly(e))throw Error(H(200));return IR(t,e,null,n)};Sn.createRoot=function(t,e){if(!Ly(t))throw Error(H(299));var n=!1,r="",i=hk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Oy(t,1,!1,null,null,n,!1,r,i),t[Ur]=e.current,La(t.nodeType===8?t.parentNode:t),new Vy(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=ME(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Ps(t)};Sn.hydrate=function(t,e,n){if(!Hd(e))throw Error(H(200));return Wd(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!Ly(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=hk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ck(e,null,t,1,n??null,i,!1,s,o),t[Ur]=e.current,La(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $d(e)};Sn.render=function(t,e,n){if(!Hd(e))throw Error(H(200));return Wd(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Hd(t))throw Error(H(40));return t._reactRootContainer?(Ps(function(){Wd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};Sn.unstable_batchedUpdates=Ny;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hd(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Wd(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function dk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dk)}catch(t){console.error(t)}}dk(),dE.exports=Sn;var fk=dE.exports;const OR=eE(fk);var pk,lw=fk;pk=lw.createRoot,lw.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qa.apply(this,arguments)}var gi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gi||(gi={}));const aw="popstate";function DR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Hm("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kh(i)}return LR(e,n,null,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VR(){return Math.random().toString(36).substr(2,8)}function uw(t,e){return{usr:t.state,key:t.key,idx:e}}function Hm(t,e,n,r){return n===void 0&&(n=null),qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hl(e):e,{state:n,key:e&&e.key||r||VR()})}function kh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function LR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=gi.Pop,a=null,u=h();u==null&&(u=0,o.replaceState(qa({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=gi.Pop;let T=h(),w=T==null?null:T-u;u=T,a&&a({action:l,location:_.location,delta:w})}function f(T,w){l=gi.Push;let x=Hm(_.location,T,w);u=h()+1;let C=uw(x,u),M=_.createHref(x);try{o.pushState(C,"",M)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(M)}s&&a&&a({action:l,location:_.location,delta:1})}function m(T,w){l=gi.Replace;let x=Hm(_.location,T,w);u=h();let C=uw(x,u),M=_.createHref(x);o.replaceState(C,"",M),s&&a&&a({action:l,location:_.location,delta:0})}function g(T){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof T=="string"?T:kh(T);return x=x.replace(/ $/,"%20"),it(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let _={get action(){return l},get location(){return t(i,o)},listen(T){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(aw,d),a=T,()=>{i.removeEventListener(aw,d),a=null}},createHref(T){return e(i,T)},createURL:g,encodeLocation(T){let w=g(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(T){return o.go(T)}};return _}var cw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cw||(cw={}));function jR(t,e,n){return n===void 0&&(n="/"),FR(t,e,n,!1)}function FR(t,e,n,r){let i=typeof e=="string"?hl(e):e,s=jy(i.pathname||"/",n);if(s==null)return null;let o=gk(t);BR(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=YR(s);l=QR(o[a],u,r)}return l}function gk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(it(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=Ii([r,a.relativePath]),h=n.concat(a);s.children&&s.children.length>0&&(it(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),gk(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:KR(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of yk(s.path))i(s,o,a)}),e}function yk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=yk(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function BR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:GR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const zR=/^:[\w-]+$/,UR=3,$R=2,HR=1,WR=10,qR=-2,hw=t=>t==="*";function KR(t,e){let n=t.split("/"),r=n.length;return n.some(hw)&&(r+=qR),e&&(r+=$R),n.filter(i=>!hw(i)).reduce((i,s)=>i+(zR.test(s)?UR:s===""?HR:WR),r)}function GR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function QR(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=dw({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h),f=a.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=dw({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ii([s,d.pathname]),pathnameBase:t2(Ii([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ii([s,d.pathnameBase]))}return o}function dw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=JR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let _=l[d]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const g=l[d];return m&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function JR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function YR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function XR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?hl(t):t;return{pathname:n?n.startsWith("/")?n:ZR(n,e):e,search:n2(r),hash:r2(i)}}function ZR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fy(t,e){let n=e2(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function By(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=hl(t):(i=qa({},t),it(!i.pathname||!i.pathname.includes("?"),fp("?","pathname","search",i)),it(!i.pathname||!i.pathname.includes("#"),fp("#","pathname","hash",i)),it(!i.search||!i.search.includes("#"),fp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=XR(i,l),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||h)&&(a.pathname+="/"),a}const Ii=t=>t.join("/").replace(/\/\/+/g,"/"),t2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),n2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,r2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function i2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vk=["post","put","patch","delete"];new Set(vk);const s2=["get",...vk];new Set(s2);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ka.apply(this,arguments)}const zy=U.createContext(null),o2=U.createContext(null),Ki=U.createContext(null),qd=U.createContext(null),Jr=U.createContext({outlet:null,matches:[],isDataRoute:!1}),wk=U.createContext(null);function l2(t,e){let{relative:n}=e===void 0?{}:e;dl()||it(!1);let{basename:r,navigator:i}=U.useContext(Ki),{hash:s,pathname:o,search:l}=_k(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:Ii([r,o])),i.createHref({pathname:a,search:l,hash:s})}function dl(){return U.useContext(qd)!=null}function vu(){return dl()||it(!1),U.useContext(qd).location}function xk(t){U.useContext(Ki).static||U.useLayoutEffect(t)}function Kd(){let{isDataRoute:t}=U.useContext(Jr);return t?_2():a2()}function a2(){dl()||it(!1);let t=U.useContext(zy),{basename:e,future:n,navigator:r}=U.useContext(Ki),{matches:i}=U.useContext(Jr),{pathname:s}=vu(),o=JSON.stringify(Fy(i,n.v7_relativeSplatPath)),l=U.useRef(!1);return xk(()=>{l.current=!0}),U.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=By(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ii([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function u2(){let{matches:t}=U.useContext(Jr),e=t[t.length-1];return e?e.params:{}}function _k(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(Ki),{matches:i}=U.useContext(Jr),{pathname:s}=vu(),o=JSON.stringify(Fy(i,r.v7_relativeSplatPath));return U.useMemo(()=>By(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function c2(t,e){return h2(t,e)}function h2(t,e,n,r){dl()||it(!1);let{navigator:i}=U.useContext(Ki),{matches:s}=U.useContext(Jr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=vu(),h;if(e){var d;let T=typeof e=="string"?hl(e):e;a==="/"||(d=T.pathname)!=null&&d.startsWith(a)||it(!1),h=T}else h=u;let f=h.pathname||"/",m=f;if(a!=="/"){let T=a.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let g=jR(t,{pathname:m}),_=g2(g&&g.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Ii([a,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?a:Ii([a,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&_?U.createElement(qd.Provider,{value:{location:Ka({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:gi.Pop}},_):_}function d2(){let t=x2(),e=i2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,null)}const f2=U.createElement(d2,null);class p2 extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(Jr.Provider,{value:this.props.routeContext},U.createElement(wk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m2(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(zy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Jr.Provider,{value:e},r)}function g2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||it(!1),o=o.slice(0,Math.min(o.length,h+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=n,g=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,g=!1,_=null,T=null;n&&(m=l&&d.route.id?l[d.route.id]:void 0,_=d.route.errorElement||f2,a&&(u<0&&f===0?(g=!0,T=null):u===f&&(g=!0,T=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),x=()=>{let C;return m?C=_:g?C=T:d.route.Component?C=U.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=h,U.createElement(m2,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?U.createElement(p2,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var Ek=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ek||{}),Sh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Sh||{});function y2(t){let e=U.useContext(zy);return e||it(!1),e}function v2(t){let e=U.useContext(o2);return e||it(!1),e}function w2(t){let e=U.useContext(Jr);return e||it(!1),e}function Tk(t){let e=w2(),n=e.matches[e.matches.length-1];return n.route.id||it(!1),n.route.id}function x2(){var t;let e=U.useContext(wk),n=v2(Sh.UseRouteError),r=Tk(Sh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function _2(){let{router:t}=y2(Ek.UseNavigateStable),e=Tk(Sh.UseNavigateStable),n=U.useRef(!1);return xk(()=>{n.current=!0}),U.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ka({fromRouteId:e},s)))},[t,e])}function E2(t){let{to:e,replace:n,state:r,relative:i}=t;dl()||it(!1);let{future:s,static:o}=U.useContext(Ki),{matches:l}=U.useContext(Jr),{pathname:a}=vu(),u=Kd(),h=By(e,Fy(l,s.v7_relativeSplatPath),a,i==="path"),d=JSON.stringify(h);return U.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function yn(t){it(!1)}function T2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=gi.Pop,navigator:s,static:o=!1,future:l}=t;dl()&&it(!1);let a=e.replace(/^\/*/,"/"),u=U.useMemo(()=>({basename:a,navigator:s,static:o,future:Ka({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof r=="string"&&(r=hl(r));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:g="default"}=r,_=U.useMemo(()=>{let T=jy(h,a);return T==null?null:{location:{pathname:T,search:d,hash:f,state:m,key:g},navigationType:i}},[a,h,d,f,m,g,i]);return _==null?null:U.createElement(Ki.Provider,{value:u},U.createElement(qd.Provider,{children:n,value:_}))}function kk(t){let{children:e,location:n}=t;return c2(Wm(e),n)}new Promise(()=>{});function Wm(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(r,i)=>{if(!U.isValidElement(r))return;let s=[...e,i];if(r.type===U.Fragment){n.push.apply(n,Wm(r.props.children,s));return}r.type!==yn&&it(!1),!r.props.index||!r.props.children||it(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wm(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qm.apply(this,arguments)}function k2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function S2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function C2(t,e){return t.button===0&&(!e||e==="_self")&&!S2(t)}const A2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],b2="6";try{window.__reactRouterVersion=b2}catch{}const I2="startTransition",fw=TI[I2];function N2(t){let{basename:e,children:n,future:r,window:i}=t,s=U.useRef();s.current==null&&(s.current=DR({window:i,v5Compat:!0}));let o=s.current,[l,a]=U.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=U.useCallback(d=>{u&&fw?fw(()=>a(d)):a(d)},[a,u]);return U.useLayoutEffect(()=>o.listen(h),[o,h]),U.createElement(T2,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const R2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=U.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:h,viewTransition:d}=e,f=k2(e,A2),{basename:m}=U.useContext(Ki),g,_=!1;if(typeof u=="string"&&P2.test(u)&&(g=u,R2))try{let C=new URL(window.location.href),M=u.startsWith("//")?new URL(C.protocol+u):new URL(u),L=jy(M.pathname,m);M.origin===C.origin&&L!=null?u=L+M.search+M.hash:_=!0}catch{}let T=l2(u,{relative:i}),w=M2(u,{replace:o,state:l,target:a,preventScrollReset:h,relative:i,viewTransition:d});function x(C){r&&r(C),C.defaultPrevented||w(C)}return U.createElement("a",qm({},f,{href:g||T,onClick:_||s?r:x,ref:n,target:a}))});var pw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pw||(pw={}));var mw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mw||(mw={}));function M2(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,a=Kd(),u=vu(),h=_k(t,{relative:o});return U.useCallback(d=>{if(C2(d,n)){d.preventDefault();let f=r!==void 0?r:kh(u)===kh(h);a(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,a,h,r,i,n,t,s,o,l])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:a,...u},h)=>U.createElement("svg",{ref:h,...O2,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${D2(t)}`,l].join(" "),...u},[...e.map(([d,f])=>U.createElement(d,f)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=ye("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=ye("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=ye("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=ye("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=ye("Flower",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=ye("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=ye("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=ye("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=ye("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=ye("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=ye("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=ye("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=ye("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=ye("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=ye("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=ye("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=ye("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),gP=()=>{const t=[{name:"Home",path:"/"},{name:"Home Decor",path:"/home-decor"},{name:"Travel Deals",path:"/travel-deals"},{name:"Home Appliances",path:"/home-appliances"},{name:"Garden Planting",path:"/garden-planting"},{name:"About Us",path:"/about"},{name:"Contact Us",path:"/contact"}];return v.jsx("header",{className:"bg-white shadow-md",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex justify-between items-center h-16",children:[v.jsxs(yt,{to:"/",className:"flex items-center space-x-2",children:[v.jsx(j2,{className:"h-8 w-8 text-indigo-600"}),v.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Easy Finds Hub"})]}),v.jsx("nav",{className:"hidden md:flex space-x-8",children:t.map(e=>v.jsx(yt,{to:e.path,className:"text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:e.name},e.path))}),v.jsx("button",{className:"md:hidden",children:v.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})})},yP=()=>v.jsx("footer",{className:"bg-gray-900 text-white",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),v.jsxs("ul",{className:"space-y-2",children:[v.jsx("li",{children:v.jsx(yt,{to:"/",className:"hover:text-indigo-400",children:"Home"})}),v.jsx("li",{children:v.jsx(yt,{to:"/about",className:"hover:text-indigo-400",children:"About Us"})}),v.jsx("li",{children:v.jsx(yt,{to:"/contact",className:"hover:text-indigo-400",children:"Contact Us"})}),v.jsx("li",{children:v.jsx(yt,{to:"/privacy",className:"hover:text-indigo-400",children:"Privacy Policy"})})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Categories"}),v.jsxs("ul",{className:"space-y-2",children:[v.jsx("li",{children:v.jsx(yt,{to:"/home-decor",className:"hover:text-indigo-400",children:"Home Decor"})}),v.jsx("li",{children:v.jsx(yt,{to:"/travel-deals",className:"hover:text-indigo-400",children:"Travel Deals"})}),v.jsx("li",{children:v.jsx(yt,{to:"/home-appliances",className:"hover:text-indigo-400",children:"Home Appliances"})}),v.jsx("li",{children:v.jsx(yt,{to:"/garden-planting",className:"hover:text-indigo-400",children:"Garden Planting"})})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Follow Us"}),v.jsxs("div",{className:"flex space-x-4",children:[v.jsx("a",{href:"#",className:"hover:text-indigo-400",children:v.jsx(U2,{size:24})}),v.jsx("a",{href:"#",className:"hover:text-indigo-400",children:v.jsx(cP,{size:24})}),v.jsx("a",{href:"#",className:"hover:text-indigo-400",children:v.jsx(G2,{size:24})}),v.jsx("a",{href:"#",className:"hover:text-indigo-400",children:v.jsx(mP,{size:24})})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Newsletter"}),v.jsx("p",{className:"mb-4",children:"Subscribe to get the latest updates"}),v.jsxs("form",{className:"flex",children:[v.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 rounded-l-md text-gray-900"}),v.jsx("button",{type:"submit",className:"bg-indigo-600 px-4 py-2 rounded-r-md hover:bg-indigo-700 transition-colors",children:"Subscribe"})]})]})]}),v.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800 text-center",children:v.jsxs("p",{children:["© ",new Date().getFullYear()," Easy Finds Hub. All rights reserved."]})})]})}),vP=()=>{const[t,e]=U.useState(!1);U.useEffect(()=>{localStorage.getItem("cookieConsent")||e(!0)},[]);const n=()=>{localStorage.setItem("cookieConsent","true"),e(!1)};return t?v.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 text-white p-4 z-50",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row items-center justify-between",children:[v.jsx("div",{className:"mb-4 sm:mb-0 text-center sm:text-left",children:v.jsxs("p",{className:"text-sm",children:["We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.",v.jsx("a",{href:"/privacy",className:"underline ml-1",children:"Learn more"})]})}),v.jsx("div",{className:"flex space-x-4",children:v.jsx("button",{onClick:n,className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors text-sm",children:"Accept"})})]})}):null},fl=()=>v.jsx("section",{className:"bg-indigo-600 text-white py-12",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Subscribe to our newsletter"}),v.jsx("p",{className:"mb-6",children:"Get the latest updates and exclusive content delivered to your inbox!"}),v.jsxs("form",{className:"max-w-md mx-auto flex",children:[v.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 rounded-l-md text-gray-900"}),v.jsx("button",{type:"submit",className:"bg-white text-indigo-600 px-6 py-2 rounded-r-md font-semibold hover:bg-gray-100 transition-colors",children:"Subscribe"})]})]})})}),wP=({slug:t,title:e,excerpt:n,image:r,author:i,date:s,category:o,readTime:l})=>v.jsxs("article",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[v.jsx(yt,{to:`/article/${t}`,children:v.jsx("img",{src:r,alt:e,className:"w-full h-48 object-cover transition-transform hover:scale-105"})}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx(yt,{to:`/category/${o.toLowerCase()}`,className:"text-sm font-medium text-indigo-600 hover:text-indigo-700",children:o}),v.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[v.jsx(L2,{className:"h-4 w-4 mr-1"}),l]})]}),v.jsx(yt,{to:`/article/${t}`,children:v.jsx("h3",{className:"text-xl font-semibold mb-2 hover:text-indigo-600",children:e})}),v.jsx("p",{className:"text-gray-600 mb-4",children:n}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(dP,{className:"h-4 w-4 text-gray-500 mr-2"}),v.jsx("span",{className:"text-sm text-gray-600",children:i})]}),v.jsx("span",{className:"text-sm text-gray-500",children:s})]})]})]}),xP=()=>{const t=[{title:"Home Decor Ideas",description:"Get inspired with our latest home decor ideas and DIY projects.",icon:K2,image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800",link:"/home-decor"},{title:"Travel Company Deals",description:"Discover the best travel deals and tips for your next adventure.",icon:tP,image:"https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=800",link:"/travel-deals"},{title:"Latest Home Appliances",description:"Stay updated with reviews and guides on the latest home appliances.",icon:uP,image:"https://images.unsplash.com/photo-1556911220-bff31c812dba?w=800",link:"/home-appliances"},{title:"Garden Planting",description:"Turn your outdoor space into a beautiful garden with our tips and tools.",icon:$2,image:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800",link:"/garden-planting"}],e=[{slug:"modern-interior-design-trends",title:"Modern Interior Design Trends",excerpt:"Discover the latest trends in modern interior design and how to incorporate them into your home.",image:"https://images.unsplash.com/photo-1600585152220-90363fe7e115?w=600",author:"Sarah Johnson",date:"March 15, 2024",category:"Home Decor",readTime:"8 min read"},{slug:"best-travel-destinations-2024",title:"Best Travel Destinations 2024",excerpt:"Explore the most exciting travel destinations for your next adventure in 2024.",image:"https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?w=600",author:"Michael Chen",date:"March 14, 2024",category:"Travel",readTime:"10 min read"},{slug:"smart-home-technology-guide",title:"Smart Home Technology Guide",excerpt:"Everything you need to know about the latest smart home technology innovations.",image:"https://images.unsplash.com/photo-1556911220-bff31c812dba?w=600",author:"Emily Williams",date:"March 13, 2024",category:"Home Appliances",readTime:"12 min read"}];return v.jsxs("div",{children:[v.jsxs("section",{className:"relative h-[600px] bg-cover bg-center",style:{backgroundImage:"url(https://images.unsplash.com/photo-1513694203232-719a280e022f?w=1920)"},children:[v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center",children:v.jsxs("div",{className:"text-white",children:[v.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Welcome to Easy Finds Hub"}),v.jsx("p",{className:"text-xl md:text-2xl mb-8",children:"Your go-to source for top-notch products and services!"}),v.jsx(yt,{to:"/about",className:"bg-indigo-600 text-white px-8 py-3 rounded-md font-semibold hover:bg-indigo-700 transition-colors",children:"Learn More"})]})})]}),v.jsx("section",{className:"py-16 bg-gray-50",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Explore Our Categories"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map(n=>v.jsx(yt,{to:n.link,className:"group",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-transform transform hover:-translate-y-1",children:[v.jsx("div",{className:"h-48 overflow-hidden",children:v.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover transition-transform transform group-hover:scale-110"})}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex items-center mb-4",children:[v.jsx(n.icon,{className:"h-6 w-6 text-indigo-600 mr-2"}),v.jsx("h3",{className:"text-xl font-semibold",children:n.title})]}),v.jsx("p",{className:"text-gray-600",children:n.description})]})]})},n.title))})]})}),v.jsx("section",{className:"py-16",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Featured Articles"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map(n=>v.jsx(wP,{...n},n.slug))})]})}),v.jsx(fl,{}),v.jsx("section",{className:"py-16 bg-gray-50",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-3xl font-bold mb-4",children:"About Easy Finds Hub"}),v.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Learn more about our mission and the team behind Easy Finds Hub. We're dedicated to bringing you the best content and recommendations across home decor, travel, appliances, and gardening."}),v.jsx(yt,{to:"/about",className:"inline-block mt-8 bg-indigo-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-indigo-700 transition-colors",children:"About Us"})]})})})]})},Gd=({title:t,description:e,backgroundImage:n})=>v.jsxs("section",{className:"relative h-[400px] bg-cover bg-center",style:{backgroundImage:`url(${n})`},children:[v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center",children:v.jsxs("div",{className:"text-white",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:t}),v.jsx("p",{className:"text-xl md:text-2xl",children:e})]})})]}),_P=()=>{const t=[{title:"Modern Minimalist Design Tips",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800",excerpt:"Discover the art of minimalist design and how to create a clutter-free living space."},{title:"Color Trends for 2024",image:"https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=800",excerpt:"Explore this year's hottest color combinations for your home interior."},{title:"DIY Wall Art Projects",image:"https://images.unsplash.com/photo-1513519245088-0e12902e35ca?w=800",excerpt:"Create stunning wall art pieces with these simple DIY tutorials."}];return v.jsxs("div",{children:[v.jsx(Gd,{title:"Home Decor Ideas",description:"Transform your space with inspiring decor ideas and expert tips",backgroundImage:"https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?w=1920"}),v.jsx("section",{className:"py-16",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,n)=>v.jsxs("article",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[v.jsx("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"}),v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),v.jsx("p",{className:"text-gray-600 mb-4",children:e.excerpt}),v.jsx("a",{href:"#",className:"text-indigo-600 font-semibold hover:text-indigo-700",children:"Read More →"})]})]},n))})})}),v.jsx(fl,{})]})},EP=()=>{const t=[{destination:"Bali, Indonesia",image:"https://images.unsplash.com/photo-1537996194471-e657df975ab4?w=800",price:"$899",duration:"7 days",description:"Experience the magic of Bali with this all-inclusive package."},{destination:"Santorini, Greece",image:"https://images.unsplash.com/photo-1570077188670-e3a8d69ac5ff?w=800",price:"$1299",duration:"5 days",description:"Explore the stunning white-washed buildings and crystal-clear waters."},{destination:"Swiss Alps",image:"https://images.unsplash.com/photo-1531366936337-7c912a4589a7?w=800",price:"$1499",duration:"6 days",description:"Adventure awaits in the majestic Swiss Alps."}];return v.jsxs("div",{children:[v.jsx(Gd,{title:"Travel Deals",description:"Discover amazing travel packages and destinations",backgroundImage:"https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=1920"}),v.jsx("section",{className:"py-16",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,n)=>v.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[v.jsxs("div",{className:"relative",children:[v.jsx("img",{src:e.image,alt:e.destination,className:"w-full h-48 object-cover"}),v.jsx("div",{className:"absolute top-4 right-4 bg-indigo-600 text-white px-3 py-1 rounded-full",children:e.price})]}),v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.destination}),v.jsxs("div",{className:"flex items-center space-x-4 mb-4 text-gray-600",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(Sk,{className:"h-4 w-4 mr-1"}),e.duration]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Ak,{className:"h-4 w-4 mr-1"}),"Flight Included"]})]}),v.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),v.jsx("button",{className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"View Deal"})]})]},n))})})}),v.jsx(fl,{})]})},TP=()=>{const t=[{name:"Smart Refrigerator Pro",image:"https://images.unsplash.com/photo-1571175443880-49e1d25b2bc5?w=800",rating:4.8,price:"$1,299",description:"Advanced cooling technology with smart features."},{name:"EcoWash Dishwasher",image:"https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=800",rating:4.6,price:"$899",description:"Energy-efficient dishwashing with quiet operation."},{name:"SmartCook Oven",image:"https://images.unsplash.com/photo-1585351650024-8e333a17aeff?w=800",rating:4.9,price:"$1,499",description:"Professional-grade cooking with smart controls."}];return v.jsxs("div",{children:[v.jsx(Gd,{title:"Home Appliances",description:"Discover the latest in smart home technology",backgroundImage:"https://images.unsplash.com/photo-1556911220-bff31c812dba?w=1920"}),v.jsx("section",{className:"py-16",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,n)=>v.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover"}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h3",{className:"text-xl font-semibold",children:e.name}),v.jsxs("div",{className:"flex items-center text-yellow-400",children:[v.jsx(sP,{className:"h-5 w-5 fill-current"}),v.jsx("span",{className:"ml-1 text-gray-600",children:e.rating})]})]}),v.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[v.jsx(F2,{className:"h-5 w-5"}),v.jsx("span",{className:"font-semibold",children:e.price})]}),v.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),v.jsx("button",{className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"Learn More"})]})]},n))})})}),v.jsx(fl,{})]})},kP=()=>{const t=[{title:"Spring Planting Guide",image:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800",description:"Essential tips for your spring garden planning and planting."},{title:"Herb Garden Basics",image:"https://images.unsplash.com/photo-1466692476868-aef1dfb1e735?w=800",description:"Start your own herb garden with these beginner-friendly tips."},{title:"Garden Tool Essentials",image:"https://images.unsplash.com/photo-1591857177580-dc82b9ac4e1e?w=800",description:"Must-have tools for every gardening enthusiast."}];return v.jsxs("div",{children:[v.jsx(Gd,{title:"Garden Planting",description:"Create your perfect garden with expert advice",backgroundImage:"https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=1920"}),v.jsx("section",{className:"py-16",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,n)=>v.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[v.jsx("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"}),v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),v.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),v.jsxs("div",{className:"flex space-x-4 mb-4",children:[v.jsxs("div",{className:"flex items-center text-gray-600",children:[v.jsx(oP,{className:"h-5 w-5 mr-1"}),v.jsx("span",{children:"Full Sun"})]}),v.jsxs("div",{className:"flex items-center text-gray-600",children:[v.jsx(B2,{className:"h-5 w-5 mr-1"}),v.jsx("span",{children:"Regular Water"})]})]}),v.jsx("button",{className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"Read Guide"})]})]},n))})})}),v.jsx(fl,{})]})},SP=()=>{const t=[{name:"Sarah Johnson",role:"Founder & Editor",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"},{name:"Michael Chen",role:"Home Decor Expert",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400"},{name:"Emily Williams",role:"Travel Specialist",image:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"}];return v.jsxs("div",{children:[v.jsx("section",{className:"bg-indigo-600 text-white py-20",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"About Easy Finds Hub"}),v.jsx("p",{className:"text-xl max-w-3xl mx-auto",children:"We're passionate about helping you discover the best products, travel deals, and lifestyle tips to enhance your everyday life."})]})}),v.jsx("section",{className:"py-16",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(aP,{className:"h-8 w-8 text-indigo-600"})}),v.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Our Mission"}),v.jsx("p",{className:"text-gray-600",children:"To provide reliable, expert advice and recommendations for your home and lifestyle needs."})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(q2,{className:"h-8 w-8 text-indigo-600"})}),v.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Our Values"}),v.jsx("p",{className:"text-gray-600",children:"We believe in authenticity, quality, and putting our readers' needs first."})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(fP,{className:"h-8 w-8 text-indigo-600"})}),v.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Our Community"}),v.jsx("p",{className:"text-gray-600",children:"Join thousands of readers who trust us for their lifestyle decisions."})]})]}),v.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Meet Our Team"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(e=>v.jsxs("div",{className:"text-center",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-32 h-32 rounded-full mx-auto mb-4 object-cover"}),v.jsx("h3",{className:"text-xl font-semibold mb-1",children:e.name}),v.jsx("p",{className:"text-gray-600",children:e.role})]},e.name))})]})})]})},CP=()=>v.jsxs("div",{children:[v.jsx("section",{className:"bg-indigo-600 text-white py-20",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Contact Us"}),v.jsx("p",{className:"text-xl max-w-3xl mx-auto",children:"Have questions or suggestions? We'd love to hear from you."})]})}),v.jsx("section",{className:"py-16",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Get in Touch"}),v.jsxs("form",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),v.jsx("input",{type:"text",id:"name",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),v.jsx("input",{type:"email",id:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700",children:"Subject"}),v.jsx("input",{type:"text",id:"subject",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"Message"}),v.jsx("textarea",{id:"message",rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"Send Message"})]})]}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Contact Information"}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-start",children:[v.jsx(Z2,{className:"h-6 w-6 text-indigo-600 mt-1 mr-4"}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold",children:"Email"}),v.jsx("p",{className:"text-gray-600",children:"contact@easyfinds.com"})]})]}),v.jsxs("div",{className:"flex items-start",children:[v.jsx(eP,{className:"h-6 w-6 text-indigo-600 mt-1 mr-4"}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold",children:"Phone"}),v.jsx("p",{className:"text-gray-600",children:"+1 (555) 123-4567"})]})]}),v.jsxs("div",{className:"flex items-start",children:[v.jsx(Ak,{className:"h-6 w-6 text-indigo-600 mt-1 mr-4"}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-semibold",children:"Address"}),v.jsxs("p",{className:"text-gray-600",children:["123 Easy Street",v.jsx("br",{}),"San Francisco, CA 94105",v.jsx("br",{}),"United States"]})]})]})]})]})]})})})]});var gw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ik={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;a||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new bP;const f=s<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IP=function(t){const e=bk(t);return Ik.encodeByteArray(e,!0)},Ch=function(t){return IP(t).replace(/\./g,"")},NP=function(t){try{return Ik.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=()=>RP().__FIREBASE_DEFAULTS__,MP=()=>{if(typeof process>"u"||typeof gw>"u")return;const t=gw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NP(t[1]);return e&&JSON.parse(e)},Uy=()=>{try{return PP()||MP()||OP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DP=t=>{var e,n;return(n=(e=Uy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nk=t=>{const e=DP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rk=()=>{var t;return(t=Uy())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ch(JSON.stringify(n)),Ch(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jP(){var t;const e=(t=Uy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FP(){return!jP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BP(){try{return typeof indexedDB=="object"}catch{return!1}}function zP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="FirebaseError";class $s extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UP,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mk.prototype.create)}}class Mk{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$P(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new $s(i,l,r)}}function $P(t,e){return t.replace(HP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const HP=/\{\$([^}]+)}/g;function Km(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(yw(s)&&yw(o)){if(!Km(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){return t&&t._delegate?t._delegate:t}class Ko{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KP(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qP(t){return t===ss?void 0:t}function KP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const QP={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},JP=Te.INFO,YP={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},XP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ok{constructor(e){this.name=e,this._logLevel=JP,this._logHandler=XP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const ZP=(t,e)=>e.some(n=>t instanceof n);let vw,ww;function eM(){return vw||(vw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tM(){return ww||(ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dk=new WeakMap,Gm=new WeakMap,Vk=new WeakMap,pp=new WeakMap,$y=new WeakMap;function nM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ni(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dk.set(n,t)}).catch(()=>{}),$y.set(e,t),e}function rM(t){if(Gm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Gm.set(t,e)}let Qm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iM(t){Qm=t(Qm)}function sM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mp(this),e,...n);return Vk.set(r,e.sort?e.sort():[e]),Ni(r)}:tM().includes(t)?function(...e){return t.apply(mp(this),e),Ni(Dk.get(this))}:function(...e){return Ni(t.apply(mp(this),e))}}function oM(t){return typeof t=="function"?sM(t):(t instanceof IDBTransaction&&rM(t),ZP(t,eM())?new Proxy(t,Qm):t)}function Ni(t){if(t instanceof IDBRequest)return nM(t);if(pp.has(t))return pp.get(t);const e=oM(t);return e!==t&&(pp.set(t,e),$y.set(e,t)),e}const mp=t=>$y.get(t);function lM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ni(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Ni(o.result),a.oldVersion,a.newVersion,Ni(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const aM=["get","getKey","getAll","getAllKeys","count"],uM=["put","add","delete","clear"],gp=new Map;function xw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gp.get(e))return gp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aM.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return gp.set(e,s),s}iM(t=>({...t,get:(e,n,r)=>xw(e,n)||t.get(e,n,r),has:(e,n)=>!!xw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jm="@firebase/app",_w="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Ok("@firebase/app"),dM="@firebase/app-compat",fM="@firebase/analytics-compat",pM="@firebase/analytics",mM="@firebase/app-check-compat",gM="@firebase/app-check",yM="@firebase/auth",vM="@firebase/auth-compat",wM="@firebase/database",xM="@firebase/data-connect",_M="@firebase/database-compat",EM="@firebase/functions",TM="@firebase/functions-compat",kM="@firebase/installations",SM="@firebase/installations-compat",CM="@firebase/messaging",AM="@firebase/messaging-compat",bM="@firebase/performance",IM="@firebase/performance-compat",NM="@firebase/remote-config",RM="@firebase/remote-config-compat",PM="@firebase/storage",MM="@firebase/storage-compat",OM="@firebase/firestore",DM="@firebase/vertexai-preview",VM="@firebase/firestore-compat",LM="firebase",jM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",FM={[Jm]:"fire-core",[dM]:"fire-core-compat",[pM]:"fire-analytics",[fM]:"fire-analytics-compat",[gM]:"fire-app-check",[mM]:"fire-app-check-compat",[yM]:"fire-auth",[vM]:"fire-auth-compat",[wM]:"fire-rtdb",[xM]:"fire-data-connect",[_M]:"fire-rtdb-compat",[EM]:"fire-fn",[TM]:"fire-fn-compat",[kM]:"fire-iid",[SM]:"fire-iid-compat",[CM]:"fire-fcm",[AM]:"fire-fcm-compat",[bM]:"fire-perf",[IM]:"fire-perf-compat",[NM]:"fire-rc",[RM]:"fire-rc-compat",[PM]:"fire-gcs",[MM]:"fire-gcs-compat",[OM]:"fire-fst",[VM]:"fire-fst-compat",[DM]:"fire-vertex","fire-js":"fire-js",[LM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map,BM=new Map,Xm=new Map;function Ew(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ga(t){const e=t.name;if(Xm.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,t);for(const n of Ah.values())Ew(n,t);for(const n of BM.values())Ew(n,t);return!0}function Lk(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new Mk("app","Firebase",zM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=jM;function Fk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ym,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ri.create("bad-app-name",{appName:String(i)});if(n||(n=Rk()),!n)throw Ri.create("no-options");const s=Ah.get(i);if(s){if(Km(n,s.options)&&Km(r,s.config))return s;throw Ri.create("duplicate-app",{appName:i})}const o=new GP(i);for(const a of Xm.values())o.addComponent(a);const l=new UM(n,r,o);return Ah.set(i,l),l}function Bk(t=Ym){const e=Ah.get(t);if(!e&&t===Ym&&Rk())return Fk();if(!e)throw Ri.create("no-app",{appName:t});return e}function Pi(t,e,n){var r;let i=(r=FM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(l.join(" "));return}Ga(new Ko(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="firebase-heartbeat-database",HM=1,Qa="firebase-heartbeat-store";let yp=null;function zk(){return yp||(yp=lM($M,HM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ri.create("idb-open",{originalErrorMessage:t.message})})),yp}async function WM(t){try{const n=(await zk()).transaction(Qa),r=await n.objectStore(Qa).get(Uk(t));return await n.done,r}catch(e){if(e instanceof $s)Wr.warn(e.message);else{const n=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(n.message)}}}async function Tw(t,e){try{const r=(await zk()).transaction(Qa,"readwrite");await r.objectStore(Qa).put(e,Uk(t)),await r.done}catch(n){if(n instanceof $s)Wr.warn(n.message);else{const r=Ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wr.warn(r.message)}}}function Uk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=1024,KM=30*24*60*60*1e3;class GM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=KM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kw(),{heartbeatsToSend:r,unsentEntries:i}=QM(this._heartbeatsCache.heartbeats),s=Ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Wr.warn(n),""}}}function kw(){return new Date().toISOString().substring(0,10)}function QM(t,e=qM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BP()?zP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Sw(t){return Ch(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){Ga(new Ko("platform-logger",e=>new cM(e),"PRIVATE")),Ga(new Ko("heartbeat",e=>new GM(e),"PRIVATE")),Pi(Jm,_w,t),Pi(Jm,_w,"esm2017"),Pi("fire-js","")}YM("");var Cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,$k;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function S(){}S.prototype=E.prototype,A.D=E.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(I,P,R){for(var b=Array(arguments.length-2),we=2;we<arguments.length;we++)b[we-2]=arguments[we];return E.prototype[P].apply(I,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,E,S){S||(S=0);var I=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)I[P]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(P=0;16>P;++P)I[P]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=A.g[0],S=A.g[1],P=A.g[2];var R=A.g[3],b=E+(R^S&(P^R))+I[0]+3614090360&4294967295;E=S+(b<<7&4294967295|b>>>25),b=R+(P^E&(S^P))+I[1]+3905402710&4294967295,R=E+(b<<12&4294967295|b>>>20),b=P+(S^R&(E^S))+I[2]+606105819&4294967295,P=R+(b<<17&4294967295|b>>>15),b=S+(E^P&(R^E))+I[3]+3250441966&4294967295,S=P+(b<<22&4294967295|b>>>10),b=E+(R^S&(P^R))+I[4]+4118548399&4294967295,E=S+(b<<7&4294967295|b>>>25),b=R+(P^E&(S^P))+I[5]+1200080426&4294967295,R=E+(b<<12&4294967295|b>>>20),b=P+(S^R&(E^S))+I[6]+2821735955&4294967295,P=R+(b<<17&4294967295|b>>>15),b=S+(E^P&(R^E))+I[7]+4249261313&4294967295,S=P+(b<<22&4294967295|b>>>10),b=E+(R^S&(P^R))+I[8]+1770035416&4294967295,E=S+(b<<7&4294967295|b>>>25),b=R+(P^E&(S^P))+I[9]+2336552879&4294967295,R=E+(b<<12&4294967295|b>>>20),b=P+(S^R&(E^S))+I[10]+4294925233&4294967295,P=R+(b<<17&4294967295|b>>>15),b=S+(E^P&(R^E))+I[11]+2304563134&4294967295,S=P+(b<<22&4294967295|b>>>10),b=E+(R^S&(P^R))+I[12]+1804603682&4294967295,E=S+(b<<7&4294967295|b>>>25),b=R+(P^E&(S^P))+I[13]+4254626195&4294967295,R=E+(b<<12&4294967295|b>>>20),b=P+(S^R&(E^S))+I[14]+2792965006&4294967295,P=R+(b<<17&4294967295|b>>>15),b=S+(E^P&(R^E))+I[15]+1236535329&4294967295,S=P+(b<<22&4294967295|b>>>10),b=E+(P^R&(S^P))+I[1]+4129170786&4294967295,E=S+(b<<5&4294967295|b>>>27),b=R+(S^P&(E^S))+I[6]+3225465664&4294967295,R=E+(b<<9&4294967295|b>>>23),b=P+(E^S&(R^E))+I[11]+643717713&4294967295,P=R+(b<<14&4294967295|b>>>18),b=S+(R^E&(P^R))+I[0]+3921069994&4294967295,S=P+(b<<20&4294967295|b>>>12),b=E+(P^R&(S^P))+I[5]+3593408605&4294967295,E=S+(b<<5&4294967295|b>>>27),b=R+(S^P&(E^S))+I[10]+38016083&4294967295,R=E+(b<<9&4294967295|b>>>23),b=P+(E^S&(R^E))+I[15]+3634488961&4294967295,P=R+(b<<14&4294967295|b>>>18),b=S+(R^E&(P^R))+I[4]+3889429448&4294967295,S=P+(b<<20&4294967295|b>>>12),b=E+(P^R&(S^P))+I[9]+568446438&4294967295,E=S+(b<<5&4294967295|b>>>27),b=R+(S^P&(E^S))+I[14]+3275163606&4294967295,R=E+(b<<9&4294967295|b>>>23),b=P+(E^S&(R^E))+I[3]+4107603335&4294967295,P=R+(b<<14&4294967295|b>>>18),b=S+(R^E&(P^R))+I[8]+1163531501&4294967295,S=P+(b<<20&4294967295|b>>>12),b=E+(P^R&(S^P))+I[13]+2850285829&4294967295,E=S+(b<<5&4294967295|b>>>27),b=R+(S^P&(E^S))+I[2]+4243563512&4294967295,R=E+(b<<9&4294967295|b>>>23),b=P+(E^S&(R^E))+I[7]+1735328473&4294967295,P=R+(b<<14&4294967295|b>>>18),b=S+(R^E&(P^R))+I[12]+2368359562&4294967295,S=P+(b<<20&4294967295|b>>>12),b=E+(S^P^R)+I[5]+4294588738&4294967295,E=S+(b<<4&4294967295|b>>>28),b=R+(E^S^P)+I[8]+2272392833&4294967295,R=E+(b<<11&4294967295|b>>>21),b=P+(R^E^S)+I[11]+1839030562&4294967295,P=R+(b<<16&4294967295|b>>>16),b=S+(P^R^E)+I[14]+4259657740&4294967295,S=P+(b<<23&4294967295|b>>>9),b=E+(S^P^R)+I[1]+2763975236&4294967295,E=S+(b<<4&4294967295|b>>>28),b=R+(E^S^P)+I[4]+1272893353&4294967295,R=E+(b<<11&4294967295|b>>>21),b=P+(R^E^S)+I[7]+4139469664&4294967295,P=R+(b<<16&4294967295|b>>>16),b=S+(P^R^E)+I[10]+3200236656&4294967295,S=P+(b<<23&4294967295|b>>>9),b=E+(S^P^R)+I[13]+681279174&4294967295,E=S+(b<<4&4294967295|b>>>28),b=R+(E^S^P)+I[0]+3936430074&4294967295,R=E+(b<<11&4294967295|b>>>21),b=P+(R^E^S)+I[3]+3572445317&4294967295,P=R+(b<<16&4294967295|b>>>16),b=S+(P^R^E)+I[6]+76029189&4294967295,S=P+(b<<23&4294967295|b>>>9),b=E+(S^P^R)+I[9]+3654602809&4294967295,E=S+(b<<4&4294967295|b>>>28),b=R+(E^S^P)+I[12]+3873151461&4294967295,R=E+(b<<11&4294967295|b>>>21),b=P+(R^E^S)+I[15]+530742520&4294967295,P=R+(b<<16&4294967295|b>>>16),b=S+(P^R^E)+I[2]+3299628645&4294967295,S=P+(b<<23&4294967295|b>>>9),b=E+(P^(S|~R))+I[0]+4096336452&4294967295,E=S+(b<<6&4294967295|b>>>26),b=R+(S^(E|~P))+I[7]+1126891415&4294967295,R=E+(b<<10&4294967295|b>>>22),b=P+(E^(R|~S))+I[14]+2878612391&4294967295,P=R+(b<<15&4294967295|b>>>17),b=S+(R^(P|~E))+I[5]+4237533241&4294967295,S=P+(b<<21&4294967295|b>>>11),b=E+(P^(S|~R))+I[12]+1700485571&4294967295,E=S+(b<<6&4294967295|b>>>26),b=R+(S^(E|~P))+I[3]+2399980690&4294967295,R=E+(b<<10&4294967295|b>>>22),b=P+(E^(R|~S))+I[10]+4293915773&4294967295,P=R+(b<<15&4294967295|b>>>17),b=S+(R^(P|~E))+I[1]+2240044497&4294967295,S=P+(b<<21&4294967295|b>>>11),b=E+(P^(S|~R))+I[8]+1873313359&4294967295,E=S+(b<<6&4294967295|b>>>26),b=R+(S^(E|~P))+I[15]+4264355552&4294967295,R=E+(b<<10&4294967295|b>>>22),b=P+(E^(R|~S))+I[6]+2734768916&4294967295,P=R+(b<<15&4294967295|b>>>17),b=S+(R^(P|~E))+I[13]+1309151649&4294967295,S=P+(b<<21&4294967295|b>>>11),b=E+(P^(S|~R))+I[4]+4149444226&4294967295,E=S+(b<<6&4294967295|b>>>26),b=R+(S^(E|~P))+I[11]+3174756917&4294967295,R=E+(b<<10&4294967295|b>>>22),b=P+(E^(R|~S))+I[2]+718787259&4294967295,P=R+(b<<15&4294967295|b>>>17),b=S+(R^(P|~E))+I[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+R&4294967295}r.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var S=E-this.blockSize,I=this.B,P=this.h,R=0;R<E;){if(P==0)for(;R<=S;)i(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<E;)if(I[P++]=A.charCodeAt(R++),P==this.blockSize){i(this,I),P=0;break}}else for(;R<E;)if(I[P++]=A[R++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=E},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var S=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=S&255,S/=256;for(this.u(A),A=Array(16),E=S=0;4>E;++E)for(var I=0;32>I;I+=8)A[S++]=this.g[E]>>>I&255;return A};function s(A,E){var S=l;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=E(A)}function o(A,E){this.h=E;for(var S=[],I=!0,P=A.length-1;0<=P;P--){var R=A[P]|0;I&&R==E||(S[P]=R,I=!1)}this.g=S}var l={};function a(A){return-128<=A&&128>A?s(A,function(E){return new o([E|0],0>E?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return T(u(-A));for(var E=[],S=1,I=0;A>=S;I++)E[I]=A/S|0,S*=4294967296;return new o(E,0)}function h(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return T(h(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),I=d,P=0;P<A.length;P+=8){var R=Math.min(8,A.length-P),b=parseInt(A.substring(P,P+R),E);8>R?(R=u(Math.pow(E,R)),I=I.j(R).add(u(b))):(I=I.j(S),I=I.add(u(b)))}return I}var d=a(0),f=a(1),m=a(16777216);t=o.prototype,t.m=function(){if(_(this))return-T(this).m();for(var A=0,E=1,S=0;S<this.g.length;S++){var I=this.i(S);A+=(0<=I?I:4294967296+I)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(g(this))return"0";if(_(this))return"-"+T(this).toString(A);for(var E=u(Math.pow(A,6)),S=this,I="";;){var P=M(S,E).g;S=w(S,P.j(E));var R=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=P,g(S))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function g(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function _(A){return A.h==-1}t.l=function(A){return A=w(this,A),_(A)?-1:g(A)?0:1};function T(A){for(var E=A.g.length,S=[],I=0;I<E;I++)S[I]=~A.g[I];return new o(S,~A.h).add(f)}t.abs=function(){return _(this)?T(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],I=0,P=0;P<=E;P++){var R=I+(this.i(P)&65535)+(A.i(P)&65535),b=(R>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);I=b>>>16,R&=65535,b&=65535,S[P]=b<<16|R}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(A,E){return A.add(T(E))}t.j=function(A){if(g(this)||g(A))return d;if(_(this))return _(A)?T(this).j(T(A)):T(T(this).j(A));if(_(A))return T(this.j(T(A)));if(0>this.l(m)&&0>A.l(m))return u(this.m()*A.m());for(var E=this.g.length+A.g.length,S=[],I=0;I<2*E;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<A.g.length;P++){var R=this.i(I)>>>16,b=this.i(I)&65535,we=A.i(P)>>>16,Pe=A.i(P)&65535;S[2*I+2*P]+=b*Pe,x(S,2*I+2*P),S[2*I+2*P+1]+=R*Pe,x(S,2*I+2*P+1),S[2*I+2*P+1]+=b*we,x(S,2*I+2*P+1),S[2*I+2*P+2]+=R*we,x(S,2*I+2*P+2)}for(I=0;I<E;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=E;I<2*E;I++)S[I]=0;return new o(S,0)};function x(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function C(A,E){this.g=A,this.h=E}function M(A,E){if(g(E))throw Error("division by zero");if(g(A))return new C(d,d);if(_(A))return E=M(T(A),E),new C(T(E.g),T(E.h));if(_(E))return E=M(A,T(E)),new C(T(E.g),E.h);if(30<A.g.length){if(_(A)||_(E))throw Error("slowDivide_ only works with positive integers.");for(var S=f,I=E;0>=I.l(A);)S=L(S),I=L(I);var P=V(S,1),R=V(I,1);for(I=V(I,2),S=V(S,2);!g(I);){var b=R.add(I);0>=b.l(A)&&(P=P.add(S),R=b),I=V(I,1),S=V(S,1)}return E=w(A,P.j(E)),new C(P,E)}for(P=d;0<=A.l(E);){for(S=Math.max(1,Math.floor(A.m()/E.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=u(S),b=R.j(E);_(b)||0<b.l(A);)S-=I,R=u(S),b=R.j(E);g(R)&&(R=f),P=P.add(R),A=w(A,b)}return new C(P,A)}t.A=function(A){return M(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)&A.i(I);return new o(S,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)|A.i(I);return new o(S,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)^A.i(I);return new o(S,this.h^A.h)};function L(A){for(var E=A.g.length+1,S=[],I=0;I<E;I++)S[I]=A.i(I)<<1|A.i(I-1)>>>31;return new o(S,A.h)}function V(A,E){var S=E>>5;E%=32;for(var I=A.g.length-S,P=[],R=0;R<I;R++)P[R]=0<E?A.i(R+S)>>>E|A.i(R+S+1)<<32-E:A.i(R+S);return new o(P,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$k=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,xs=o}).apply(typeof Cw<"u"?Cw:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hk,Zl,Wk,Bc,Zm,qk,Kk,Gk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var y=r;c=c.split(".");for(var k=0;k<c.length-1;k++){var O=c[k];if(!(O in y))break e;y=y[O]}c=c[c.length-1],k=y[c],p=p(k),p!=k&&p!=null&&e(y,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var y=0,k=!1,O={next:function(){if(!k&&y<c.length){var j=y++;return{value:p(j,c[j]),done:!1}}return k=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function a(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,y){return c.call.apply(c.bind,arguments)}function d(c,p,y){if(!c)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,k),c.apply(p,O)}}return function(){return c.apply(p,arguments)}}function f(c,p,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var k=y.slice();return k.push.apply(k,arguments),c.apply(this,k)}}function g(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(k,O,j){for(var K=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)K[Me-2]=arguments[Me];return p.prototype[O].apply(k,K)}}function _(c){const p=c.length;if(0<p){const y=Array(p);for(let k=0;k<p;k++)y[k]=c[k];return y}return[]}function T(c,p){for(let y=1;y<arguments.length;y++){const k=arguments[y];if(a(k)){const O=c.length||0,j=k.length||0;c.length=O+j;for(let K=0;K<j;K++)c[O+K]=k[K]}else c.push(k)}}class w{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(c){return/^[\s\xa0]*$/.test(c)}function C(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function M(c){return M[" "](c),c}M[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function V(c,p,y){for(const k in c)p.call(y,c[k],k,c)}function A(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function E(c){const p={};for(const y in c)p[y]=c[y];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,p){let y,k;for(let O=1;O<arguments.length;O++){k=arguments[O];for(y in k)c[y]=k[y];for(let j=0;j<S.length;j++)y=S[j],Object.prototype.hasOwnProperty.call(k,y)&&(c[y]=k[y])}}function P(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function R(c){l.setTimeout(()=>{throw c},0)}function b(){var c=oe;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class we{constructor(){this.h=this.g=null}add(p,y){const k=Pe.get();k.set(p,y),this.h?this.h.next=k:this.g=k,this.h=k}}var Pe=new w(()=>new Qe,c=>c.reset());class Qe{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let be,q=!1,oe=new we,le=()=>{const c=l.Promise.resolve(void 0);be=()=>{c.then(De)}};var De=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(y){R(y)}var p=Pe;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}q=!1};function Ae(){this.s=this.s,this.C=this.C}Ae.prototype.s=!1,Ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var bn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};l.addEventListener("test",y,p),l.removeEventListener("test",y,p)}catch{}return c}();function Wn(c,p){if($e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,k=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(L){e:{try{M(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:mn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Wn.aa.h.call(this)}}g(Wn,$e);var mn={2:"touch",3:"pen",4:"mouse"};Wn.prototype.h=function(){Wn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var In="closure_listenable_"+(1e6*Math.random()|0),xl=0;function Iu(c,p,y,k,O){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!k,this.ha=O,this.key=++xl,this.da=this.fa=!1}function Gs(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Yi(c){this.src=c,this.g={},this.h=0}Yi.prototype.add=function(c,p,y,k,O){var j=c.toString();c=this.g[j],c||(c=this.g[j]=[],this.h++);var K=Qs(c,p,k,O);return-1<K?(p=c[K],y||(p.fa=!1)):(p=new Iu(p,this.src,j,!!k,O),p.fa=y,c.push(p)),p};function _l(c,p){var y=p.type;if(y in c.g){var k=c.g[y],O=Array.prototype.indexOf.call(k,p,void 0),j;(j=0<=O)&&Array.prototype.splice.call(k,O,1),j&&(Gs(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Qs(c,p,y,k){for(var O=0;O<c.length;++O){var j=c[O];if(!j.da&&j.listener==p&&j.capture==!!y&&j.ha==k)return O}return-1}var Js="closure_lm_"+(1e6*Math.random()|0),Nu={};function Sf(c,p,y,k,O){if(Array.isArray(p)){for(var j=0;j<p.length;j++)Sf(c,p[j],y,k,O);return null}return y=de(y),c&&c[In]?c.K(p,y,u(k)?!!k.capture:!!k,O):lv(c,p,y,!1,k,O)}function lv(c,p,y,k,O,j){if(!p)throw Error("Invalid event type");var K=u(O)?!!O.capture:!!O,Me=W(c);if(Me||(c[Js]=Me=new Yi(c)),y=Me.add(p,y,k,K,j),y.proxy)return y;if(k=N(),y.proxy=k,k.src=c,k.listener=y,c.addEventListener)bn||(O=K),O===void 0&&(O=!1),c.addEventListener(p.toString(),k,O);else if(c.attachEvent)c.attachEvent(J(p.toString()),k);else if(c.addListener&&c.removeListener)c.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return y}function N(){function c(y){return p.call(c.src,c.listener,y)}const p=Q;return c}function D(c,p,y,k,O){if(Array.isArray(p))for(var j=0;j<p.length;j++)D(c,p[j],y,k,O);else k=u(k)?!!k.capture:!!k,y=de(y),c&&c[In]?(c=c.i,p=String(p).toString(),p in c.g&&(j=c.g[p],y=Qs(j,y,k,O),-1<y&&(Gs(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete c.g[p],c.h--)))):c&&(c=W(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Qs(p,y,k,O)),(y=-1<c?p[c]:null)&&F(y))}function F(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[In])_l(p.i,c);else{var y=c.type,k=c.proxy;p.removeEventListener?p.removeEventListener(y,k,c.capture):p.detachEvent?p.detachEvent(J(y),k):p.addListener&&p.removeListener&&p.removeListener(k),(y=W(p))?(_l(y,c),y.h==0&&(y.src=null,p[Js]=null)):Gs(c)}}}function J(c){return c in Nu?Nu[c]:Nu[c]="on"+c}function Q(c,p){if(c.da)c=!0;else{p=new Wn(p,this);var y=c.listener,k=c.ha||c.src;c.fa&&F(c),c=y.call(k,p)}return c}function W(c){return c=c[Js],c instanceof Yi?c:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(c){return typeof c=="function"?c:(c[re]||(c[re]=function(p){return c.handleEvent(p)}),c[re])}function xe(){Ae.call(this),this.i=new Yi(this),this.M=this,this.F=null}g(xe,Ae),xe.prototype[In]=!0,xe.prototype.removeEventListener=function(c,p,y,k){D(this,c,p,y,k)};function _e(c,p){var y,k=c.F;if(k)for(y=[];k;k=k.F)y.push(k);if(c=c.M,k=p.type||p,typeof p=="string")p=new $e(p,c);else if(p instanceof $e)p.target=p.target||c;else{var O=p;p=new $e(k,c),I(p,O)}if(O=!0,y)for(var j=y.length-1;0<=j;j--){var K=p.g=y[j];O=Nn(K,k,!0,p)&&O}if(K=p.g=c,O=Nn(K,k,!0,p)&&O,O=Nn(K,k,!1,p)&&O,y)for(j=0;j<y.length;j++)K=p.g=y[j],O=Nn(K,k,!1,p)&&O}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],k=0;k<y.length;k++)Gs(y[k]);delete c.g[p],c.h--}}this.F=null},xe.prototype.K=function(c,p,y,k){return this.i.add(String(c),p,!1,y,k)},xe.prototype.L=function(c,p,y,k){return this.i.add(String(c),p,!0,y,k)};function Nn(c,p,y,k){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,j=0;j<p.length;++j){var K=p[j];if(K&&!K.da&&K.capture==y){var Me=K.listener,kt=K.ha||K.src;K.fa&&_l(c.i,K),O=Me.call(kt,k)!==!1&&O}}return O&&!k.defaultPrevented}function Ru(c,p,y){if(typeof c=="function")y&&(c=f(c,y));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:l.setTimeout(c,p||0)}function Ys(c){c.g=Ru(()=>{c.g=null,c.i&&(c.i=!1,Ys(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class El extends Ae{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ys(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(c){Ae.call(this),this.h=c,this.g={}}g(Xi,Ae);var Tl=[];function Pu(c){V(c.g,function(p,y){this.g.hasOwnProperty(y)&&F(p)},c),c.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),Pu(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xs=l.JSON.stringify,Vb=l.JSON.parse,Lb=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Cf(){}Cf.prototype.h=null;function av(c){return c.h||(c.h=c.i())}function uv(){}var kl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Af(){$e.call(this,"d")}g(Af,$e);function bf(){$e.call(this,"c")}g(bf,$e);var Zi={},cv=null;function Mu(){return cv=cv||new xe}Zi.La="serverreachability";function hv(c){$e.call(this,Zi.La,c)}g(hv,$e);function Sl(c){const p=Mu();_e(p,new hv(p))}Zi.STAT_EVENT="statevent";function dv(c,p){$e.call(this,Zi.STAT_EVENT,c),this.stat=p}g(dv,$e);function Gt(c){const p=Mu();_e(p,new dv(p,c))}Zi.Ma="timingevent";function fv(c,p){$e.call(this,Zi.Ma,c),this.size=p}g(fv,$e);function Cl(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},p)}function Al(){this.g=!0}Al.prototype.xa=function(){this.g=!1};function jb(c,p,y,k,O,j){c.info(function(){if(c.g)if(j)for(var K="",Me=j.split("&"),kt=0;kt<Me.length;kt++){var Se=Me[kt].split("=");if(1<Se.length){var Vt=Se[0];Se=Se[1];var Lt=Vt.split("_");K=2<=Lt.length&&Lt[1]=="type"?K+(Vt+"="+Se+"&"):K+(Vt+"=redacted&")}}else K=null;else K=j;return"XMLHTTP REQ ("+k+") [attempt "+O+"]: "+p+`
`+y+`
`+K})}function Fb(c,p,y,k,O,j,K){c.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+O+"]: "+p+`
`+y+`
`+j+" "+K})}function Zs(c,p,y,k){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+zb(c,y)+(k?" "+k:"")})}function Bb(c,p){c.info(function(){return"TIMEOUT: "+p})}Al.prototype.info=function(){};function zb(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var k=y[c];if(!(2>k.length)){var O=k[1];if(Array.isArray(O)&&!(1>O.length)){var j=O[0];if(j!="noop"&&j!="stop"&&j!="close")for(var K=1;K<O.length;K++)O[K]=""}}}}return Xs(y)}catch{return p}}var Ou={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},If;function Du(){}g(Du,Cf),Du.prototype.g=function(){return new XMLHttpRequest},Du.prototype.i=function(){return{}},If=new Du;function Yr(c,p,y,k){this.j=c,this.i=p,this.l=y,this.R=k||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mv}function mv(){this.i=null,this.g="",this.h=!1}var gv={},Nf={};function Rf(c,p,y){c.L=1,c.v=Fu(Cr(p)),c.m=y,c.P=!0,yv(c,null)}function yv(c,p){c.F=Date.now(),Vu(c),c.A=Cr(c.v);var y=c.A,k=c.R;Array.isArray(k)||(k=[String(k)]),Rv(y.i,"t",k),c.C=0,y=c.j.J,c.h=new mv,c.g=Qv(c.j,y?p:null,!c.m),0<c.O&&(c.M=new El(f(c.Y,c,c.g),c.O)),p=c.U,y=c.g,k=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(Tl[0]=O.toString()),O=Tl);for(var j=0;j<O.length;j++){var K=Sf(y,O[j],k||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Sl(),jb(c.i,c.u,c.A,c.l,c.R,c.m)}Yr.prototype.ca=function(c){c=c.target;const p=this.M;p&&Ar(c)==3?p.j():this.Y(c)},Yr.prototype.Y=function(c){try{if(c==this.g)e:{const Lt=Ar(this.g);var p=this.g.Ba();const no=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||jv(this.g)))){this.J||Lt!=4||p==7||(p==8||0>=no?Sl(3):Sl(2)),Pf(this);var y=this.g.Z();this.X=y;t:if(vv(this)){var k=jv(this.g);c="";var O=k.length,j=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){es(this),bl(this);var K="";break t}this.h.i=new l.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,c+=this.h.i.decode(k[p],{stream:!(j&&p==O-1)});k.length=0,this.h.g+=c,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=y==200,Fb(this.i,this.u,this.A,this.l,this.R,Lt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,kt=this.g;if((Me=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Me)){var Se=Me;break t}}Se=null}if(y=Se)Zs(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mf(this,y);else{this.o=!1,this.s=3,Gt(12),es(this),bl(this);break e}}if(this.P){y=!0;let qn;for(;!this.J&&this.C<K.length;)if(qn=Ub(this,K),qn==Nf){Lt==4&&(this.s=4,Gt(14),y=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==gv){this.s=4,Gt(15),Zs(this.i,this.l,K,"[Invalid Chunk]"),y=!1;break}else Zs(this.i,this.l,qn,null),Mf(this,qn);if(vv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||K.length!=0||this.h.h||(this.s=1,Gt(16),y=!1),this.o=this.o&&y,!y)Zs(this.i,this.l,K,"[Invalid Chunked Response]"),es(this),bl(this);else if(0<K.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Ff(Vt),Vt.M=!0,Gt(11))}}else Zs(this.i,this.l,K,null),Mf(this,K);Lt==4&&es(this),this.o&&!this.J&&(Lt==4?Wv(this.j,this):(this.o=!1,Vu(this)))}else sI(this.g),y==400&&0<K.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),es(this),bl(this)}}}catch{}finally{}};function vv(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ub(c,p){var y=c.C,k=p.indexOf(`
`,y);return k==-1?Nf:(y=Number(p.substring(y,k)),isNaN(y)?gv:(k+=1,k+y>p.length?Nf:(p=p.slice(k,k+y),c.C=k+y,p)))}Yr.prototype.cancel=function(){this.J=!0,es(this)};function Vu(c){c.S=Date.now()+c.I,wv(c,c.I)}function wv(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Cl(f(c.ba,c),p)}function Pf(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Yr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Bb(this.i,this.A),this.L!=2&&(Sl(),Gt(17)),es(this),this.s=2,bl(this)):wv(this,this.S-c)};function bl(c){c.j.G==0||c.J||Wv(c.j,c)}function es(c){Pf(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Pu(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Mf(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||Of(y.h,c))){if(!c.K&&Of(y.h,c)&&y.G==3){try{var k=y.Da.g.parse(p)}catch{k=null}if(Array.isArray(k)&&k.length==3){var O=k;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Wu(y),$u(y);else break e;jf(y),Gt(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=Cl(f(y.Za,y),6e3));if(1>=Ev(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ns(y,11)}else if((c.K||y.g==c)&&Wu(y),!x(p))for(O=y.Da.g.parse(p),p=0;p<O.length;p++){let Se=O[p];if(y.T=Se[0],Se=Se[1],y.G==2)if(Se[0]=="c"){y.K=Se[1],y.ia=Se[2];const Vt=Se[3];Vt!=null&&(y.la=Vt,y.j.info("VER="+y.la));const Lt=Se[4];Lt!=null&&(y.Aa=Lt,y.j.info("SVER="+y.Aa));const no=Se[5];no!=null&&typeof no=="number"&&0<no&&(k=1.5*no,y.L=k,y.j.info("backChannelRequestTimeoutMs_="+k)),k=y;const qn=c.g;if(qn){const Ku=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ku){var j=k.h;j.g||Ku.indexOf("spdy")==-1&&Ku.indexOf("quic")==-1&&Ku.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Df(j,j.h),j.h=null))}if(k.D){const Bf=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bf&&(k.ya=Bf,Le(k.I,k.D,Bf))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),k=y;var K=c;if(k.qa=Gv(k,k.J?k.ia:null,k.W),K.K){Tv(k.h,K);var Me=K,kt=k.L;kt&&(Me.I=kt),Me.B&&(Pf(Me),Vu(Me)),k.g=K}else $v(k);0<y.i.length&&Hu(y)}else Se[0]!="stop"&&Se[0]!="close"||ns(y,7);else y.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?ns(y,7):Lf(y):Se[0]!="noop"&&y.l&&y.l.ta(Se),y.v=0)}}Sl(4)}catch{}}var $b=class{constructor(c,p){this.g=c,this.map=p}};function xv(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _v(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ev(c){return c.h?1:c.g?c.g.size:0}function Of(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Df(c,p){c.g?c.g.add(p):c.h=p}function Tv(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}xv.prototype.cancel=function(){if(this.i=kv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function kv(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return _(c.i)}function Hb(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(a(c)){for(var p=[],y=c.length,k=0;k<y;k++)p.push(c[k]);return p}p=[],y=0;for(k in c)p[y++]=c[k];return p}function Wb(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(a(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const k in c)p[y++]=k;return p}}}function Sv(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(a(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=Wb(c),k=Hb(c),O=k.length,j=0;j<O;j++)p.call(void 0,k[j],y&&y[j],c)}var Cv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qb(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var k=c[y].indexOf("="),O=null;if(0<=k){var j=c[y].substring(0,k);O=c[y].substring(k+1)}else j=c[y];p(j,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ts(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ts){this.h=c.h,Lu(this,c.j),this.o=c.o,this.g=c.g,ju(this,c.s),this.l=c.l;var p=c.i,y=new Rl;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Av(this,y),this.m=c.m}else c&&(p=String(c).match(Cv))?(this.h=!1,Lu(this,p[1]||"",!0),this.o=Il(p[2]||""),this.g=Il(p[3]||"",!0),ju(this,p[4]),this.l=Il(p[5]||"",!0),Av(this,p[6]||"",!0),this.m=Il(p[7]||"")):(this.h=!1,this.i=new Rl(null,this.h))}ts.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Nl(p,bv,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Nl(p,bv,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Nl(y,y.charAt(0)=="/"?Qb:Gb,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Nl(y,Yb)),c.join("")};function Cr(c){return new ts(c)}function Lu(c,p,y){c.j=y?Il(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function ju(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Av(c,p,y){p instanceof Rl?(c.i=p,Xb(c.i,c.h)):(y||(p=Nl(p,Jb)),c.i=new Rl(p,c.h))}function Le(c,p,y){c.i.set(p,y)}function Fu(c){return Le(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Il(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Nl(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Kb),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Kb(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bv=/[#\/\?@]/g,Gb=/[#\?:]/g,Qb=/[#\?]/g,Jb=/[#\?@]/g,Yb=/#/g;function Rl(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Xr(c){c.g||(c.g=new Map,c.h=0,c.i&&qb(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=Rl.prototype,t.add=function(c,p){Xr(this),this.i=null,c=eo(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function Iv(c,p){Xr(c),p=eo(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Nv(c,p){return Xr(c),p=eo(c,p),c.g.has(p)}t.forEach=function(c,p){Xr(this),this.g.forEach(function(y,k){y.forEach(function(O){c.call(p,O,k,this)},this)},this)},t.na=function(){Xr(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let k=0;k<p.length;k++){const O=c[k];for(let j=0;j<O.length;j++)y.push(p[k])}return y},t.V=function(c){Xr(this);let p=[];if(typeof c=="string")Nv(this,c)&&(p=p.concat(this.g.get(eo(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},t.set=function(c,p){return Xr(this),this.i=null,c=eo(this,c),Nv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Rv(c,p,y){Iv(c,p),0<y.length&&(c.i=null,c.g.set(eo(c,p),_(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var k=p[y];const j=encodeURIComponent(String(k)),K=this.V(k);for(k=0;k<K.length;k++){var O=j;K[k]!==""&&(O+="="+encodeURIComponent(String(K[k]))),c.push(O)}}return this.i=c.join("&")};function eo(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Xb(c,p){p&&!c.j&&(Xr(c),c.i=null,c.g.forEach(function(y,k){var O=k.toLowerCase();k!=O&&(Iv(this,k),Rv(this,O,y))},c)),c.j=p}function Zb(c,p){const y=new Al;if(l.Image){const k=new Image;k.onload=m(Zr,y,"TestLoadImage: loaded",!0,p,k),k.onerror=m(Zr,y,"TestLoadImage: error",!1,p,k),k.onabort=m(Zr,y,"TestLoadImage: abort",!1,p,k),k.ontimeout=m(Zr,y,"TestLoadImage: timeout",!1,p,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=c}else p(!1)}function eI(c,p){const y=new Al,k=new AbortController,O=setTimeout(()=>{k.abort(),Zr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:k.signal}).then(j=>{clearTimeout(O),j.ok?Zr(y,"TestPingServer: ok",!0,p):Zr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Zr(y,"TestPingServer: error",!1,p)})}function Zr(c,p,y,k,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),k(y)}catch{}}function tI(){this.g=new Lb}function nI(c,p,y){const k=y||"";try{Sv(c,function(O,j){let K=O;u(O)&&(K=Xs(O)),p.push(k+j+"="+encodeURIComponent(K))})}catch(O){throw p.push(k+"type="+encodeURIComponent("_badmap")),O}}function Bu(c){this.l=c.Ub||null,this.j=c.eb||!1}g(Bu,Cf),Bu.prototype.g=function(){return new zu(this.l,this.j)},Bu.prototype.i=function(c){return function(){return c}}({});function zu(c,p){xe.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(zu,xe),t=zu.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ml(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||l).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ml(this)),this.g&&(this.readyState=3,Ml(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pv(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pv(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Pl(this):Ml(this),this.readyState==3&&Pv(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Pl(this))},t.Qa=function(c){this.g&&(this.response=c,Pl(this))},t.ga=function(){this.g&&Pl(this)};function Pl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ml(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function Ml(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mv(c){let p="";return V(c,function(y,k){p+=k,p+=":",p+=y,p+=`\r
`}),p}function Vf(c,p,y){e:{for(k in y){var k=!1;break e}k=!0}k||(y=Mv(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Le(c,p,y))}function Je(c){xe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Je,xe);var rI=/^https?$/i,iI=["POST","PUT"];t=Je.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,y,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():If.g(),this.v=this.o?av(this.o):av(If),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(j){Ov(this,j);return}if(c=y||"",y=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var O in k)y.set(O,k[O]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const j of k.keys())y.set(j,k.get(j));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(iI,p,void 0))||k||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,K]of y)this.g.setRequestHeader(j,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lv(this),this.u=!0,this.g.send(c),this.u=!1}catch(j){Ov(this,j)}};function Ov(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Dv(c),Uu(c)}function Dv(c){c.A||(c.A=!0,_e(c,"complete"),_e(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_e(this,"complete"),_e(this,"abort"),Uu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uu(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vv(this):this.bb())},t.bb=function(){Vv(this)};function Vv(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ar(c)!=4||c.Z()!=2)){if(c.u&&Ar(c)==4)Ru(c.Ea,0,c);else if(_e(c,"readystatechange"),Ar(c)==4){c.h=!1;try{const K=c.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var k;if(k=K===0){var O=String(c.D).match(Cv)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),k=!rI.test(O?O.toLowerCase():"")}y=k}if(y)_e(c,"complete"),_e(c,"success");else{c.m=6;try{var j=2<Ar(c)?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.Z()+"]",Dv(c)}}finally{Uu(c)}}}}function Uu(c,p){if(c.g){Lv(c);const y=c.g,k=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||_e(c,"ready");try{y.onreadystatechange=k}catch{}}}function Lv(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ar(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Vb(p)}};function jv(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function sI(c){const p={};c=(c.g&&2<=Ar(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<c.length;k++){if(x(c[k]))continue;var y=P(c[k]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=p[O]||[];p[O]=j,j.push(y)}A(p,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ol(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function Fv(c){this.Aa=0,this.i=[],this.j=new Al,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ol("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ol("baseRetryDelayMs",5e3,c),this.cb=Ol("retryDelaySeedMs",1e4,c),this.Wa=Ol("forwardChannelMaxRetries",2,c),this.wa=Ol("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xv(c&&c.concurrentRequestLimit),this.Da=new tI,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fv.prototype,t.la=8,t.G=1,t.connect=function(c,p,y,k){Gt(0),this.W=c,this.H=p||{},y&&k!==void 0&&(this.H.OSID=y,this.H.OAID=k),this.F=this.X,this.I=Gv(this,null,this.W),Hu(this)};function Lf(c){if(Bv(c),c.G==3){var p=c.U++,y=Cr(c.I);if(Le(y,"SID",c.K),Le(y,"RID",p),Le(y,"TYPE","terminate"),Dl(c,y),p=new Yr(c,c.j,p),p.L=2,p.v=Fu(Cr(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=p.v,y=!0),y||(p.g=Qv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Vu(p)}Kv(c)}function $u(c){c.g&&(Ff(c),c.g.cancel(),c.g=null)}function Bv(c){$u(c),c.u&&(l.clearTimeout(c.u),c.u=null),Wu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Hu(c){if(!_v(c.h)&&!c.s){c.s=!0;var p=c.Ga;be||le(),q||(be(),q=!0),oe.add(p,c),c.B=0}}function oI(c,p){return Ev(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Cl(f(c.Ga,c,p),qv(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new Yr(this,this.j,c);let j=this.o;if(this.S&&(j?(j=E(j),I(j,this.S)):j=this.S),this.m!==null||this.O||(O.H=j,j=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var k=this.i[y];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(p+=k,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Uv(this,O,p),y=Cr(this.I),Le(y,"RID",c),Le(y,"CVER",22),this.D&&Le(y,"X-HTTP-Session-Id",this.D),Dl(this,y),j&&(this.O?p="headers="+encodeURIComponent(String(Mv(j)))+"&"+p:this.m&&Vf(y,this.m,j)),Df(this.h,O),this.Ua&&Le(y,"TYPE","init"),this.P?(Le(y,"$req",p),Le(y,"SID","null"),O.T=!0,Rf(O,y,null)):Rf(O,y,p),this.G=2}}else this.G==3&&(c?zv(this,c):this.i.length==0||_v(this.h)||zv(this))};function zv(c,p){var y;p?y=p.l:y=c.U++;const k=Cr(c.I);Le(k,"SID",c.K),Le(k,"RID",y),Le(k,"AID",c.T),Dl(c,k),c.m&&c.o&&Vf(k,c.m,c.o),y=new Yr(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Uv(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Df(c.h,y),Rf(y,k,p)}function Dl(c,p){c.H&&V(c.H,function(y,k){Le(p,k,y)}),c.l&&Sv({},function(y,k){Le(p,k,y)})}function Uv(c,p,y){y=Math.min(c.i.length,y);var k=c.l?f(c.l.Na,c.l,c):null;e:{var O=c.i;let j=-1;for(;;){const K=["count="+y];j==-1?0<y?(j=O[0].g,K.push("ofs="+j)):j=0:K.push("ofs="+j);let Me=!0;for(let kt=0;kt<y;kt++){let Se=O[kt].g;const Vt=O[kt].map;if(Se-=j,0>Se)j=Math.max(0,O[kt].g-100),Me=!1;else try{nI(Vt,K,"req"+Se+"_")}catch{k&&k(Vt)}}if(Me){k=K.join("&");break e}}}return c=c.i.splice(0,y),p.D=c,k}function $v(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;be||le(),q||(be(),q=!0),oe.add(p,c),c.v=0}}function jf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Cl(f(c.Fa,c),qv(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Hv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Cl(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),$u(this),Hv(this))};function Ff(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Hv(c){c.g=new Yr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Cr(c.qa);Le(p,"RID","rpc"),Le(p,"SID",c.K),Le(p,"AID",c.T),Le(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Le(p,"TO",c.ja),Le(p,"TYPE","xmlhttp"),Dl(c,p),c.m&&c.o&&Vf(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Fu(Cr(p)),y.m=null,y.P=!0,yv(y,c)}t.Za=function(){this.C!=null&&(this.C=null,$u(this),jf(this),Gt(19))};function Wu(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Wv(c,p){var y=null;if(c.g==p){Wu(c),Ff(c),c.g=null;var k=2}else if(Of(c.h,p))y=p.D,Tv(c.h,p),k=1;else return;if(c.G!=0){if(p.o)if(k==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var O=c.B;k=Mu(),_e(k,new fv(k,y)),Hu(c)}else $v(c);else if(O=p.s,O==3||O==0&&0<p.X||!(k==1&&oI(c,p)||k==2&&jf(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),O){case 1:ns(c,5);break;case 4:ns(c,10);break;case 3:ns(c,6);break;default:ns(c,2)}}}function qv(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function ns(c,p){if(c.j.info("Error code "+p),p==2){var y=f(c.fb,c),k=c.Xa;const O=!k;k=new ts(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Lu(k,"https"),Fu(k),O?Zb(k.toString(),y):eI(k.toString(),y)}else Gt(2);c.G=0,c.l&&c.l.sa(p),Kv(c),Bv(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Kv(c){if(c.G=0,c.ka=[],c.l){const p=kv(c.h);(p.length!=0||c.i.length!=0)&&(T(c.ka,p),T(c.ka,c.i),c.h.i.length=0,_(c.i),c.i.length=0),c.l.ra()}}function Gv(c,p,y){var k=y instanceof ts?Cr(y):new ts(y);if(k.g!="")p&&(k.g=p+"."+k.g),ju(k,k.s);else{var O=l.location;k=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var j=new ts(null);k&&Lu(j,k),p&&(j.g=p),O&&ju(j,O),y&&(j.l=y),k=j}return y=c.D,p=c.ya,y&&p&&Le(k,y,p),Le(k,"VER",c.la),Dl(c,k),k}function Qv(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Je(new Bu({eb:y})):new Je(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jv(){}t=Jv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qu(){}qu.prototype.g=function(c,p){return new gn(c,p)};function gn(c,p){xe.call(this),this.g=new Fv(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!x(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!x(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new to(this)}g(gn,xe),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Lf(this.g)},gn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Xs(c),c=y);p.i.push(new $b(p.Ya++,c)),p.G==3&&Hu(p)},gn.prototype.N=function(){this.g.l=null,delete this.j,Lf(this.g),delete this.g,gn.aa.N.call(this)};function Yv(c){Af.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const y in p){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}g(Yv,Af);function Xv(){bf.call(this),this.status=1}g(Xv,bf);function to(c){this.g=c}g(to,Jv),to.prototype.ua=function(){_e(this.g,"a")},to.prototype.ta=function(c){_e(this.g,new Yv(c))},to.prototype.sa=function(c){_e(this.g,new Xv)},to.prototype.ra=function(){_e(this.g,"b")},qu.prototype.createWebChannel=qu.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Gk=function(){return new qu},Kk=function(){return Mu()},qk=Zi,Zm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ou.NO_ERROR=0,Ou.TIMEOUT=8,Ou.HTTP_ERROR=6,Bc=Ou,pv.COMPLETE="complete",Wk=pv,uv.EventType=kl,kl.OPEN="a",kl.CLOSE="b",kl.ERROR="c",kl.MESSAGE="d",xe.prototype.listen=xe.prototype.K,Zl=uv,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Hk=Je}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});const Aw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Ok("@firebase/firestore");function Hl(){return Ms.logLevel}function ne(t,...e){if(Ms.logLevel<=Te.DEBUG){const n=e.map(Hy);Ms.debug(`Firestore (${pl}): ${t}`,...n)}}function qr(t,...e){if(Ms.logLevel<=Te.ERROR){const n=e.map(Hy);Ms.error(`Firestore (${pl}): ${t}`,...n)}}function Go(t,...e){if(Ms.logLevel<=Te.WARN){const n=e.map(Hy);Ms.warn(`Firestore (${pl}): ${t}`,...n)}}function Hy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: `+t;throw qr(e),new Error(e)}function Re(t,e){t||ae()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends $s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class ZM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eO{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const i=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await i(this.currentUser)})},l=a=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new Qk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Ut(e)}}class tO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new rO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function Qo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new pt(0,0))}static max(){return new ue(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ja?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Ja{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const oO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Ja{construct(e,n,r){return new Nt(e,n,r)}static isValidIdentifier(e){return oO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new X(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[i+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new X(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new X(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Be.fromString(e))}static fromName(e){return new ie(Be.fromString(e).popFirst(5))}static empty(){return new ie(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Be(e.slice()))}}function lO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new Bi(i,ie.empty(),e)}function aO(t){return new Bi(t.readTime,t.key,-1)}class Bi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bi(ue.min(),ie.empty(),-1)}static max(){return new Bi(ue.max(),ie.empty(),-1)}}function uO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==cO)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},a=>r(a))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let a=0;a<s;a++){const u=a;n(e[u]).next(h=>{o[u]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function dO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wy.oe=-1;function Qd(t){return t==null}function bh(t){return t===0&&1/t==-1/0}function fO(t){return typeof t=="number"&&Number.isInteger(t)&&!bh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ml(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??At.RED,this.left=i??At.EMPTY,this.right=s??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new At(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new er([])}unionWith(e){let n=new Pt(Nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xk("Invalid base64 string: "+s):s}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const pO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(t){if(Re(!!t),typeof t=="string"){let e=0;const n=pO.exec(t);if(Re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ky(t){const e=t.mapValue.fields.__previous_value__;return qy(e)?Ky(e):e}function Ya(t){const e=zi(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,r,i,s,o,l,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=u}}class Xa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qy(t)?4:yO(t)?9007199254740991:gO(t)?10:11:ae()}function Tr(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ya(t).isEqual(Ya(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zi(i.timestampValue),l=zi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Os(i.bytesValue).isEqual(Os(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nt(i.doubleValue),l=nt(s.doubleValue);return o===l?bh(o)===bh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Qo(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(bw(o)!==bw(l))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(l[a]===void 0||!Tr(o[a],l[a])))return!1;return!0}(t,e);default:return ae()}}function Za(t,e){return(t.values||[]).find(n=>Tr(n,e))!==void 0}function Jo(t,e){if(t===e)return 0;const n=Ds(t),r=Ds(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=nt(s.integerValue||s.doubleValue),a=nt(o.integerValue||o.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return Nw(t.timestampValue,e.timestampValue);case 4:return Nw(Ya(t),Ya(e));case 5:return Ce(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Os(s),a=Os(o);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),a=o.split("/");for(let u=0;u<l.length&&u<a.length;u++){const h=Ce(l[u],a[u]);if(h!==0)return h}return Ce(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Ce(nt(s.latitude),nt(o.latitude));return l!==0?l:Ce(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,a,u,h;const d=s.fields||{},f=o.fields||{},m=(l=d.value)===null||l===void 0?void 0:l.arrayValue,g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=Ce(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=g==null?void 0:g.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:Rw(m,g)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===fc.mapValue&&o===fc.mapValue)return 0;if(s===fc.mapValue)return 1;if(o===fc.mapValue)return-1;const l=s.fields||{},a=Object.keys(l),u=o.fields||{},h=Object.keys(u);a.sort(),h.sort();for(let d=0;d<a.length&&d<h.length;++d){const f=Ce(a[d],h[d]);if(f!==0)return f;const m=Jo(l[a[d]],u[h[d]]);if(m!==0)return m}return Ce(a.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Nw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=zi(t),r=zi(e),i=Ce(n.seconds,r.seconds);return i!==0?i:Ce(n.nanos,r.nanos)}function Rw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Jo(n[i],r[i]);if(s)return s}return Ce(n.length,r.length)}function Yo(t){return eg(t)}function eg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=eg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${eg(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function Pw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tg(t){return!!t&&"integerValue"in t}function Gy(t){return!!t&&"arrayValue"in t}function Mw(t){return!!t&&"nullValue"in t}function Ow(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zc(t){return!!t&&"mapValue"in t}function gO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ml(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=Nt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ga(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ml(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ln(ga(this.value))}}function Zk(t){const e=[];return ml(t.fields,(n,r)=>{const i=new Nt([n]);if(zc(r)){const s=Zk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ht(e,0,ue.min(),ue.min(),ue.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,i){return new Ht(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new Ht(e,2,n,ue.min(),ue.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,ue.min(),ue.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function Dw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Jo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function vO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{}class at extends eS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xO(e,n,r):n==="array-contains"?new TO(e,r):n==="in"?new kO(e,r):n==="not-in"?new SO(e,r):n==="array-contains-any"?new CO(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _O(e,r):new EO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jo(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends eS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sr(e,n)}matches(e){return tS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tS(t){return t.op==="and"}function nS(t){return wO(t)&&tS(t)}function wO(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function ng(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+Yo(t.value);if(nS(t))return t.filters.map(e=>ng(e)).join(",");{const e=t.filters.map(n=>ng(n)).join(",");return`${t.op}(${e})`}}function rS(t,e){return t instanceof at?function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&Tr(r.value,i.value)}(t,e):t instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&rS(o,i.filters[l]),!0):!1}(t,e):void ae()}function iS(t){return t instanceof at?function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(iS).join(" ,")+"}"}(t):"Filter"}class xO extends at{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class _O extends at{constructor(e,n){super(e,"in",n),this.keys=sS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EO extends at{constructor(e,n){super(e,"not-in",n),this.keys=sS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class TO extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gy(n)&&Za(n.arrayValue,this.value)}}class kO extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Za(this.value.arrayValue,n)}}class SO extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Za(this.value.arrayValue,n)}}class CO extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Lw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new AO(t,e,n,r,i,s,o)}function Qy(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ng(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yo(r)).join(",")),e.ue=n}return e.ue}function Jy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vw(t.startAt,e.startAt)&&Vw(t.endAt,e.endAt)}function rg(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bO(t,e,n,r,i,s,o,l){return new gl(t,e,n,r,i,s,o,l)}function Yy(t){return new gl(t)}function jw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oS(t){return t.collectionGroup!==null}function ya(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Pt(Nt.comparator);return o.filters.forEach(a=>{a.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new eu(s,r))}),n.has(Nt.keyField().canonicalString())||e.ce.push(new eu(Nt.keyField(),r))}return e.ce}function xr(t){const e=he(t);return e.le||(e.le=IO(e,ya(t))),e.le}function IO(t,e){if(t.limitType==="F")return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new eu(i.field,s)});const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ig(t,e){const n=t.filters.concat([e]);return new gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sg(t,e,n){return new gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jd(t,e){return Jy(xr(t),xr(e))&&t.limitType===e.limitType}function lS(t){return`${Qy(xr(t))}|lt:${t.limitType}`}function ao(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>iS(i)).join(", ")}]`),Qd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Yo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Yo(i)).join(",")),`Target(${r})`}(xr(t))}; limitType=${t.limitType})`}function Yd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ya(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,a){const u=Dw(o,l,a);return o.inclusive?u<=0:u<0}(r.startAt,ya(r),i)||r.endAt&&!function(o,l,a){const u=Dw(o,l,a);return o.inclusive?u>=0:u>0}(r.endAt,ya(r),i))}(t,e)}function NO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aS(t){return(e,n)=>{let r=!1;for(const i of ya(t)){const s=RO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function RO(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,l){const a=o.data.field(s),u=l.data.field(s);return a!==null&&u!==null?Jo(a,u):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ml(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Yk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=new Ge(ie.comparator);function Kr(){return PO}const uS=new Ge(ie.comparator);function ea(...t){let e=uS;for(const n of t)e=e.insert(n.key,n);return e}function cS(t){let e=uS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ds(){return va()}function hS(){return va()}function va(){return new yl(t=>t.toString(),(t,e)=>t.isEqual(e))}const MO=new Ge(ie.comparator),OO=new Pt(ie.comparator);function ve(...t){let e=OO;for(const n of t)e=e.add(n);return e}const DO=new Pt(Ce);function VO(){return DO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function dS(t){return{integerValue:""+t}}function LO(t,e){return fO(e)?dS(e):Xy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(){this._=void 0}}function jO(t,e,n){return t instanceof Nh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qy(s)&&(s=Ky(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof tu?pS(t,e):t instanceof nu?mS(t,e):function(i,s){const o=fS(i,s),l=Fw(o)+Fw(i.Pe);return tg(o)&&tg(i.Pe)?dS(l):Xy(i.serializer,l)}(t,e)}function FO(t,e,n){return t instanceof tu?pS(t,e):t instanceof nu?mS(t,e):n}function fS(t,e){return t instanceof Rh?function(r){return tg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Nh extends Xd{}class tu extends Xd{constructor(e){super(),this.elements=e}}function pS(t,e){const n=gS(e);for(const r of t.elements)n.some(i=>Tr(i,r))||n.push(r);return{arrayValue:{values:n}}}class nu extends Xd{constructor(e){super(),this.elements=e}}function mS(t,e){let n=gS(e);for(const r of t.elements)n=n.filter(i=>!Tr(i,r));return{arrayValue:{values:n}}}class Rh extends Xd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Fw(t){return nt(t.integerValue||t.doubleValue)}function gS(t){return Gy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof tu&&i instanceof tu||r instanceof nu&&i instanceof nu?Qo(r.elements,i.elements,Tr):r instanceof Rh&&i instanceof Rh?Tr(r.Pe,i.Pe):r instanceof Nh&&i instanceof Nh}(t.transform,e.transform)}class zO{constructor(e,n){this.version=e,this.transformResults=n}}class Fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zd{}function yS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wS(t.key,Fr.none()):new _u(t.key,t.data,Fr.none());{const n=t.data,r=Ln.empty();let i=new Pt(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hs(t.key,r,new er(i.toArray()),Fr.none())}}function UO(t,e,n){t instanceof _u?function(i,s,o){const l=i.value.clone(),a=zw(i.fieldTransforms,s,o.transformResults);l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(i,s,o){if(!Uc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=zw(i.fieldTransforms,s,o.transformResults),a=s.data;a.setAll(vS(i)),a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wa(t,e,n,r){return t instanceof _u?function(s,o,l,a){if(!Uc(s.precondition,o))return l;const u=s.value.clone(),h=Uw(s.fieldTransforms,a,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(s,o,l,a){if(!Uc(s.precondition,o))return l;const u=Uw(s.fieldTransforms,a,o),h=o.data;return h.setAll(vS(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,l){return Uc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function $O(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=fS(r.transform,i||null);s!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,s))}return n||null}function Bw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qo(r,i,(s,o)=>BO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _u extends Zd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends Zd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zw(t,e,n){const r=new Map;Re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,FO(o,l,n[i]))}return r}function Uw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,jO(s,o,e))}return r}class wS extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HO extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&UO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const a=yS(o,l);a!==null&&r.set(i.key,a),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,(n,r)=>Bw(n,r))&&Qo(this.baseMutations,e.baseMutations,(n,r)=>Bw(n,r))}}class Zy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Re(e.mutations.length===r.length);let i=function(){return MO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Zy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Ee;function GO(t){switch(t){default:return ae();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function xS(t){if(t===void 0)return qr("GRPC error has no .code"),B.UNKNOWN;switch(t){case ot.OK:return B.OK;case ot.CANCELLED:return B.CANCELLED;case ot.UNKNOWN:return B.UNKNOWN;case ot.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ot.INTERNAL:return B.INTERNAL;case ot.UNAVAILABLE:return B.UNAVAILABLE;case ot.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ot.NOT_FOUND:return B.NOT_FOUND;case ot.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ot.ABORTED:return B.ABORTED;case ot.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ot.DATA_LOSS:return B.DATA_LOSS;default:return ae()}}(Ee=ot||(ot={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new xs([4294967295,4294967295],0);function $w(t){const e=QO().encode(t),n=new $k;return n.update(e),new Uint8Array(n.digest())}function Hw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xs([n,r],0),new xs([i,s],0)]}class e0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ta(`Invalid padding: ${n}`);if(r<0)throw new ta(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ta(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ta(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=xs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(xs.fromNumber(r)));return i.compare(JO)===1&&(i=new xs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$w(e),[r,i]=Hw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new e0(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=$w(e),[r,i]=Hw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ef(ue.min(),i,new Ge(Ce),Kr(),ve())}}class Eu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Eu(r,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class _S{constructor(e,n){this.targetId=e,this.me=n}}class ES{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ww{constructor(){this.fe=0,this.ge=Kw(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Eu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Kw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class YO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kr(),this.qe=qw(),this.Qe=new Ge(Ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(rg(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,Ht.newNoDocument(o,ue.min()))}else Re(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),a=l?this.Xe(l,e,o):1;if(a!==0){this.je(n);const u=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Os(r).toUint8Array()}catch(a){if(a instanceof Xk)return Go("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new e0(o,i,s)}catch(a){return Go(a instanceof ta?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&rg(l.target)){const a=new ie(l.target.path);this.ke.get(a)!==null||this.it(o,a)||this.Ue(o,a,Ht.newNoDocument(a,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ve();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(a=>{const u=this.Je(a);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ef(e,n,this.Qe,this.ke,r);return this.ke=Kr(),this.qe=qw(),this.Qe=new Ge(Ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ww,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Pt(Ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ww),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function qw(){return new Ge(ie.comparator)}function Kw(){return new Ge(ie.comparator)}const XO={asc:"ASCENDING",desc:"DESCENDING"},ZO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eD={and:"AND",or:"OR"};class tD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function og(t,e){return t.useProto3Json||Qd(e)?e:{value:e}}function Ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nD(t,e){return Ph(t,e.toTimestamp())}function _r(t){return Re(!!t),ue.fromTimestamp(function(n){const r=zi(n);return new pt(r.seconds,r.nanos)}(t))}function t0(t,e){return lg(t,e).canonicalString()}function lg(t,e){const n=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kS(t){const e=Be.fromString(t);return Re(IS(e)),e}function ag(t,e){return t0(t.databaseId,e.path)}function vp(t,e){const n=kS(e);if(n.get(1)!==t.databaseId.projectId)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(CS(n))}function SS(t,e){return t0(t.databaseId,e)}function rD(t){const e=kS(t);return e.length===4?Be.emptyPath():CS(e)}function ug(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CS(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Gw(t,e,n){return{name:ag(t,e),fields:n.value.mapValue.fields}}function iD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Re(h===void 0||typeof h=="string"),Ot.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?B.UNKNOWN:xS(u.code);return new X(h,u.message||"")}(o);n=new ES(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=vp(t,r.document.name),s=_r(r.document.updateTime),o=r.document.createTime?_r(r.document.createTime):ue.min(),l=new Ln({mapValue:{fields:r.document.fields}}),a=Ht.newFoundDocument(i,s,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new $c(u,h,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=vp(t,r.document),s=r.readTime?_r(r.readTime):ue.min(),o=Ht.newNoDocument(i,s),l=r.removedTargetIds||[];n=new $c([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=vp(t,r.document),s=r.removedTargetIds||[];n=new $c([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new KO(i,s),l=r.targetId;n=new _S(l,o)}}return n}function sD(t,e){let n;if(e instanceof _u)n={update:Gw(t,e.key,e.value)};else if(e instanceof wS)n={delete:ag(t,e.key)};else if(e instanceof Hs)n={update:Gw(t,e.key,e.data),updateMask:pD(e.fieldMask)};else{if(!(e instanceof HO))return ae();n={verify:ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Nh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof tu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rh)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function oD(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?_r(i.updateTime):_r(s);return o.isEqual(ue.min())&&(o=_r(s)),new zO(o,i.transformResults||[])}(n,e))):[]}function lD(t,e){return{documents:[SS(t,e.path)]}}function aD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SS(t,i);const s=function(u){if(u.length!==0)return bS(sr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:uo(f.field),direction:hD(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=og(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function uD(t){let e=rD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Re(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=AS(d);return f instanceof sr&&nS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(g){return new eu(co(g.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(d){let f;return f=typeof d=="object"?d.value:d,Qd(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(d){const f=!!d.before,m=d.values||[];return new Ih(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new Ih(m,f)}(n.endAt)),bO(e,i,o,s,l,"F",a,u)}function cD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=co(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=co(n.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=co(n.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=co(n.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return at.create(co(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>AS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function hD(t){return XO[t]}function dD(t){return ZO[t]}function fD(t){return eD[t]}function uo(t){return{fieldPath:t.canonicalString()}}function co(t){return Nt.fromServerFormat(t.fieldPath)}function bS(t){return t instanceof at?function(n){if(n.op==="=="){if(Ow(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(Mw(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ow(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(Mw(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:dD(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(i=>bS(i));return r.length===1?r[0]:{compositeFilter:{op:fD(n.op),filters:r}}}(t):ae()}function pD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r,i,s=ue.min(),o=ue.min(),l=Ot.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.ct=e}}function gD(t){const e=uD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.un=new vD}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Bi.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class vD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pt(Be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xo(0)}static kn(){return new Xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.changes=new yl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wa(r.mutation,i,er.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const i=ds();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ea();return s.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Kr();const o=va(),l=function(){return va()}();return n.forEach((a,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Hs)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),wa(h.mutation,u,h.mutation.getFieldMask(),pt.now())):o.set(u.key,er.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return l.set(u,new xD(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(e,n){const r=va();let i=new Ge((o,l)=>o-l),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(a=>{const u=n.get(a);if(u===null)return;let h=r.get(a)||er.empty();h=l.applyToLocalView(u,h),r.set(a,h);const d=(i.get(l.batchId)||ve()).add(a);i=i.insert(l.batchId,d)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),u=a.key,h=a.value,d=hS();h.forEach(f=>{if(!s.has(f)){const m=yS(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(ds());let l=-1,a=s;return o.next(u=>z.forEach(u,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{a=a.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,a,u,ve())).next(h=>({batchId:l,changes:cS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=ea();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ea();return this.indexManager.getCollectionParents(e,s).next(l=>z.forEach(l,a=>{const u=function(d,f){return new gl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((a,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ht.newInvalidDocument(h)))});let l=ea();return o.forEach((a,u)=>{const h=s.get(a);h!==void 0&&wa(h.mutation,u,er.empty(),pt.now()),Yd(n,u)&&(l=l.insert(a,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_r(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:gD(i.bundledQuery),readTime:_r(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.overlays=new Ge(ie.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ds();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=ds(),s=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,u=a.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&a.largestBatchId>r&&i.set(a.getKey(),a)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=ds(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=ds(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=i)););return z.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qO(n,r));let s=this.Ir.get(n);s===void 0&&(s=ve(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.Tr=new Pt(mt.Er),this.dr=new Pt(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Be([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Be([])),r=new mt(n,e),i=new mt(n,e+1);let s=ve();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ce(e.wr,n.wr)}static Ar(e,n){return Ce(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Pt(mt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new WO(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new mt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(Ce);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new mt(new ie(s),0);let l=new Pt(Ce);return this.br.forEachWhile(a=>{const u=a.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(a.wr)),!0)},o),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),i=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.Mr=e,this.docs=function(){return new Ge(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=Kr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ht.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Kr();const o=n.path,l=new ie(o.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:u,value:{document:h}}=a.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||uO(aO(h),r)<=0||(i.has(h.key)||Yd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AD(this)}getSize(e){return z.resolve(this.size)}}class AD extends wD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.persistence=e,this.Nr=new yl(n=>Qy(n),Jy),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new n0,this.targetCount=0,this.kr=Xo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wy(0),this.Kr=!1,this.Kr=!0,this.$r=new kD,this.referenceDelegate=e(this),this.Ur=new bD(this),this.indexManager=new yD,this.remoteDocumentCache=function(i){return new CD(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mD(n),this.Gr=new ED(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new SD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new ND(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ND extends hO{constructor(e){super(),this.currentSequenceNumber=e}}class r0{constructor(e){this.persistence=e,this.Jr=new n0,this.Yr=null}static Zr(e){return new r0(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ve(),i=ve();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new i0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return FP()?8:dO(LP())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new RD;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Hl()<=Te.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Hl()<=Te.DEBUG&&ne("QueryEngine","Query:",ao(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Hl()<=Te.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):z.resolve())}Yi(e,n){if(jw(n))return z.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sg(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ve(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const u=this.ts(n,l);return this.ns(n,u,o,a.readTime)?this.Yi(e,sg(n,null,"F")):this.rs(e,u,n,a)}))})))}Zi(e,n,r,i){return jw(n)||i.isEqual(ue.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?z.resolve(null):(Hl()<=Te.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ao(n)),this.rs(e,o,n,lO(i,-1)).next(l=>l))})}ts(e,n){let r=new Pt(aS(e));return n.forEach((i,s)=>{Yd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Hl()<=Te.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ao(n)),this.Ji.getDocumentsMatchingQuery(e,n,Bi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ge(Ce),this._s=new yl(s=>Qy(s),Jy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _D(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function OD(t,e,n,r){return new MD(t,e,n,r)}async function NS(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let a=ve();for(const u of i){o.push(u.batchId);for(const h of u.mutations)a=a.add(h.key)}for(const u of s){l.push(u.batchId);for(const h of u.mutations)a=a.add(h.key)}return n.localDocuments.getDocuments(r,a).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function DD(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,a,u,h){const d=u.batch,f=d.keys();let m=z.resolve();return f.forEach(g=>{m=m.next(()=>h.getEntry(a,g)).next(_=>{const T=u.docVersions.get(g);Re(T!==null),_.version.compareTo(T)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),h.addEntry(_)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(a,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let a=ve();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(a=a.add(l.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RS(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function VD(t,e){const n=he(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;l.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Ot.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(_,T,w){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,h)&&l.push(n.Ur.updateTargetData(s,m))});let a=Kr(),u=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(LD(s,o,e.documentUpdates).next(h=>{a=h.Ps,u=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return z.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,u)).next(()=>a)}).then(s=>(n.os=i,s))}function LD(t,e,n){let r=ve(),i=ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Kr();return n.forEach((l,a)=>{const u=s.get(l);a.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),a.isNoDocument()&&a.version.isEqual(ue.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||a.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):ne("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",a.version)}),{Ps:o,Is:i}})}function jD(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FD(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new yi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function cg(t,e,n){const r=he(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xu(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Qw(t,e,n){const r=he(t);let i=ue.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(a,u,h){const d=he(a),f=d._s.get(h);return f!==void 0?z.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(r,o,xr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(a=>{s=a})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:ve())).next(l=>(BD(r,NO(e),l),{documents:l,Ts:s})))}function BD(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Jw{constructor(){this.activeTargetIds=VO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zD{constructor(){this.so=new Jw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Jw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc=null;function wp(){return pc===null?pc=function(){return 268435456+Math.round(2147483648*Math.random())}():pc++,"0x"+pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class WD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=wp(),a=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${l}:`,a,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,a,u,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw Go("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",a,"request:",i),h})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=$D[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=wp();return new Promise((o,l)=>{const a=new Hk;a.setWithCredentials(!0),a.listenOnce(Wk.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Bc.NO_ERROR:const h=a.getResponseJson();ne(Bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Bc.TIMEOUT:ne(Bt,`RPC '${e}' ${s} timed out`),l(new X(B.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:const d=a.getStatus();if(ne(Bt,`RPC '${e}' ${s} failed with status:`,d,"response text:",a.getResponseText()),d>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const g=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(m.status);l(new X(g,m.message))}else l(new X(B.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new X(B.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ne(Bt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ne(Bt,`RPC '${e}' ${s} sending request:`,i),a.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=wp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gk(),l=Kk(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const h=s.join("");ne(Bt,`Creating RPC '${e}' stream ${i}: ${h}`,a);const d=o.createWebChannel(h,a);let f=!1,m=!1;const g=new HD({Io:T=>{m?ne(Bt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(ne(Bt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ne(Bt,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},To:()=>d.close()}),_=(T,w,x)=>{T.listen(w,C=>{try{x(C)}catch(M){setTimeout(()=>{throw M},0)}})};return _(d,Zl.EventType.OPEN,()=>{m||(ne(Bt,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),_(d,Zl.EventType.CLOSE,()=>{m||(m=!0,ne(Bt,`RPC '${e}' stream ${i} transport closed`),g.So())}),_(d,Zl.EventType.ERROR,T=>{m||(m=!0,Go(Bt,`RPC '${e}' stream ${i} transport errored:`,T),g.So(new X(B.UNAVAILABLE,"The operation could not be completed")))}),_(d,Zl.EventType.MESSAGE,T=>{var w;if(!m){const x=T.data[0];Re(!!x);const C=x,M=C.error||((w=C[0])===null||w===void 0?void 0:w.error);if(M){ne(Bt,`RPC '${e}' stream ${i} received error:`,M);const L=M.status;let V=function(S){const I=ot[S];if(I!==void 0)return xS(I)}(L),A=M.message;V===void 0&&(V=B.INTERNAL,A="Unknown error status: "+L+" with message "+M.message),m=!0,g.So(new X(V,A)),d.close()}else ne(Bt,`RPC '${e}' stream ${i} received:`,x),g.bo(x)}}),_(l,qk.STAT_EVENT,T=>{T.stat===Zm.PROXY?ne(Bt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Zm.NOPROXY&&ne(Bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function xp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t){return new tD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n,r,i,s,o,l,a){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new PS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new X(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qD extends MS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?_r(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ug(this.serializer),n.addTarget=function(s,o){let l;const a=o.target;if(l=rg(a)?{documents:lD(s,a)}:{query:aD(s,a)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=TS(s,o.resumeToken);const u=og(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){l.readTime=Ph(s,o.snapshotVersion.toTimestamp());const u=og(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=cD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ug(this.serializer),n.removeTarget=e,this.a_(n)}}class KD extends MS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oD(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ug(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,lg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,lg(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class QD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qr(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=he(a);u.L_.add(4),await Tu(u),u.q_.set("Unknown"),u.L_.delete(4),await nf(u)}(this))})}),this.q_=new QD(r,i)}}async function nf(t){if(Ws(t))for(const e of t.B_)await e(!0)}async function Tu(t){for(const e of t.B_)await e(!1)}function OS(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),a0(n)?l0(n):vl(n).r_()&&o0(n,e))}function s0(t,e){const n=he(t),r=vl(n);n.N_.delete(e),r.r_()&&DS(n,e),n.N_.size===0&&(r.r_()?r.o_():Ws(n)&&n.q_.set("Unknown"))}function o0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vl(t).A_(e)}function DS(t,e){t.Q_.xe(e),vl(t).R_(e)}function l0(t){t.Q_=new YO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vl(t).start(),t.q_.v_()}function a0(t){return Ws(t)&&!vl(t).n_()&&t.N_.size>0}function Ws(t){return he(t).L_.size===0}function VS(t){t.Q_=void 0}async function YD(t){t.q_.set("Online")}async function XD(t){t.N_.forEach((e,n)=>{o0(t,e)})}async function ZD(t,e){VS(t),a0(t)?(t.q_.M_(e),l0(t)):t.q_.set("Unknown")}async function e4(t,e,n){if(t.q_.set("Online"),e instanceof ES&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mh(t,r)}else if(e instanceof $c?t.Q_.Ke(e):e instanceof _S?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await RS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(a.resumeToken,o))}}),l.targetMismatches.forEach((a,u)=>{const h=s.N_.get(a);if(!h)return;s.N_.set(a,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),DS(s,a);const d=new yi(h.target,a,u,h.sequenceNumber);o0(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await Mh(t,r)}}async function Mh(t,e,n){if(!xu(e))throw e;t.L_.add(1),await Tu(t),t.q_.set("Offline"),n||(n=()=>RS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await nf(t)})}function LS(t,e){return e().catch(n=>Mh(t,n,e))}async function rf(t){const e=he(t),n=Ui(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;t4(e);)try{const i=await jD(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,n4(e,i)}catch(i){await Mh(e,i)}jS(e)&&FS(e)}function t4(t){return Ws(t)&&t.O_.length<10}function n4(t,e){t.O_.push(e);const n=Ui(t);n.r_()&&n.V_&&n.m_(e.mutations)}function jS(t){return Ws(t)&&!Ui(t).n_()&&t.O_.length>0}function FS(t){Ui(t).start()}async function r4(t){Ui(t).p_()}async function i4(t){const e=Ui(t);for(const n of t.O_)e.m_(n.mutations)}async function s4(t,e,n){const r=t.O_.shift(),i=Zy.from(r,e,n);await LS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rf(t)}async function o4(t,e){e&&Ui(t).V_&&await async function(r,i){if(function(o){return GO(o)&&o!==B.ABORTED}(i.code)){const s=r.O_.shift();Ui(r).s_(),await LS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rf(r)}}(t,e),jS(t)&&FS(t)}async function Xw(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Ws(n);n.L_.add(3),await Tu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await nf(n)}async function l4(t,e){const n=he(t);e?(n.L_.delete(2),await nf(n)):e||(n.L_.add(2),await Tu(n),n.q_.set("Unknown"))}function vl(t){return t.K_||(t.K_=function(n,r,i){const s=he(n);return s.w_(),new qD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:YD.bind(null,t),Ro:XD.bind(null,t),mo:ZD.bind(null,t),d_:e4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),a0(t)?l0(t):t.q_.set("Unknown")):(await t.K_.stop(),VS(t))})),t.K_}function Ui(t){return t.U_||(t.U_=function(n,r,i){const s=he(n);return s.w_(),new KD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:r4.bind(null,t),mo:o4.bind(null,t),f_:i4.bind(null,t),g_:s4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await rf(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new u0(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function c0(t,e){if(qr("AsyncQueue",`${e}: ${t}`),xu(t))return new X(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=ea(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new Do(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Do;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.W_=new Ge(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zo{constructor(e,n,r,i,s,o,l,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Zo(e,n,Do.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class u4{constructor(){this.queries=ex(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=he(n),s=i.queries;i.queries=ex(),s.forEach((o,l)=>{for(const a of l.j_)a.onError(r)})})(this,new X(B.ABORTED,"Firestore shutting down"))}}function ex(){return new yl(t=>lS(t),Jd)}async function BS(t,e){const n=he(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new a4,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=c0(o,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&h0(n)}async function zS(t,e){const n=he(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function c4(t,e){const n=he(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&h0(n)}function h4(t,e,n){const r=he(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function h0(t){t.Y_.forEach(e=>{e.next()})}var hg,tx;(tx=hg||(hg={})).ea="default",tx.Cache="cache";class US{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.key=e}}class HS{constructor(e){this.key=e}}class d4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=aS(e),this.Ra=new Do(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const a=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),m=Yd(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;f&&m?f.data.isEqual(m.data)?g!==_&&(r.track({type:3,doc:m}),T=!0):this.ga(f,m)||(r.track({type:2,doc:m}),T=!0,(a&&this.Aa(m,a)>0||u&&this.Aa(m,u)<0)&&(l=!0)):!f&&m?(r.track({type:0,doc:m}),T=!0):f&&!m&&(r.track({type:1,doc:f}),T=!0,(a||u)&&(l=!0)),T&&(m?(o=o.add(m),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,g){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return _(m)-_(g)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],a=this.da.size===0&&this.current&&!i?1:0,u=a!==this.Ea;return this.Ea=a,o.length!==0||u?{snapshot:new Zo(this.query,e.Ra,s,o,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new HS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new $S(r))}),n}ba(e){this.Ta=e.Ts,this.da=ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class f4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p4{constructor(e){this.key=e,this.va=!1}}class m4{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new yl(l=>lS(l),Jd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(ie.comparator),this.Na=new Map,this.La=new n0,this.Ba={},this.ka=new Map,this.qa=Xo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function g4(t,e,n=!0){const r=JS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await WS(r,e,n,!0),i}async function y4(t,e){const n=JS(t);await WS(n,e,!0,!1)}async function WS(t,e,n,r){const i=await FD(t.localStore,xr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await v4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&OS(t.remoteStore,i),l}async function v4(t,e,n,r,i){t.Ka=(d,f,m)=>async function(_,T,w,x){let C=T.view.ma(w);C.ns&&(C=await Qw(_.localStore,T.query,!1).then(({documents:A})=>T.view.ma(A,C)));const M=x&&x.targetChanges.get(T.targetId),L=x&&x.targetMismatches.get(T.targetId)!=null,V=T.view.applyChanges(C,_.isPrimaryClient,M,L);return rx(_,T.targetId,V.wa),V.snapshot}(t,d,f,m);const s=await Qw(t.localStore,e,!0),o=new d4(e,s.Ts),l=o.ma(s.documents),a=Eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,a);rx(t,n,u.wa);const h=new f4(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function w4(t,e,n){const r=he(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Jd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&s0(r.remoteStore,i.targetId),dg(r,i.targetId)}).catch(wu)):(dg(r,i.targetId),await cg(r.localStore,i.targetId,!0))}async function x4(t,e){const n=he(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),s0(n.remoteStore,r.targetId))}async function _4(t,e,n){const r=b4(t);try{const i=await function(o,l){const a=he(o),u=pt.now(),h=l.reduce((m,g)=>m.add(g.key),ve());let d,f;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Kr(),_=ve();return a.cs.getEntries(m,h).next(T=>{g=T,g.forEach((w,x)=>{x.isValidDocument()||(_=_.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,g)).next(T=>{d=T;const w=[];for(const x of l){const C=$O(x,d.get(x.key).overlayedDocument);C!=null&&w.push(new Hs(x.key,C,Zk(C.value.mapValue),Fr.exists(!0)))}return a.mutationQueue.addMutationBatch(m,u,w,l)}).next(T=>{f=T;const w=T.applyToLocalDocumentSet(d,_);return a.documentOverlayCache.saveOverlays(m,T.batchId,w)})}).then(()=>({batchId:f.batchId,changes:cS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,a){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ge(Ce)),u=u.insert(l,a),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await ku(r,i.changes),await rf(r.remoteStore)}catch(i){const s=c0(i,"Failed to persist write");n.reject(s)}}async function qS(t,e){const n=he(t);try{const r=await VD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Re(o.va):i.removedDocuments.size>0&&(Re(o.va),o.va=!1))}),await ku(n,r,e)}catch(r){await wu(r)}}function nx(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const a=he(o);a.onlineState=l;let u=!1;a.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(l)&&(u=!0)}),u&&h0(a)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E4(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ge(ie.comparator);o=o.insert(s,Ht.newNoDocument(s,ue.min()));const l=ve().add(s),a=new ef(ue.min(),new Map,new Ge(Ce),o,l);await qS(r,a),r.Oa=r.Oa.remove(s),r.Na.delete(e),d0(r)}else await cg(r.localStore,e,!1).then(()=>dg(r,e,n)).catch(wu)}async function T4(t,e){const n=he(t),r=e.batch.batchId;try{const i=await DD(n.localStore,e);GS(n,r,null),KS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ku(n,i)}catch(i){await wu(i)}}async function k4(t,e,n){const r=he(t);try{const i=await function(o,l){const a=he(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return a.mutationQueue.lookupMutationBatch(u,l).next(d=>(Re(d!==null),h=d.keys(),a.mutationQueue.removeMutationBatch(u,d))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>a.localDocuments.getDocuments(u,h))})}(r.localStore,e);GS(r,e,n),KS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ku(r,i)}catch(i){await wu(i)}}function KS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function GS(t,e,n){const r=he(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||QS(t,r)})}function QS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(s0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),d0(t))}function rx(t,e,n){for(const r of n)r instanceof $S?(t.La.addReference(r.key,e),S4(t,r)):r instanceof HS?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||QS(t,r.key)):ae()}function S4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),d0(t))}function d0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new p4(n)),t.Oa=t.Oa.insert(n,r),OS(t.remoteStore,new yi(xr(Yy(n.path)),r,"TargetPurposeLimboResolution",Wy.oe))}}async function ku(t,e,n){const r=he(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,a)=>{o.push(r.Ka(a,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(a.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(a.targetId,d?"current":"not-current")}if(u){i.push(u);const d=i0.Wi(a.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(a,u){const h=he(a);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>z.forEach(u,f=>z.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>z.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!xu(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),g=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(g);h.os=h.os.insert(f,_)}}}(r.localStore,s))}async function C4(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await NS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(a=>{a.reject(new X(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(n,r.hs)}}function A4(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function JS(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E4.bind(null,e),e.Ca.d_=c4.bind(null,e.eventManager),e.Ca.$a=h4.bind(null,e.eventManager),e}function b4(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k4.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return OD(this.persistence,new PD,e.initialUser,this.serializer)}Ga(e){return new ID(r0.Zr,this.serializer)}Wa(e){return new zD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class fg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C4.bind(null,this.syncEngine),await l4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u4}()}createDatastore(e){const n=tf(e.databaseInfo.databaseId),r=function(s){return new WD(s)}(e.databaseInfo);return function(s,o,l,a){return new GD(s,o,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new JD(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>nx(this.syncEngine,n,0),function(){return Yw.D()?new Yw:new UD}())}createSyncEngine(e,n){return function(i,s,o,l,a,u,h){const d=new m4(i,s,o,l,a,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=he(i);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Tu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fg.provider={build:()=>new fg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=Jk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=c0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _p(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await NS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ix(t,e){t.asyncQueue.verifyOperationInProgress();const n=await N4(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xw(e.remoteStore,i)),t._onlineComponents=e}async function N4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await _p(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Go("Error using user provided cache. Falling back to memory cache: "+n),await _p(t,new Oh)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await _p(t,new Oh);return t._offlineComponents}async function XS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await ix(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await ix(t,new fg))),t._onlineComponents}function R4(t){return XS(t).then(e=>e.syncEngine)}async function ZS(t){const e=await XS(t),n=e.eventManager;return n.onListen=g4.bind(null,e.syncEngine),n.onUnlisten=w4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x4.bind(null,e.syncEngine),n}function P4(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,a,u){const h=new YS({next:f=>{h.Za(),o.enqueueAndForget(()=>zS(s,d));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new X(B.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&a&&a.source==="server"?u.reject(new X(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new US(Yy(l.path),h,{includeMetadataChanges:!0,_a:!0});return BS(s,d)}(await ZS(t),t.asyncQueue,e,n,r)),r.promise}function M4(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,a,u){const h=new YS({next:f=>{h.Za(),o.enqueueAndForget(()=>zS(s,d)),f.fromCache&&a.source==="server"?u.reject(new X(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new US(l,h,{includeMetadataChanges:!0,_a:!0});return BS(s,d)}(await ZS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e,n){if(!n)throw new X(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O4(t,e,n,r){if(e===!0&&r===!0)throw new X(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ox(t){if(!ie.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lx(t){if(ie.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function el(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sf(t);throw new X(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class of{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ax({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ax(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XM;switch(r.type){case"firstParty":return new nO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sx.get(n);r&&(ne("ComponentProvider","Removing Datastore"),sx.delete(n),r.terminate())}(this),Promise.resolve()}}function D4(t,e,n,r={}){var i;const s=(t=el(t,of))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,a;if(typeof r.mockUserToken=="string")l=r.mockUserToken,a=Ut.MOCK_USER;else{l=Pk(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new X(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ut(u)}t._authCredentials=new ZM(new Qk(l,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class Tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class Mi extends qs{constructor(e,n,r){super(e,n,Yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new ie(e))}withConverter(e){return new Mi(this.firestore,e,this._path)}}function Hc(t,e,...n){if(t=Er(t),tC("collection","path",e),t instanceof of){const r=Be.fromString(e,...n);return lx(r),new Mi(t,null,r)}{if(!(t instanceof Tn||t instanceof Mi))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return lx(r),new Mi(t.firestore,null,r)}}function nC(t,e,...n){if(t=Er(t),arguments.length===1&&(e=Jk.newId()),tC("doc","path",e),t instanceof of){const r=Be.fromString(e,...n);return ox(r),new Tn(t,null,new ie(r))}{if(!(t instanceof Tn||t instanceof Mi))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return ox(r),new Tn(t.firestore,t instanceof Mi?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new PS(this,"async_queue_retry"),this.Vu=()=>{const r=xp();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new jr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xu(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw qr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=u0.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class lf extends of{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ux,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ux(e),this._firestoreClient=void 0,await e}}}function V4(t,e){const n=typeof t=="object"?t:Bk(),r=typeof t=="string"?t:"(default)",i=Lk(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Nk("firestore");s&&D4(i,...s)}return i}function f0(t){if(t._terminated)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||L4(t),t._firestoreClient}function L4(t){var e,n,r;const i=t._freezeSettings(),s=function(l,a,u,h){return new mO(l,a,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new I4(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const a=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tl(Ot.fromBase64String(e))}catch(n){throw new X(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tl(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=/^__.*__$/;class F4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}function iC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class y0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new y0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(iC(this.Cu)&&j4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class B4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||tf(e)}Qu(e,n,r,i=!1){return new y0({Cu:e,methodName:n,qu:r,path:Nt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sC(t){const e=t._freezeSettings(),n=tf(t._databaseId);return new B4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function z4(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);aC("Data must be an object, but it was:",o,r);const l=oC(r,o);let a,u;if(s.merge)a=new er(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=$4(e,d,n);if(!o.contains(f))throw new X(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);W4(h,f)||h.push(f)}a=new er(h),u=o.fieldTransforms.filter(d=>a.covers(d.field))}else a=null,u=o.fieldTransforms;return new F4(new Ln(l),a,u)}function U4(t,e,n,r=!1){return v0(n,t.Qu(r?4:3,e))}function v0(t,e){if(lC(t=Er(t)))return aC("Unsupported field value:",e,t),oC(t,e);if(t instanceof rC)return function(r,i){if(!iC(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let a=v0(l,i.Lu(o));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Er(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pt.fromDate(r);return{timestampValue:Ph(i.serializer,s)}}if(r instanceof pt){const s=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ph(i.serializer,s)}}if(r instanceof m0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tl)return{bytesValue:TS(i.serializer,r._byteString)};if(r instanceof Tn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:t0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof g0)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(a=>{if(typeof a!="number")throw l.Bu("VectorValues must only contain numeric values.");return Xy(l.serializer,a)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${sf(r)}`)}(t,e)}function oC(t,e){const n={};return Yk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ml(t,(r,i)=>{const s=v0(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function lC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof m0||t instanceof tl||t instanceof Tn||t instanceof rC||t instanceof g0)}function aC(t,e,n){if(!lC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=sf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $4(t,e,n){if((e=Er(e))instanceof p0)return e._internalPath;if(typeof e=="string")return uC(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const H4=new RegExp("[~\\*/\\[\\]]");function uC(t,e,n){if(e.search(H4)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new p0(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(s||o)&&(a+=" (found",s&&(a+=` in field ${r}`),o&&(a+=` in document ${i}`),a+=")"),new X(B.INVALID_ARGUMENT,l+t+a)}function W4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(af("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q4 extends cC{data(){return super.data()}}function af(t,e){return typeof e=="string"?uC(t,e):e instanceof p0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class w0{}class hC extends w0{}function cx(t,e,...n){let r=[];e instanceof w0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(a=>a instanceof x0).length,l=s.filter(a=>a instanceof uf).length;if(o>1||o>0&&l>0)throw new X(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class uf extends hC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uf(e,n,r)}_apply(e){const n=this._parse(e);return dC(e._query,n),new qs(e.firestore,e.converter,ig(e._query,n))}_parse(e){const n=sC(e.firestore);return function(s,o,l,a,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){px(d,h);const m=[];for(const g of d)m.push(fx(a,s,g));f={arrayValue:{values:m}}}else f=fx(a,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||px(d,h),f=U4(l,o,d,h==="in"||h==="not-in");return at.create(u,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hx(t,e,n){const r=e,i=af("where",t);return uf._create(i,r,n)}class x0 extends w0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new x0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const a of l)dC(o,a),o=ig(o,a)}(e._query,n),new qs(e.firestore,e.converter,ig(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _0 extends hC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _0(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(s,o)}(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new gl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function dx(t,e="asc"){const n=e,r=af("orderBy",t);return _0._create(r,n)}function fx(t,e,n){if(typeof(n=Er(n))=="string"){if(n==="")throw new X(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oS(e)&&n.indexOf("/")!==-1)throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!ie.isDocumentKey(r))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pw(t,new ie(r))}if(n instanceof Tn)return Pw(t,n._key);throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sf(n)}.`)}function px(t,e){if(!Array.isArray(t)||t.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dC(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class G4{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ml(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new g0(s)}convertGeoPoint(e){return new m0(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ky(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ya(e));default:return null}}convertTimestamp(e){const n=zi(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Re(IS(r));const i=new Xa(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fC extends cC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(af("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Wc extends fC{data(e={}){return super.data(e)}}class J4{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new na(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wc(this._firestore,this._userDataWriter,r.key,r,new na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const a=new Wc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new na(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const a=new Wc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new na(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:Y4(l.type),doc:a,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Y4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){t=el(t,Tn);const e=el(t.firestore,lf);return P4(f0(e),t._key).then(n=>eV(e,t,n))}class pC extends G4{constructor(e){super(),this.firestore=e}convertBytes(e){return new tl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function mx(t){t=el(t,qs);const e=el(t.firestore,lf),n=f0(e),r=new pC(e);return K4(t._query),M4(n,t._query).then(i=>new J4(e,r,t,i))}function mC(t,e){const n=el(t.firestore,lf),r=nC(t),i=Q4(t.converter,e);return Z4(n,[z4(sC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Fr.exists(!1))]).then(()=>r)}function Z4(t,e){return function(r,i){const s=new jr;return r.asyncQueue.enqueueAndForget(async()=>_4(await R4(r),i,s)),s.promise}(f0(t),e)}function eV(t,e,n){const r=n.docs.get(e._key),i=new pC(t);return new fC(t,i,e._key,r,new na(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){pl=i})(jk),Ga(new Ko("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new lf(new eO(r.getProvider("auth-internal")),new iO(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new X(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Pi(Aw,"4.7.3",e),Pi(Aw,"4.7.3","esm2017")})();var tV="firebase",nV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(tV,nV,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="firebasestorage.googleapis.com",yC="storageBucket",rV=2*60*1e3,iV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et extends $s{constructor(e,n,r=0){super(Ep(e),`Firebase Storage: ${n} (${Ep(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ep(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ze;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ze||(Ze={}));function Ep(t){return"storage/"+t}function E0(){const t="An unknown error occurred, please check the error payload for server response.";return new et(Ze.UNKNOWN,t)}function sV(t){return new et(Ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oV(t){return new et(Ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new et(Ze.UNAUTHENTICATED,t)}function aV(){return new et(Ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uV(t){return new et(Ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cV(){return new et(Ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hV(){return new et(Ze.CANCELED,"User canceled the upload/download.")}function dV(t){return new et(Ze.INVALID_URL,"Invalid URL '"+t+"'.")}function fV(t){return new et(Ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pV(){return new et(Ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yC+"' property when initializing the app?")}function mV(){return new et(Ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gV(){return new et(Ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yV(t){return new et(Ze.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pg(t){return new et(Ze.INVALID_ARGUMENT,t)}function vC(){return new et(Ze.APP_DELETED,"The Firebase app was deleted.")}function vV(t){return new et(Ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xa(t,e){return new et(Ze.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Wl(t){throw new et(Ze.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_n.makeFromUrl(e,n)}catch{return new _n(e,"")}if(r.path==="")return r;throw fV(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),a={bucket:1,path:3};function u(M){M.path_=decodeURIComponent(M.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},_=n===gC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",w=new RegExp(`^https?://${_}/${i}/${T}`,"i"),C=[{regex:l,indices:a,postModify:s},{regex:m,indices:g,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let M=0;M<C.length;M++){const L=C[M],V=L.regex.exec(e);if(V){const A=V[L.indices.bucket];let E=V[L.indices.path];E||(E=""),r=new _n(A,E),L.postModify(r);break}}if(r==null)throw dV(e);return r}}class wV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function a(){return l===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,t(m,a())},T)}function f(){s&&clearTimeout(s)}function m(T,...w){if(u){f();return}if(T){f(),h.call(null,T,...w);return}if(a()||o){f(),h.call(null,T,...w);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,d(C)}let g=!1;function _(T){g||(g=!0,f(),!u&&(i!==null?(T||(l=2),clearTimeout(i),d(0)):T||(l=1)))}return d(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function _V(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(t){return t!==void 0}function TV(t){return typeof t=="object"&&!Array.isArray(t)}function T0(t){return typeof t=="string"||t instanceof String}function gx(t){return k0()&&t instanceof Blob}function k0(){return typeof Blob<"u"}function yx(t,e,n,r){if(r<e)throw pg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw pg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function wC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var _s;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_s||(_s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n,r,i,s,o,l,a,u,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new mc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const a=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===_s.NO_ERROR,a=s.getStatus();if(!l||kV(a,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===_s.ABORT;r(!1,new mc(!1,null,h));return}const u=this.successCodes_.indexOf(a)!==-1;r(!0,new mc(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const a=this.callback_(l,l.getResponse());EV(a)?s(a):s()}catch(a){o(a)}else if(l!==null){const a=E0();a.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,a)):o(a)}else if(i.canceled){const a=this.appDelete_?vC():hV();o(a)}else{const a=cV();o(a)}};this.canceled_?n(!1,new mc(!1,null,!0)):this.backoffId_=xV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_V(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function IV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NV(t,e,n,r,i,s,o=!0){const l=wC(t.urlParams),a=t.url+l,u=Object.assign({},t.headers);return bV(u,e),CV(u,n),AV(u,s),IV(u,r),new SV(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function PV(...t){const e=RV();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(k0())return new Blob(t);throw new et(Ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){if(typeof atob>"u")throw yV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tp{constructor(e,n){this.data=e,this.contentType=n||null}}function DV(t,e){switch(t){case mr.RAW:return new Tp(xC(e));case mr.BASE64:case mr.BASE64URL:return new Tp(_C(t,e));case mr.DATA_URL:return new Tp(LV(e),jV(e))}throw E0()}function xC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function VV(t){let e;try{e=decodeURIComponent(t)}catch{throw xa(mr.DATA_URL,"Malformed data URL.")}return xC(e)}function _C(t,e){switch(t){case mr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw xa(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case mr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw xa(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=OV(e)}catch(i){throw i.message.includes("polyfill")?i:xa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class EC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw xa(mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=FV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function LV(t){const e=new EC(t);return e.base64?_C(mr.BASE64,e.rest):VV(e.rest)}function jV(t){return new EC(t).contentType}function FV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){let r=0,i="";gx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(gx(this.data_)){const r=this.data_,i=MV(r,e,n);return i===null?null:new ci(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ci(r,!0)}}static getBlob(...e){if(k0()){const n=e.map(r=>r instanceof ci?r.data_:r);return new ci(PV.apply(null,n))}else{const n=e.map(o=>T0(o)?DV(mr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new ci(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t){let e;try{e=JSON.parse(t)}catch{return null}return TV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zV(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function kC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t,e){return e}let Qt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||UV}},gc=null;function $V(t){return!T0(t)||t.length<2?t:kC(t)}function SC(){if(gc)return gc;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(s,o){return $V(o)}const n=new Qt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Qt("size");return i.xform=r,t.push(i),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),gc=t,gc}function HV(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new _n(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function WV(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return HV(r,t),r}function CC(t,e,n){const r=TC(e);return r===null?null:WV(t,r,n)}function qV(t,e,n,r){const i=TC(e);if(i===null||!T0(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=S0(f,n,r),g=wC({alt:"media",token:u});return m+g})[0]}function KV(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class AC{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){if(!t)throw E0()}function GV(t,e){function n(r,i){const s=CC(t,i,e);return bC(s!==null),s}return n}function QV(t,e){function n(r,i){const s=CC(t,i,e);return bC(s!==null),qV(s,i,t.host,t._protocol)}return n}function IC(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=aV():i=lV():n.getStatus()===402?i=oV(t.bucket):n.getStatus()===403?i=uV(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function JV(t){const e=IC(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=sV(t.path)),s.serverResponse=i.serverResponse,s}return n}function YV(t,e,n){const r=e.fullServerUrl(),i=S0(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new AC(i,s,QV(t,n),o);return l.errorHandler=JV(e),l}function XV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ZV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=XV(null,e)),r}function eL(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let M=0;M<2;M++)C=C+Math.random().toString().slice(2);return C}const a=l();o["Content-Type"]="multipart/related; boundary="+a;const u=ZV(e,r,i),h=KV(u,n),d="--"+a+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+a+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+a+"--",m=ci.getBlob(d,r,f);if(m===null)throw mV();const g={name:u.fullPath},_=S0(s,t.host,t._protocol),T="POST",w=t.maxUploadRetryTime,x=new AC(_,T,GV(t,n),w);return x.urlParams=g,x.headers=o,x.body=m.uploadData(),x.errorHandler=IC(e),x}class tL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Wl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nL extends tL{initXhr(){this.xhr_.responseType="text"}}function NC(){return new nL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this._service=e,n instanceof _n?this._location=n:this._location=_n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vs(e,n)}get root(){const e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kC(this._location.path)}get storage(){return this._service}get parent(){const e=BV(this._location.path);if(e===null)return null;const n=new _n(this._location.bucket,e);return new Vs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vV(e)}}function rL(t,e,n){t._throwIfRoot("uploadBytes");const r=eL(t.storage,t._location,SC(),new ci(e,!0),n);return t.storage.makeRequestWithTokens(r,NC).then(i=>({metadata:i,ref:t}))}function iL(t){t._throwIfRoot("getDownloadURL");const e=YV(t.storage,t._location,SC());return t.storage.makeRequestWithTokens(e,NC).then(n=>{if(n===null)throw gV();return n})}function sL(t,e){const n=zV(t._location.path,e),r=new _n(t._location.bucket,n);return new Vs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){return/^[A-Za-z]+:\/\//.test(t)}function lL(t,e){return new Vs(t,e)}function RC(t,e){if(t instanceof C0){const n=t;if(n._bucket==null)throw pV();const r=new Vs(n,n._bucket);return e!=null?RC(r,e):r}else return e!==void 0?sL(t,e):t}function aL(t,e){if(e&&oL(e)){if(t instanceof C0)return lL(t,e);throw pg("To use ref(service, url), the first argument must be a Storage instance.")}else return RC(t,e)}function vx(t,e){const n=e==null?void 0:e[yC];return n==null?null:_n.makeFromBucketSpec(n,t)}function uL(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Pk(i,t.app.options.projectId))}class C0{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=gC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rV,this._maxUploadRetryTime=iV,this._requests=new Set,i!=null?this._bucket=_n.makeFromBucketSpec(i,this._host):this._bucket=vx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=vx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new wV(vC());{const o=NV(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const wx="@firebase/storage",xx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="storage";function cL(t,e,n){return t=Er(t),rL(t,e,n)}function hL(t){return t=Er(t),iL(t)}function dL(t,e){return t=Er(t),aL(t,e)}function fL(t=Bk(),e){t=Er(t);const r=Lk(t,PC).getImmediate({identifier:e}),i=Nk("storage");return i&&pL(r,...i),r}function pL(t,e,n,r={}){uL(t,e,n,r)}function mL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new C0(n,r,i,e,jk)}function gL(){Ga(new Ko(PC,mL,"PUBLIC").setMultipleInstances(!0)),Pi(wx,xx,""),Pi(wx,xx,"esm2017")}gL();const yL={apiKey:"AIzaSyBkkFF0XhNZeWuDmOfEhsgdfX1VBG7WTas",authDomain:"easyfindshub.firebaseapp.com",projectId:"easyfindshub",storageBucket:"easyfindshub.appspot.com",messagingSenderId:"581326886241",appId:"1:581326886241:web:c2c0e42bf47eeacbf71dad"},MC=Fk(yL),ra=V4(MC),vL=fL(MC),wL=()=>{const{category:t,slug:e}=u2(),[n,r]=U.useState(null),[i,s]=U.useState([]),[o,l]=U.useState({author:"",content:""});U.useEffect(()=>{const u=async()=>{try{const d=nC(ra,"articles",e),f=await X4(d);f.exists()&&r({id:f.id,...f.data()})}catch(d){console.error("Error fetching article:",d)}},h=async()=>{try{const d=cx(Hc(ra,"comments"),hx("articleId","==",e),dx("createdAt","desc")),m=(await mx(d)).docs.map(g=>({id:g.id,...g.data()}));s(m)}catch(d){console.error("Error fetching comments:",d)}};e&&(u(),h())},[e]);const a=async u=>{u.preventDefault();try{await mC(Hc(ra,"comments"),{articleId:e,author:o.author,content:o.content,createdAt:new Date().toISOString()}),l({author:"",content:""});const h=cx(Hc(ra,"comments"),hx("articleId","==",e),dx("createdAt","desc")),f=(await mx(h)).docs.map(m=>({id:m.id,...m.data()}));s(f)}catch(h){console.error("Error adding comment:",h)}};return n?v.jsxs("div",{children:[v.jsxs("div",{className:"relative h-[400px] bg-cover bg-center",style:{backgroundImage:`url(${n.imageUrl})`},children:[v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center",children:v.jsxs("div",{className:"text-white",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:n.title}),v.jsxs("div",{className:"flex items-center space-x-6",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(Sk,{className:"h-5 w-5 mr-2"}),new Date(n.createdAt).toLocaleDateString()]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(lP,{className:"h-5 w-5 mr-2"}),n.category]})]})]})})]}),v.jsxs("article",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[v.jsx("div",{className:"prose prose-lg max-w-none",children:n.content.split(`
`).map((u,h)=>v.jsx("p",{children:u},h))}),v.jsxs("div",{className:"mt-12",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Comments"}),v.jsxs("form",{onSubmit:a,className:"mb-8",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),v.jsx("input",{type:"text",value:o.author,onChange:u=>l({...o,author:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comment"}),v.jsx("textarea",{value:o.content,onChange:u=>l({...o,content:u.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),v.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"Post Comment"})]}),v.jsx("div",{className:"space-y-6",children:i.map(u=>v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"font-semibold",children:u.author}),v.jsx("span",{className:"text-sm text-gray-500",children:new Date(u.createdAt).toLocaleDateString()})]}),v.jsx("p",{className:"text-gray-700",children:u.content})]},u.id))})]})]}),v.jsx(fl,{})]}):v.jsx("div",{children:"Loading..."})};var Su=t=>t.type==="checkbox",fs=t=>t instanceof Date,Yt=t=>t==null;const OC=t=>typeof t=="object";var st=t=>!Yt(t)&&!Array.isArray(t)&&OC(t)&&!fs(t),xL=t=>st(t)&&t.target?Su(t.target)?t.target.checked:t.target.value:t,_L=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,EL=(t,e)=>t.has(_L(e)),TL=t=>{const e=t.constructor&&t.constructor.prototype;return st(e)&&e.hasOwnProperty("isPrototypeOf")},A0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mn(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(A0&&(t instanceof Blob||t instanceof FileList))&&(n||st(t)))if(e=n?[]:{},!n&&!TL(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Mn(t[r]));else return t;return e}var cf=t=>Array.isArray(t)?t.filter(Boolean):[],tt=t=>t===void 0,ee=(t,e,n)=>{if(!e||!st(t))return n;const r=cf(e.split(/[,[\].]+?/)).reduce((i,s)=>Yt(i)?i:i[s],t);return tt(r)||r===t?tt(t[e])?n:t[e]:r},fr=t=>typeof t=="boolean",b0=t=>/^\w*$/.test(t),DC=t=>cf(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Fe=(t,e,n)=>{let r=-1;const i=b0(e)?[e]:DC(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let a=n;if(r!==o){const u=t[l];a=st(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(l==="__proto__")return;t[l]=a,t=t[l]}return t};const _x={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Xn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},br={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ie.createContext(null);var kL=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Xn.all&&(e._proxyFormState[o]=!r||Xn.all),t[o]}});return i},ln=t=>st(t)&&!Object.keys(t).length,SL=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return ln(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===Xn.all)},qc=t=>Array.isArray(t)?t:[t];function CL(t){const e=Ie.useRef(t);e.current=t,Ie.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var gr=t=>typeof t=="string",AL=(t,e,n,r,i)=>gr(t)?(r&&e.watch.add(t),ee(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),ee(n,s))):(r&&(e.watchAll=!0),n),bL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Ex=t=>({isOnSubmit:!t||t===Xn.onSubmit,isOnBlur:t===Xn.onBlur,isOnChange:t===Xn.onChange,isOnAll:t===Xn.all,isOnTouch:t===Xn.onTouched}),Tx=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const _a=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=ee(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(_a(l,e))break}else if(st(l)&&_a(l,e))break}}};var IL=(t,e,n)=>{const r=qc(ee(t,n));return Fe(r,"root",e[n]),Fe(t,n,r),t},I0=t=>t.type==="file",Vr=t=>typeof t=="function",Vh=t=>{if(!A0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Kc=t=>gr(t),N0=t=>t.type==="radio",Lh=t=>t instanceof RegExp;const kx={value:!1,isValid:!1},Sx={value:!0,isValid:!0};var VC=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!tt(t[0].attributes.value)?tt(t[0].value)||t[0].value===""?Sx:{value:t[0].value,isValid:!0}:Sx:kx}return kx};const Cx={isValid:!1,value:null};var LC=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Cx):Cx;function Ax(t,e,n="validate"){if(Kc(t)||Array.isArray(t)&&t.every(Kc)||fr(t)&&!t)return{type:n,message:Kc(t)?t:"",ref:e}}var io=t=>st(t)&&!Lh(t)?t:{value:t,message:""},bx=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:l,maxLength:a,minLength:u,min:h,max:d,pattern:f,validate:m,name:g,valueAsNumber:_,mount:T,disabled:w}=t._f,x=ee(e,g);if(!T||w)return{};const C=o?o[0]:s,M=R=>{r&&C.reportValidity&&(C.setCustomValidity(fr(R)?"":R||""),C.reportValidity())},L={},V=N0(s),A=Su(s),E=V||A,S=(_||I0(s))&&tt(s.value)&&tt(x)||Vh(s)&&s.value===""||x===""||Array.isArray(x)&&!x.length,I=bL.bind(null,g,n,L),P=(R,b,we,Pe=br.maxLength,Qe=br.minLength)=>{const be=R?b:we;L[g]={type:R?Pe:Qe,message:be,ref:s,...I(R?Pe:Qe,be)}};if(i?!Array.isArray(x)||!x.length:l&&(!E&&(S||Yt(x))||fr(x)&&!x||A&&!VC(o).isValid||V&&!LC(o).isValid)){const{value:R,message:b}=Kc(l)?{value:!!l,message:l}:io(l);if(R&&(L[g]={type:br.required,message:b,ref:C,...I(br.required,b)},!n))return M(b),L}if(!S&&(!Yt(h)||!Yt(d))){let R,b;const we=io(d),Pe=io(h);if(!Yt(x)&&!isNaN(x)){const Qe=s.valueAsNumber||x&&+x;Yt(we.value)||(R=Qe>we.value),Yt(Pe.value)||(b=Qe<Pe.value)}else{const Qe=s.valueAsDate||new Date(x),be=le=>new Date(new Date().toDateString()+" "+le),q=s.type=="time",oe=s.type=="week";gr(we.value)&&x&&(R=q?be(x)>be(we.value):oe?x>we.value:Qe>new Date(we.value)),gr(Pe.value)&&x&&(b=q?be(x)<be(Pe.value):oe?x<Pe.value:Qe<new Date(Pe.value))}if((R||b)&&(P(!!R,we.message,Pe.message,br.max,br.min),!n))return M(L[g].message),L}if((a||u)&&!S&&(gr(x)||i&&Array.isArray(x))){const R=io(a),b=io(u),we=!Yt(R.value)&&x.length>+R.value,Pe=!Yt(b.value)&&x.length<+b.value;if((we||Pe)&&(P(we,R.message,b.message),!n))return M(L[g].message),L}if(f&&!S&&gr(x)){const{value:R,message:b}=io(f);if(Lh(R)&&!x.match(R)&&(L[g]={type:br.pattern,message:b,ref:s,...I(br.pattern,b)},!n))return M(b),L}if(m){if(Vr(m)){const R=await m(x,e),b=Ax(R,C);if(b&&(L[g]={...b,...I(br.validate,b.message)},!n))return M(b.message),L}else if(st(m)){let R={};for(const b in m){if(!ln(R)&&!n)break;const we=Ax(await m[b](x,e),C,b);we&&(R={...we,...I(b,we.message)},M(we.message),n&&(L[g]=R))}if(!ln(R)&&(L[g]={ref:C,...R},!n))return L}}return M(!0),L};function NL(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=tt(t)?r++:t[e[r++]];return t}function RL(t){for(const e in t)if(t.hasOwnProperty(e)&&!tt(t[e]))return!1;return!0}function ct(t,e){const n=Array.isArray(e)?e:b0(e)?[e]:DC(e),r=n.length===1?t:NL(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(st(r)&&ln(r)||Array.isArray(r)&&RL(r))&&ct(t,n.slice(0,-1)),t}var kp=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},mg=t=>Yt(t)||!OC(t);function hi(t,e){if(mg(t)||mg(e))return t===e;if(fs(t)&&fs(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(fs(s)&&fs(o)||st(s)&&st(o)||Array.isArray(s)&&Array.isArray(o)?!hi(s,o):s!==o)return!1}}return!0}var jC=t=>t.type==="select-multiple",PL=t=>N0(t)||Su(t),Sp=t=>Vh(t)&&t.isConnected,FC=t=>{for(const e in t)if(Vr(t[e]))return!0;return!1};function jh(t,e={}){const n=Array.isArray(t);if(st(t)||n)for(const r in t)Array.isArray(t[r])||st(t[r])&&!FC(t[r])?(e[r]=Array.isArray(t[r])?[]:{},jh(t[r],e[r])):Yt(t[r])||(e[r]=!0);return e}function BC(t,e,n){const r=Array.isArray(t);if(st(t)||r)for(const i in t)Array.isArray(t[i])||st(t[i])&&!FC(t[i])?tt(e)||mg(n[i])?n[i]=Array.isArray(t[i])?jh(t[i],[]):{...jh(t[i])}:BC(t[i],Yt(e)?{}:e[i],n[i]):n[i]=!hi(t[i],e[i]);return n}var ql=(t,e)=>BC(t,e,jh(e)),zC=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>tt(t)?t:e?t===""?NaN:t&&+t:n&&gr(t)?new Date(t):r?r(t):t;function Cp(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return I0(e)?e.files:N0(e)?LC(t.refs).value:jC(e)?[...e.selectedOptions].map(({value:n})=>n):Su(e)?VC(t.refs).value:zC(tt(e.value)?t.ref.value:e.value,t)}var ML=(t,e,n,r)=>{const i={};for(const s of t){const o=ee(e,s);o&&Fe(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Kl=t=>tt(t)?t:Lh(t)?t.source:st(t)?Lh(t.value)?t.value.source:t.value:t;const Ix="AsyncFunction";var OL=t=>(!t||!t.validate)&&!!(Vr(t.validate)&&t.validate.constructor.name===Ix||st(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Ix)),DL=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function Nx(t,e,n){const r=ee(t,n);if(r||b0(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=ee(e,s),l=ee(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var VL=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,LL=(t,e)=>!cf(ee(t,e)).length&&ct(t,e);const jL={mode:Xn.onSubmit,reValidateMode:Xn.onChange,shouldFocusError:!0};function FL(t={}){let e={...jL,...t},n={submitCount:0,isDirty:!1,isLoading:Vr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=st(e.defaultValues)||st(e.values)?Mn(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Mn(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},a,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:kp(),array:kp(),state:kp()},f=Ex(e.mode),m=Ex(e.reValidateMode),g=e.criteriaMode===Xn.all,_=N=>D=>{clearTimeout(u),u=setTimeout(N,D)},T=async N=>{if(!t.disabled&&(h.isValid||N)){const D=e.resolver?ln((await E()).errors):await I(r,!0);D!==n.isValid&&d.state.next({isValid:D})}},w=(N,D)=>{!t.disabled&&(h.isValidating||h.validatingFields)&&((N||Array.from(l.mount)).forEach(F=>{F&&(D?Fe(n.validatingFields,F,D):ct(n.validatingFields,F))}),d.state.next({validatingFields:n.validatingFields,isValidating:!ln(n.validatingFields)}))},x=(N,D=[],F,J,Q=!0,W=!0)=>{if(J&&F&&!t.disabled){if(o.action=!0,W&&Array.isArray(ee(r,N))){const re=F(ee(r,N),J.argA,J.argB);Q&&Fe(r,N,re)}if(W&&Array.isArray(ee(n.errors,N))){const re=F(ee(n.errors,N),J.argA,J.argB);Q&&Fe(n.errors,N,re),LL(n.errors,N)}if(h.touchedFields&&W&&Array.isArray(ee(n.touchedFields,N))){const re=F(ee(n.touchedFields,N),J.argA,J.argB);Q&&Fe(n.touchedFields,N,re)}h.dirtyFields&&(n.dirtyFields=ql(i,s)),d.state.next({name:N,isDirty:R(N,D),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Fe(s,N,D)},C=(N,D)=>{Fe(n.errors,N,D),d.state.next({errors:n.errors})},M=N=>{n.errors=N,d.state.next({errors:n.errors,isValid:!1})},L=(N,D,F,J)=>{const Q=ee(r,N);if(Q){const W=ee(s,N,tt(F)?ee(i,N):F);tt(W)||J&&J.defaultChecked||D?Fe(s,N,D?W:Cp(Q._f)):Pe(N,W),o.mount&&T()}},V=(N,D,F,J,Q)=>{let W=!1,re=!1;const de={name:N};if(!t.disabled){const xe=!!(ee(r,N)&&ee(r,N)._f&&ee(r,N)._f.disabled);if(!F||J){h.isDirty&&(re=n.isDirty,n.isDirty=de.isDirty=R(),W=re!==de.isDirty);const _e=xe||hi(ee(i,N),D);re=!!(!xe&&ee(n.dirtyFields,N)),_e||xe?ct(n.dirtyFields,N):Fe(n.dirtyFields,N,!0),de.dirtyFields=n.dirtyFields,W=W||h.dirtyFields&&re!==!_e}if(F){const _e=ee(n.touchedFields,N);_e||(Fe(n.touchedFields,N,F),de.touchedFields=n.touchedFields,W=W||h.touchedFields&&_e!==F)}W&&Q&&d.state.next(de)}return W?de:{}},A=(N,D,F,J)=>{const Q=ee(n.errors,N),W=h.isValid&&fr(D)&&n.isValid!==D;if(t.delayError&&F?(a=_(()=>C(N,F)),a(t.delayError)):(clearTimeout(u),a=null,F?Fe(n.errors,N,F):ct(n.errors,N)),(F?!hi(Q,F):Q)||!ln(J)||W){const re={...J,...W&&fr(D)?{isValid:D}:{},errors:n.errors,name:N};n={...n,...re},d.state.next(re)}},E=async N=>{w(N,!0);const D=await e.resolver(s,e.context,ML(N||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(N),D},S=async N=>{const{errors:D}=await E(N);if(N)for(const F of N){const J=ee(D,F);J?Fe(n.errors,F,J):ct(n.errors,F)}else n.errors=D;return D},I=async(N,D,F={valid:!0})=>{for(const J in N){const Q=N[J];if(Q){const{_f:W,...re}=Q;if(W){const de=l.array.has(W.name),xe=Q._f&&OL(Q._f);xe&&h.validatingFields&&w([J],!0);const _e=await bx(Q,s,g,e.shouldUseNativeValidation&&!D,de);if(xe&&h.validatingFields&&w([J]),_e[W.name]&&(F.valid=!1,D))break;!D&&(ee(_e,W.name)?de?IL(n.errors,_e,W.name):Fe(n.errors,W.name,_e[W.name]):ct(n.errors,W.name))}!ln(re)&&await I(re,D,F)}}return F.valid},P=()=>{for(const N of l.unMount){const D=ee(r,N);D&&(D._f.refs?D._f.refs.every(F=>!Sp(F)):!Sp(D._f.ref))&&mn(N)}l.unMount=new Set},R=(N,D)=>!t.disabled&&(N&&D&&Fe(s,N,D),!hi(De(),i)),b=(N,D,F)=>AL(N,l,{...o.mount?s:tt(D)?i:gr(N)?{[N]:D}:D},F,D),we=N=>cf(ee(o.mount?s:i,N,t.shouldUnregister?ee(i,N,[]):[])),Pe=(N,D,F={})=>{const J=ee(r,N);let Q=D;if(J){const W=J._f;W&&(!W.disabled&&Fe(s,N,zC(D,W)),Q=Vh(W.ref)&&Yt(D)?"":D,jC(W.ref)?[...W.ref.options].forEach(re=>re.selected=Q.includes(re.value)):W.refs?Su(W.ref)?W.refs.length>1?W.refs.forEach(re=>(!re.defaultChecked||!re.disabled)&&(re.checked=Array.isArray(Q)?!!Q.find(de=>de===re.value):Q===re.value)):W.refs[0]&&(W.refs[0].checked=!!Q):W.refs.forEach(re=>re.checked=re.value===Q):I0(W.ref)?W.ref.value="":(W.ref.value=Q,W.ref.type||d.values.next({name:N,values:{...s}})))}(F.shouldDirty||F.shouldTouch)&&V(N,Q,F.shouldTouch,F.shouldDirty,!0),F.shouldValidate&&le(N)},Qe=(N,D,F)=>{for(const J in D){const Q=D[J],W=`${N}.${J}`,re=ee(r,W);(l.array.has(N)||st(Q)||re&&!re._f)&&!fs(Q)?Qe(W,Q,F):Pe(W,Q,F)}},be=(N,D,F={})=>{const J=ee(r,N),Q=l.array.has(N),W=Mn(D);Fe(s,N,W),Q?(d.array.next({name:N,values:{...s}}),(h.isDirty||h.dirtyFields)&&F.shouldDirty&&d.state.next({name:N,dirtyFields:ql(i,s),isDirty:R(N,W)})):J&&!J._f&&!Yt(W)?Qe(N,W,F):Pe(N,W,F),Tx(N,l)&&d.state.next({...n}),d.values.next({name:o.mount?N:void 0,values:{...s}})},q=async N=>{o.mount=!0;const D=N.target;let F=D.name,J=!0;const Q=ee(r,F),W=()=>D.type?Cp(Q._f):xL(N),re=de=>{J=Number.isNaN(de)||fs(de)&&isNaN(de.getTime())||hi(de,ee(s,F,de))};if(Q){let de,xe;const _e=W(),Nn=N.type===_x.BLUR||N.type===_x.FOCUS_OUT,Ru=!DL(Q._f)&&!e.resolver&&!ee(n.errors,F)&&!Q._f.deps||VL(Nn,ee(n.touchedFields,F),n.isSubmitted,m,f),Ys=Tx(F,l,Nn);Fe(s,F,_e),Nn?(Q._f.onBlur&&Q._f.onBlur(N),a&&a(0)):Q._f.onChange&&Q._f.onChange(N);const El=V(F,_e,Nn,!1),Xi=!ln(El)||Ys;if(!Nn&&d.values.next({name:F,type:N.type,values:{...s}}),Ru)return h.isValid&&(t.mode==="onBlur"?Nn&&T():T()),Xi&&d.state.next({name:F,...Ys?{}:El});if(!Nn&&Ys&&d.state.next({...n}),e.resolver){const{errors:Tl}=await E([F]);if(re(_e),J){const Pu=Nx(n.errors,r,F),Xs=Nx(Tl,r,Pu.name||F);de=Xs.error,F=Xs.name,xe=ln(Tl)}}else w([F],!0),de=(await bx(Q,s,g,e.shouldUseNativeValidation))[F],w([F]),re(_e),J&&(de?xe=!1:h.isValid&&(xe=await I(r,!0)));J&&(Q._f.deps&&le(Q._f.deps),A(F,xe,de,El))}},oe=(N,D)=>{if(ee(n.errors,D)&&N.focus)return N.focus(),1},le=async(N,D={})=>{let F,J;const Q=qc(N);if(e.resolver){const W=await S(tt(N)?N:Q);F=ln(W),J=N?!Q.some(re=>ee(W,re)):F}else N?(J=(await Promise.all(Q.map(async W=>{const re=ee(r,W);return await I(re&&re._f?{[W]:re}:re)}))).every(Boolean),!(!J&&!n.isValid)&&T()):J=F=await I(r);return d.state.next({...!gr(N)||h.isValid&&F!==n.isValid?{}:{name:N},...e.resolver||!N?{isValid:F}:{},errors:n.errors}),D.shouldFocus&&!J&&_a(r,oe,N?Q:l.mount),J},De=N=>{const D={...o.mount?s:i};return tt(N)?D:gr(N)?ee(D,N):N.map(F=>ee(D,F))},Ae=(N,D)=>({invalid:!!ee((D||n).errors,N),isDirty:!!ee((D||n).dirtyFields,N),error:ee((D||n).errors,N),isValidating:!!ee(n.validatingFields,N),isTouched:!!ee((D||n).touchedFields,N)}),$e=N=>{N&&qc(N).forEach(D=>ct(n.errors,D)),d.state.next({errors:N?n.errors:{}})},bn=(N,D,F)=>{const J=(ee(r,N,{_f:{}})._f||{}).ref,Q=ee(n.errors,N)||{},{ref:W,message:re,type:de,...xe}=Q;Fe(n.errors,N,{...xe,...D,ref:J}),d.state.next({name:N,errors:n.errors,isValid:!1}),F&&F.shouldFocus&&J&&J.focus&&J.focus()},Wn=(N,D)=>Vr(N)?d.values.subscribe({next:F=>N(b(void 0,D),F)}):b(N,D,!0),mn=(N,D={})=>{for(const F of N?qc(N):l.mount)l.mount.delete(F),l.array.delete(F),D.keepValue||(ct(r,F),ct(s,F)),!D.keepError&&ct(n.errors,F),!D.keepDirty&&ct(n.dirtyFields,F),!D.keepTouched&&ct(n.touchedFields,F),!D.keepIsValidating&&ct(n.validatingFields,F),!e.shouldUnregister&&!D.keepDefaultValue&&ct(i,F);d.values.next({values:{...s}}),d.state.next({...n,...D.keepDirty?{isDirty:R()}:{}}),!D.keepIsValid&&T()},In=({disabled:N,name:D,field:F,fields:J,value:Q})=>{if(fr(N)&&o.mount||N){const W=N?void 0:tt(Q)?Cp(F?F._f:ee(J,D)._f):Q;Fe(s,D,W),V(D,W,!1,!1,!0)}},xl=(N,D={})=>{let F=ee(r,N);const J=fr(D.disabled)||fr(t.disabled);return Fe(r,N,{...F||{},_f:{...F&&F._f?F._f:{ref:{name:N}},name:N,mount:!0,...D}}),l.mount.add(N),F?In({field:F,disabled:fr(D.disabled)?D.disabled:t.disabled,name:N,value:D.value}):L(N,!0,D.value),{...J?{disabled:D.disabled||t.disabled}:{},...e.progressive?{required:!!D.required,min:Kl(D.min),max:Kl(D.max),minLength:Kl(D.minLength),maxLength:Kl(D.maxLength),pattern:Kl(D.pattern)}:{},name:N,onChange:q,onBlur:q,ref:Q=>{if(Q){xl(N,D),F=ee(r,N);const W=tt(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,re=PL(W),de=F._f.refs||[];if(re?de.find(xe=>xe===W):W===F._f.ref)return;Fe(r,N,{_f:{...F._f,...re?{refs:[...de.filter(Sp),W,...Array.isArray(ee(i,N))?[{}]:[]],ref:{type:W.type,name:N}}:{ref:W}}}),L(N,!1,void 0,W)}else F=ee(r,N,{}),F._f&&(F._f.mount=!1),(e.shouldUnregister||D.shouldUnregister)&&!(EL(l.array,N)&&o.action)&&l.unMount.add(N)}}},Iu=()=>e.shouldFocusError&&_a(r,oe,l.mount),Gs=N=>{fr(N)&&(d.state.next({disabled:N}),_a(r,(D,F)=>{const J=ee(r,F);J&&(D.disabled=J._f.disabled||N,Array.isArray(J._f.refs)&&J._f.refs.forEach(Q=>{Q.disabled=J._f.disabled||N}))},0,!1))},Yi=(N,D)=>async F=>{let J;F&&(F.preventDefault&&F.preventDefault(),F.persist&&F.persist());let Q=Mn(s);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:W,values:re}=await E();n.errors=W,Q=re}else await I(r);if(ct(n.errors,"root"),ln(n.errors)){d.state.next({errors:{}});try{await N(Q,F)}catch(W){J=W}}else D&&await D({...n.errors},F),Iu(),setTimeout(Iu);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ln(n.errors)&&!J,submitCount:n.submitCount+1,errors:n.errors}),J)throw J},_l=(N,D={})=>{ee(r,N)&&(tt(D.defaultValue)?be(N,Mn(ee(i,N))):(be(N,D.defaultValue),Fe(i,N,Mn(D.defaultValue))),D.keepTouched||ct(n.touchedFields,N),D.keepDirty||(ct(n.dirtyFields,N),n.isDirty=D.defaultValue?R(N,Mn(ee(i,N))):R()),D.keepError||(ct(n.errors,N),h.isValid&&T()),d.state.next({...n}))},Qs=(N,D={})=>{const F=N?Mn(N):i,J=Mn(F),Q=ln(N),W=Q?i:J;if(D.keepDefaultValues||(i=F),!D.keepValues){if(D.keepDirtyValues){const re=new Set([...l.mount,...Object.keys(ql(i,s))]);for(const de of Array.from(re))ee(n.dirtyFields,de)?Fe(W,de,ee(s,de)):be(de,ee(W,de))}else{if(A0&&tt(N))for(const re of l.mount){const de=ee(r,re);if(de&&de._f){const xe=Array.isArray(de._f.refs)?de._f.refs[0]:de._f.ref;if(Vh(xe)){const _e=xe.closest("form");if(_e){_e.reset();break}}}}r={}}s=t.shouldUnregister?D.keepDefaultValues?Mn(i):{}:Mn(W),d.array.next({values:{...W}}),d.values.next({values:{...W}})}l={mount:D.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!D.keepIsValid||!!D.keepDirtyValues,o.watch=!!t.shouldUnregister,d.state.next({submitCount:D.keepSubmitCount?n.submitCount:0,isDirty:Q?!1:D.keepDirty?n.isDirty:!!(D.keepDefaultValues&&!hi(N,i)),isSubmitted:D.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Q?{}:D.keepDirtyValues?D.keepDefaultValues&&s?ql(i,s):n.dirtyFields:D.keepDefaultValues&&N?ql(i,N):D.keepDirty?n.dirtyFields:{},touchedFields:D.keepTouched?n.touchedFields:{},errors:D.keepErrors?n.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Js=(N,D)=>Qs(Vr(N)?N(s):N,D);return{control:{register:xl,unregister:mn,getFieldState:Ae,handleSubmit:Yi,setError:bn,_executeSchema:E,_getWatch:b,_getDirty:R,_updateValid:T,_removeUnmounted:P,_updateFieldArray:x,_updateDisabledField:In,_getFieldArray:we,_reset:Qs,_resetDefaultValues:()=>Vr(e.defaultValues)&&e.defaultValues().then(N=>{Js(N,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:N=>{n={...n,...N}},_disableForm:Gs,_subjects:d,_proxyFormState:h,_setErrors:M,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(N){o=N},get _defaultValues(){return i},get _names(){return l},set _names(N){l=N},get _formState(){return n},set _formState(N){n=N},get _options(){return e},set _options(N){e={...e,...N}}},trigger:le,register:xl,handleSubmit:Yi,watch:Wn,setValue:be,getValues:De,reset:Js,resetField:_l,clearErrors:$e,unregister:mn,setError:bn,setFocus:(N,D={})=>{const F=ee(r,N),J=F&&F._f;if(J){const Q=J.refs?J.refs[0]:J.ref;Q.focus&&(Q.focus(),D.shouldSelect&&Q.select())}},getFieldState:Ae}}function UC(t={}){const e=Ie.useRef(),n=Ie.useRef(),[r,i]=Ie.useState({isDirty:!1,isValidating:!1,isLoading:Vr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Vr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...FL(t),formState:r});const s=e.current.control;return s._options=t,CL({subject:s._subjects.state,next:o=>{SL(o,s._proxyFormState,s._updateFormState)&&i({...s._formState})}}),Ie.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Ie.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Ie.useEffect(()=>{t.values&&!hi(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Ie.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Ie.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Ie.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),Ie.useEffect(()=>{e.current&&(e.current.watch=e.current.watch.bind({}))},[r]),e.current.formState=kL(r,s),e.current}const $C=U.createContext(null),R0=()=>{const t=U.useContext($C);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},BL=({children:t})=>{const[e,n]=U.useState(null),s={user:e,login:async(o,l)=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))throw new Error("Please enter a valid email address");if(l.length<6)throw new Error("Password must be at least 6 characters long");if(o==="admin@easyfindshub.com"&&l==="admin123")n({email:o,isAdmin:!0});else throw new Error("Invalid email or password")},logout:async()=>{n(null)}};return v.jsx($C.Provider,{value:s,children:t})},zL=()=>{const{register:t,handleSubmit:e,formState:{errors:n}}=UC(),{login:r}=R0(),i=Kd(),[s,o]=U.useState(""),l=async a=>{try{o(""),await r(a.email,a.password),i("/dashboard")}catch(u){u instanceof Error?o(u.message):o("An unexpected error occurred")}};return v.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-center text-3xl font-bold text-gray-900",children:"Admin Login"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Use admin@easyfindshub.com / admin123"})]}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:e(l),children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),v.jsx("input",{...t("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}}),type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),n.email&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email.message})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),v.jsx("input",{...t("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters long"}}),type:"password",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),n.password&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password.message})]})]}),s&&v.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),v.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})]})]})})};function Ct(t){this.content=t}Ct.prototype={constructor:Ct,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Ct(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ct(n)},addToStart:function(t,e){return new Ct([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ct(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Ct(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ct.from(t),t.size?new Ct(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ct.from(t),t.size?new Ct(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ct.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ct.from=function(t){if(t instanceof Ct)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ct(e)};function HC(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=HC(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function WC(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let u=0,h=Math.min(o.text.length,l.text.length);for(;u<h&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let u=WC(o.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class ${constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],u=l+a.nodeSize;if(u>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let h=l+1;a.nodesBetween(Math.max(0,e-h),Math.min(a.content.size,n-h),r,i+h)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new $(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new $(r,i)}cutByIndex(e,n){return e==n?$.empty:e==0&&n==this.content.length?this:new $(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new $(i,s)}addToStart(e){return new $([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new $(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return HC(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return WC(this,e,n,r)}findIndex(e,n=-1){if(e==0)return yc(0,e);if(e==this.size)return yc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?yc(r+1,o):yc(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return $.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new $(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return $.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new $(n||e,r)}static from(e){if(!e)return $.empty;if(e instanceof $)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new $([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}$.empty=new $([],0);const Ap={index:0,offset:0};function yc(t,e){return Ap.index=t,Ap.offset=e,Ap}function Fh(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Fh(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Fh(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Oe=class gg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Fh(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return gg.none;if(e instanceof gg)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Oe.none=[];class Bh extends Error{}class Y{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=KC(this.content,e+this.openStart,n);return r&&new Y(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Y(qC(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Y.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Y($.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Y(e,r,i)}}Y.empty=new Y($.empty,0,0);function qC(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(qC(s.content,e-i-1,n-i-1)))}function KC(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=KC(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function UL(t,e,n){if(n.openStart>t.depth)throw new Bh("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Bh("Inconsistent open depths");return GC(t,e,n,0)}function GC(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=GC(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Ts(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=$L(n,t);return Ts(s,JC(t,o,l,e,r))}else return Ts(s,zh(t,e,r))}function QC(t,e){if(!e.type.compatibleContent(t.type))throw new Bh("Cannot join "+e.type.name+" onto "+t.type.name)}function yg(t,e,n){let r=t.node(n);return QC(r,e.node(n)),r}function Es(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ea(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Es(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Es(i.child(l),r);e&&e.depth==n&&e.textOffset&&Es(e.nodeBefore,r)}function Ts(t,e){return t.type.checkContent(e),t.copy(e)}function JC(t,e,n,r,i){let s=t.depth>i&&yg(t,e,i+1),o=r.depth>i&&yg(n,r,i+1),l=[];return Ea(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(QC(s,o),Es(Ts(s,JC(t,e,n,r,i+1)),l)):(s&&Es(Ts(s,zh(t,e,i+1)),l),Ea(e,n,i,l),o&&Es(Ts(o,zh(n,r,i+1)),l)),Ea(r,null,i,l),new $(l)}function zh(t,e,n){let r=[];if(Ea(null,t,n,r),t.depth>n){let i=yg(t,e,n+1);Es(Ts(i,zh(t,e,n+1)),r)}return Ea(e,null,n,r),new $(r)}function $L(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy($.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class ru{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Oe.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Uh(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),u=s-a;if(r.push(o,l,i+a),!u||(o=o.child(l),o.isText))break;s=u-1,i+=a+1}return new ru(n,r,s)}static resolveCached(e,n){let r=Rx.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Rx.set(e,r=new HL);let i=r.elts[r.i]=ru.resolve(e,n);return r.i=(r.i+1)%WL,i}}class HL{constructor(){this.elts=[],this.i=0}}const WL=12,Rx=new WeakMap;class Uh{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qL=Object.create(null);let ks=class vg{constructor(e,n,r,i=Oe.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||$.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Fh(this.attrs,n||e.defaultAttrs||qL)&&Oe.sameSet(this.marks,r||Oe.none)}copy(e=null){return e==this.content?this:new vg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new vg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Y.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),u=i.node(o).content.cut(i.pos-l,s.pos-l);return new Y(u,i.depth-o,s.depth-o)}replace(e,n,r){return UL(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return ru.resolveCached(this,e)}resolveNoCache(e){return ru.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),YC(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=$.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Oe.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Oe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=$.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ks.prototype.text=void 0;class $h extends ks{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):YC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $h(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $h(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function YC(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ls{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new KL(e,n);if(r.next==null)return Ls.empty;let i=XC(r);r.next&&r.err("Unexpected trailing text");let s=e3(ZL(i));return t3(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return $.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:h,next:d}=o.next[u];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,l.concat(h));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Ls.empty=new Ls(!0);class KL{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function XC(t){let e=[];do e.push(GL(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function GL(t){let e=[];do e.push(QL(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function QL(t){let e=XL(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=JL(t,e);else break;return e}function Px(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function JL(t,e){let n=Px(t),r=n;return t.eat(",")&&(t.next!="}"?r=Px(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function YL(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function XL(t){if(t.eat("(")){let e=XC(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=YL(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function ZL(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let u={term:a,to:l};return e[o].push(u),u}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,u)=>a.concat(s(u,l)),[]);if(o.type=="seq")for(let a=0;;a++){let u=s(o.exprs[a],l);if(a==o.exprs.length-1)return u;i(u,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let u=0;u<o.min;u++){let h=n();i(s(o.expr,a),h),a=h}if(o.max==-1)i(s(o.expr,a),a);else for(let u=o.min;u<o.max;u++){let h=n();r(a,h),i(s(o.expr,a),h),a=h}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ZC(t,e){return e-t}function Mx(t,e){let n=[];return r(e),n.sort(ZC);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function e3(t){let e=Object.create(null);return n(Mx(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let h=0;h<i.length;h++)i[h][0]==l&&(u=i[h][1]);Mx(t,a).forEach(h=>{u||i.push([l,u=[]]),u.indexOf(h)==-1&&u.push(h)})})});let s=e[r.join(",")]=new Ls(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(ZC);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function t3(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function eA(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function tA(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function nA(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function rA(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new r3(t,r,e[r]);return n}let Ox=class iA{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=rA(e,r.attrs),this.defaultAttrs=eA(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ls.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:tA(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ks(this,this.computeAttrs(e),$.from(n),Oe.setFrom(r))}createChecked(e=null,n,r){return n=$.from(n),this.checkContent(n),new ks(this,this.computeAttrs(e),n,Oe.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=$.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore($.empty,!0);return s?new ks(this,e,n.append(s),Oe.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){nA(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Oe.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new iA(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function n3(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class r3{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?n3(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class hf{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=rA(e,i.attrs),this.excluded=null;let s=eA(this.attrs);this.instance=s?new Oe(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Oe(this,tA(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new hf(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){nA(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class sA{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ct.from(e.nodes),n.marks=Ct.from(e.marks||{}),this.nodes=Ox.compile(this.spec.nodes,this),this.marks=hf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Ls.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Dx(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Dx(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Ox){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new $h(r,r.defaultAttrs,e,Oe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return ks.fromJSON(this,e)}markFromJSON(e){return Oe.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Dx(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function i3(t){return t.tag!=null}function s3(t){return t.style!=null}class Oi{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(i3(i))this.tags.push(i);else if(s3(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Lx(this,n,!1);return r.addAll(e,Oe.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Lx(this,n,!0);return r.addAll(e,Oe.none,n.from,n.to),Y.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(a3(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=jx(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=jx(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Oi(e,Oi.schemaRules(e)))}}const oA={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},o3={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lA={ol:!0,ul:!0},Hh=1,Wh=2,Ta=4;function Vx(t,e,n){return e!=null?(e?Hh:0)|(e==="full"?Wh:0):t&&t.whitespace=="pre"?Hh|Wh:n&~Ta}class vc{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Oe.none,this.match=s||(o&Ta?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore($.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Hh)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=$.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore($.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!oA.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Lx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=Vx(null,n.preserveWhitespace,0)|(r?Ta:0);i?s=new vc(i.type,i.attrs,Oe.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new vc(null,null,Oe.none,!0,null,o):s=new vc(e.schema.topNodeType,null,Oe.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top;if(i.options&Wh||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&Hh)i.options&Wh?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=e.nodeName.toLowerCase(),s;lA.hasOwnProperty(i)&&this.parser.normalizeLists&&l3(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));if(o?o.ignore:o3.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,a=this.top,u=this.needsBlock;if(oA.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let h=o&&o.skip?n:this.readStyles(e,n);h&&this.addAll(e,h),l&&this.sync(a),this.needsBlock=u}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,o,l,o.consuming===!1?s:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],l=o.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=o,!l.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=Oe.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):Fx(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Vx(e,s,o.options);o.options&Ta&&o.content.length==0&&(l|=Ta);let a=Oe.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):Fx(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new vc(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let h=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!h||h.name!=u&&!h.isInGroup(u))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function l3(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&lA.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function a3(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function jx(t){let e={};for(let n in t)e[n]=t[n];return e}function Fx(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:h}=l.edge(a);if(u==e||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class Ks{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=bp(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let u=o.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let u=o.marks[a++],h=this.serializeMark(u,o.isInline,n);h&&(s.push([u,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Gc(bp(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Gc(bp(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Gc(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ks(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Bx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Bx(e.marks)}}function Bx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bp(t){return t.document||window.document}const zx=new WeakMap;function u3(t){let e=zx.get(t);return e===void 0&&zx.set(t,e=c3(t)),e}function c3(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Gc(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=u3(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),u=e[1],h=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){h=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):a.setAttribute(d,u[d])}}for(let d=h;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:m,contentDOM:g}=Gc(t,f,n,r);if(a.appendChild(m),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const aA=65535,uA=Math.pow(2,16);function h3(t,e){return t+e*uA}function Ux(t){return t&aA}function d3(t){return(t-(t&aA))/uA}const cA=1,hA=2,Qc=4,dA=8;class wg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&dA)>0}get deletedBefore(){return(this.delInfo&(cA|Qc))>0}get deletedAfter(){return(this.delInfo&(hA|Qc))>0}get deletedAcross(){return(this.delInfo&Qc)>0}}class wn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&wn.empty)return wn.empty}recover(e){let n=0,r=Ux(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+d3(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+s],h=this.ranges[l+o],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,m=a+i+(f<0?0:h);if(r)return m;let g=e==(n<0?a:d)?null:h3(l/3,e-a),_=e==a?hA:e==d?cA:Qc;return(n<0?e!=a:e!=d)&&(_|=dA),new wg(m,_,g)}i+=h-u}return r?e+i:new wg(e+i,0,null)}touches(e,n){let r=0,i=Ux(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+s],h=a+u;if(e<=h&&l==i*3)return!0;r+=this.ranges[l+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),u=this.ranges[i+n],h=this.ranges[i+r];e(l,l+u,a,a+h),s+=h-u}}invert(){return new wn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?wn.empty:new wn(e<0?[0,-e,0]:[0,0,e])}}wn.empty=new wn([]);class Vo{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Vo(this.maps,this.mirror,e,n)}copy(){return new Vo(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Vo;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new wg(e,i,null)}}const Ip=Object.create(null);class Kt{getMap(){return wn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ip[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ip)throw new RangeError("Duplicate use of step JSON ID "+e);return Ip[e]=n,n.prototype.jsonID=e,n}}class ut{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ut(e,null)}static fail(e){return new ut(null,e)}static fromReplace(e,n,r,i){try{return ut.ok(e.replace(n,r,i))}catch(s){if(s instanceof Bh)return ut.fail(s.message);throw s}}}function P0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(P0(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return $.fromArray(r)}class vi extends Kt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Y(P0(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return ut.fromReplace(e,this.from,this.to,s)}invert(){return new yr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new vi(n.pos,r.pos,this.mark)}merge(e){return e instanceof vi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new vi(n.from,n.to,e.markFromJSON(n.mark))}}Kt.jsonID("addMark",vi);class yr extends Kt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Y(P0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return ut.fromReplace(e,this.from,this.to,r)}invert(){return new vi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new yr(n.pos,r.pos,this.mark)}merge(e){return e instanceof yr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new yr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new yr(n.from,n.to,e.markFromJSON(n.mark))}}Kt.jsonID("removeMark",yr);class wi extends Kt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ut.fromReplace(e,this.pos,this.pos+1,new Y($.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new wi(this.pos,n.marks[i]);return new wi(this.pos,this.mark)}}return new nl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new wi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new wi(n.pos,e.markFromJSON(n.mark))}}Kt.jsonID("addNodeMark",wi);class nl extends Kt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ut.fromReplace(e,this.pos,this.pos+1,new Y($.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new wi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new nl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nl(n.pos,e.markFromJSON(n.mark))}}Kt.jsonID("removeNodeMark",nl);class vt extends Kt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&xg(e,this.from,this.to)?ut.fail("Structure replace would overwrite content"):ut.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new wn([this.from,this.to-this.from,this.slice.size])}invert(e){return new vt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof vt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Y.empty:new Y(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Y.empty:new Y(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vt(n.from,n.to,Y.fromJSON(e,n.slice),!!n.structure)}}Kt.jsonID("replace",vt);class xt extends Kt{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(xg(e,this.from,this.gapFrom)||xg(e,this.gapTo,this.to)))return ut.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ut.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ut.fromReplace(e,this.from,this.to,r):ut.fail("Content does not fit in gap")}getMap(){return new wn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new xt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new xt(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new xt(n.from,n.to,n.gapFrom,n.gapTo,Y.fromJSON(e,n.slice),n.insert,!!n.structure)}}Kt.jsonID("replaceAround",xt);function xg(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function f3(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,u,h)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&h.type.allowsMarkType(r.type)){let f=Math.max(u,e),m=Math.min(u+a.nodeSize,n),g=r.addToSet(d);for(let _=0;_<d.length;_++)d[_].isInSet(g)||(o&&o.to==f&&o.mark.eq(d[_])?o.to=m:i.push(o=new yr(f,m,d[_])));l&&l.to==f?l.to=m:s.push(l=new vi(f,m,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function p3(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof hf){let u=o.marks,h;for(;h=r.isInSet(u);)(a||(a=[])).push(h),u=h.removeFromSet(u)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let u=Math.min(l+o.nodeSize,n);for(let h=0;h<a.length;h++){let d=a[h],f;for(let m=0;m<i.length;m++){let g=i[m];g.step==s-1&&d.eq(i[m].style)&&(f=g)}f?(f.to=u,f.step=s):i.push({style:d,from:Math.max(l,e),to:u,step:s})}}}),i.forEach(o=>t.step(new yr(o.from,o.to,o.style)))}function M0(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let u=s.child(a),h=l+u.nodeSize,d=r.matchType(u.type);if(!d)o.push(new vt(l,h,Y.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new yr(l,h,u.marks[f]));if(i&&u.isText&&n.whitespace!="pre"){let f,m=/\r?\n|\r/g,g;for(;f=m.exec(u.text);)g||(g=new Y($.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new vt(l+f.index,l+f.index+f[0].length,g))}}l=h}if(!r.validEnd){let a=r.fillBefore($.empty,!0);t.replace(l,l,new Y(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function m3(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function wl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!m3(i,s,o))break}return null}function g3(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,u=l,h=$.empty,d=0;for(let g=s,_=!1;g>n;g--)_||r.index(g)>0?(_=!0,h=$.from(r.node(g).copy(h)),d++):a--;let f=$.empty,m=0;for(let g=s,_=!1;g>n;g--)_||i.after(g+1)<i.end(g)?(_=!0,f=$.from(i.node(g).copy(f)),m++):u++;t.step(new xt(a,u,o,l,new Y(h.append(f),d,m),h.size-d,!0))}function O0(t,e,n=null,r=t){let i=y3(t,e),s=i&&v3(r,e);return s?i.map($x).concat({type:e,attrs:n}).concat(s.map($x)):null}function $x(t){return{type:t,attrs:null}}function y3(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function v3(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:o}function w3(t,e,n){let r=$.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=$.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new xt(i,s,i,s,new Y(r,0,0),n.length,!0))}function x3(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&_3(t.doc,t.mapping.slice(s).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?u=!1:!m&&g&&(u=!0)}u===!1&&pA(t,o,l,s),M0(t,t.mapping.slice(s).map(l,1),r,void 0,u===null);let h=t.mapping.slice(s),d=h.map(l,1),f=h.map(l+o.nodeSize,1);return t.step(new xt(d,f,d+1,f-1,new Y($.from(r.create(a,null,o.marks)),0,0),1,!0)),u===!0&&fA(t,o,l,s),!1}})}function fA(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function pA(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function _3(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function E3(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new xt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Y($.from(o),0,0),1,!0))}function Lo(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,h=n-2;u>s;u--,h--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(f,d.childCount),g=r&&r[h+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let _=r&&r[h]||d;if(!d.canReplace(f+1,d.childCount)||!_.type.validContent(m))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function T3(t,e,n=1,r){let i=t.doc.resolve(e),s=$.empty,o=$.empty;for(let l=i.depth,a=i.depth-n,u=n-1;l>a;l--,u--){s=$.from(i.node(l).copy(s));let h=r&&r[u];o=$.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}t.step(new vt(e,e,new Y(s.append(o),n,n),!0))}function Gi(t,e){let n=t.resolve(e),r=n.index();return mA(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function k3(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function mA(t,e){return!!(t&&e&&!t.isLeaf&&k3(t,e))}function df(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&mA(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function S3(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);h&&!d?r=!1:!h&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let h=t.doc.resolve(e+n);pA(t,h.node(),h.before(),l)}o.inlineContent&&M0(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),u=a.map(e-n);if(t.step(new vt(u,a.map(e+n,-1),Y.empty,!0)),r===!0){let h=t.doc.resolve(u);fA(t,h.node(),h.before(),t.steps.length)}return t}function C3(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function gA(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),u=r.node(o),h=!1;if(s==1)h=u.canReplace(a,a,i);else{let d=u.contentMatchAt(a).findWrapping(i.firstChild.type);h=d&&u.canReplaceWith(a,a,d[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function ff(t,e,n=e,r=Y.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return yA(i,s,r)?new vt(e,n,r):new A3(i,s,r).fit()}function yA(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class A3{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=$.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=$.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new Y(s,o,l);return e>-1?new xt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new vt(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Np(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],h,d=null;if(n==1&&(o?u.matchType(o.type)||(d=u.fillBefore($.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:d};if(n==2&&o&&(h=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Np(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Y(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Np(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Y(ia(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Y(ia(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let _=0;_<s.length;_++)this.openFrontierNode(s[_]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,u=0,h=[],{match:d,type:f}=this.frontier[n];if(i){for(let _=0;_<i.childCount;_++)h.push(i.child(_));d=d.matchFragment(i)}let m=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let _=l.child(u),T=d.matchType(_.type);if(!T)break;u++,(u>1||a==0||_.content.size)&&(d=T,h.push(vA(_.mark(f.allowedMarks(_.marks)),u==1?a:0,u==l.childCount?m:-1)))}let g=u==l.childCount;g||(m=-1),this.placed=sa(this.placed,n,$.from(h)),this.frontier[n].match=d,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let _=0,T=l;_<m;_++){let w=T.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),T=w.content}this.unplaced=g?e==0?Y.empty:new Y(ia(o.content,e-1,1),e-1,m<0?o.openEnd:e-1):new Y(ia(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Rp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Rp(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],h=Rp(e,l,u,a,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=sa(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=sa(this.placed,this.depth,$.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore($.empty,!0);n.childCount&&(this.placed=sa(this.placed,this.frontier.length,n))}}function ia(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ia(t.firstChild.content,e-1,n)))}function sa(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(sa(t.lastChild.content,e-1,n)))}function Np(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function vA(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,vA(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore($.empty,!0)))),t.copy(r)}function Rp(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!b3(n,s.content,o)?l:null}function b3(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function I3(t){return t.spec.defining||t.spec.definingForContent}function N3(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(yA(i,s,r))return t.step(new vt(e,n,r));let o=xA(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let f=i.depth,m=i.pos-1;f>0;f--,m--){let g=i.node(f).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(f)>-1?l=f:i.before(f)==m&&o.splice(1,0,-f)}let a=o.indexOf(l),u=[],h=r.openStart;for(let f=r.content,m=0;;m++){let g=f.firstChild;if(u.push(g),m==r.openStart)break;f=g.content}for(let f=h-1;f>=0;f--){let m=u[f],g=I3(m.type);if(g&&!m.sameMarkup(i.node(Math.abs(l)-1)))h=f;else if(g||!m.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let m=(f+h+1)%(r.openStart+1),g=u[m];if(g)for(let _=0;_<o.length;_++){let T=o[(_+a)%o.length],w=!0;T<0&&(w=!1,T=-T);let x=i.node(T-1),C=i.index(T-1);if(x.canReplaceWith(C,C,g.type,g.marks))return t.replace(i.before(T),w?s.after(T):n,new Y(wA(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let m=o[f];m<0||(e=i.before(m),n=s.after(m))}}function wA(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(wA(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore($.empty,!0))}return t}function R3(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=C3(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Y($.from(r),0,0))}function P3(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=xA(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function xA(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class jo extends Kt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ut.fromReplace(e,this.pos,this.pos+1,new Y($.from(i),0,n.isLeaf?0:1))}getMap(){return wn.empty}invert(e){return new jo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new jo(n.pos,n.attr,n.value)}}Kt.jsonID("attr",jo);class iu extends Kt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ut.ok(r)}getMap(){return wn.empty}invert(e){return new iu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new iu(n.attr,n.value)}}Kt.jsonID("docAttr",iu);let rl=class extends Error{};rl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};rl.prototype=Object.create(Error.prototype);rl.prototype.constructor=rl;rl.prototype.name="TransformError";class _A{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new rl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Y.empty){let i=ff(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Y($.from(r),0,0))}delete(e,n){return this.replace(e,n,Y.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return N3(this,e,n,r),this}replaceRangeWith(e,n,r){return R3(this,e,n,r),this}deleteRange(e,n){return P3(this,e,n),this}lift(e,n){return g3(this,e,n),this}join(e,n=1){return S3(this,e,n),this}wrap(e,n){return w3(this,e,n),this}setBlockType(e,n=e,r,i=null){return x3(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return E3(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new jo(e,n,r)),this}setDocAttribute(e,n){return this.step(new iu(e,n)),this}addNodeMark(e,n){return this.step(new wi(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Oe)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new nl(e,n)),this}split(e,n=1,r){return T3(this,e,n,r),this}addMark(e,n,r){return f3(this,e,n,r),this}removeMark(e,n,r){return p3(this,e,n,r),this}clearIncompatible(e,n,r){return M0(this,e,n,r),this}}const Pp=Object.create(null);class fe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new M3(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Y.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:u}=o[l],h=e.mapping.slice(s);e.replaceRange(h.map(a.pos),h.map(u.pos),l?Y.empty:n),l==0&&qx(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),u=a.map(o.pos),h=a.map(l.pos);s?e.deleteRange(u,h):(e.replaceRangeWith(u,h,n),qx(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ce(e):ho(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?ho(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):ho(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new rr(e.node(0))}static atStart(e){return ho(e,e,0,0,1)||new rr(e)}static atEnd(e){return ho(e,e,e.content.size,e.childCount,-1)||new rr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Pp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Pp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Pp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ce.between(this.$anchor,this.$head).getBookmark()}}fe.prototype.visible=!0;class M3{constructor(e,n){this.$from=e,this.$to=n}}let Hx=!1;function Wx(t){!Hx&&!t.parent.inlineContent&&(Hx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ce extends fe{constructor(e,n=e){Wx(e),Wx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return fe.near(r);let i=e.resolve(n.map(this.anchor));return new ce(i.parent.inlineContent?i:r,r)}replace(e,n=Y.empty){if(super.replace(e,n),n==Y.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ce&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new pf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ce(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=fe.findFrom(n,r,!0)||fe.findFrom(n,-r,!0);if(s)n=s.$head;else return fe.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(fe.findFrom(e,-r,!0)||fe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ce(e,n)}}fe.jsonID("text",ce);class pf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new pf(e.map(this.anchor),e.map(this.head))}resolve(e){return ce.between(e.resolve(this.anchor),e.resolve(this.head))}}class se extends fe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?fe.near(s):new se(s)}content(){return new Y($.from(this.node),0,0)}eq(e){return e instanceof se&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new D0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new se(e.resolve(n.anchor))}static create(e,n){return new se(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}se.prototype.visible=!1;fe.jsonID("node",se);class D0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new pf(r,r):new D0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&se.isSelectable(r)?new se(n):fe.near(n)}}class rr extends fe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Y.empty){if(n==Y.empty){e.delete(0,e.doc.content.size);let r=fe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new rr(e)}map(e){return new rr(e)}eq(e){return e instanceof rr}getBookmark(){return O3}}fe.jsonID("all",rr);const O3={map(){return this},resolve(t){return new rr(t)}};function ho(t,e,n,r,i,s=!1){if(e.inlineContent)return ce.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&se.isSelectable(l))return se.create(t,n-(i<0?l.nodeSize:0))}else{let a=ho(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function qx(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof vt||i instanceof xt))return;let s=t.mapping.maps[r],o;s.forEach((l,a,u,h)=>{o==null&&(o=h)}),t.setSelection(fe.near(t.doc.resolve(o),n))}const Kx=1,wc=2,Gx=4;class D3 extends _A{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Kx)&~wc,this.storedMarks=null,this}get selectionSet(){return(this.updated&Kx)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wc,this}ensureMarks(e){return Oe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~wc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Oe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(fe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Gx,this}get scrolledIntoView(){return(this.updated&Gx)>0}}function Qx(t,e){return!e||!t?t:t.bind(e)}class oa{constructor(e,n,r){this.name=e,this.init=Qx(n.init,r),this.apply=Qx(n.apply,r)}}const V3=[new oa("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new oa("selection",{init(t,e){return t.selection||fe.atStart(e.doc)},apply(t){return t.selection}}),new oa("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new oa("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Mp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=V3.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new oa(r.key,r.spec.state,r))})}}class Ao{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,u=i?i[o].state:this,h=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ao(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new D3(this)}static create(e){let n=new Mp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ao(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Mp(this.schema,e.plugins),r=n.fields,i=new Ao(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Mp(e.schema,e.plugins),s=new Ao(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ks.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=fe.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=u.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function EA(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=EA(i,e,{})),n[r]=i}return n}class Dt{constructor(e){this.spec=e,this.props={},e.props&&EA(e.props,this,this.props),this.key=e.key?e.key.key:TA("plugin")}getState(e){return e[this.key]}}const Op=Object.create(null);function TA(t){return t in Op?t+"$"+ ++Op[t]:(Op[t]=0,t+"$")}class An{constructor(e="key"){this.key=TA(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const bt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},su=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let _g=null;const Pr=function(t,e,n){let r=_g||(_g=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},L3=function(){_g=null},js=function(t,e,n,r){return n&&(Jx(t,e,n,r,-1)||Jx(t,e,n,r,1))},j3=/^(img|br|input|textarea|hr)$/i;function Jx(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:jn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Cu(t)||j3.test(t.nodeName)||t.contentEditable=="false")return!1;e=bt(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?jn(t):0}else return!1}}function jn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function F3(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=jn(t)}else if(t.parentNode&&!Cu(t))e=bt(t),t=t.parentNode;else return null}}function B3(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Cu(t))e=bt(t)+1,t=t.parentNode;else return null}}function z3(t,e,n){for(let r=e==0,i=e==jn(t);r||i;){if(t==n)return!0;let s=bt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==jn(t)}}function Cu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const mf=function(t){return t.focusNode&&js(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ls(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function U3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $3(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(jn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(jn(r.startContainer),r.startOffset)}}}const kr=typeof navigator<"u"?navigator:null,Yx=typeof document<"u"?document:null,Qi=kr&&kr.userAgent||"",Eg=/Edge\/(\d+)/.exec(Qi),kA=/MSIE \d/.exec(Qi),Tg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Qi),pn=!!(kA||Tg||Eg),Di=kA?document.documentMode:Tg?+Tg[1]:Eg?+Eg[1]:0,or=!pn&&/gecko\/(\d+)/i.test(Qi);or&&+(/Firefox\/(\d+)/.exec(Qi)||[0,0])[1];const kg=!pn&&/Chrome\/(\d+)/.exec(Qi),Wt=!!kg,SA=kg?+kg[1]:0,Zt=!pn&&!!kr&&/Apple Computer/.test(kr.vendor),il=Zt&&(/Mobile\/\w+/.test(Qi)||!!kr&&kr.maxTouchPoints>2),On=il||(kr?/Mac/.test(kr.platform):!1),H3=kr?/Win/.test(kr.platform):!1,Yn=/Android \d/.test(Qi),Au=!!Yx&&"webkitFontSmoothing"in Yx.documentElement.style,W3=Au?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function q3(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ir(t,e){return typeof t=="number"?t:t[e]}function K3(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Xx(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=su(o)){if(o.nodeType!=1)continue;let l=o,a=l==s.body,u=a?q3(s):K3(l),h=0,d=0;if(e.top<u.top+Ir(r,"top")?d=-(u.top-e.top+Ir(i,"top")):e.bottom>u.bottom-Ir(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+Ir(i,"top")-u.top:e.bottom-u.bottom+Ir(i,"bottom")),e.left<u.left+Ir(r,"left")?h=-(u.left-e.left+Ir(i,"left")):e.right>u.right-Ir(r,"right")&&(h=e.right-u.right+Ir(i,"right")),h||d)if(a)s.defaultView.scrollBy(h,d);else{let f=l.scrollLeft,m=l.scrollTop;d&&(l.scrollTop+=d),h&&(l.scrollLeft+=h);let g=l.scrollLeft-f,_=l.scrollTop-m;e={left:e.left-g,top:e.top-_,right:e.right-g,bottom:e.bottom-_}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function G3(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:CA(t.dom)}}function CA(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=su(r));return e}function Q3({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;AA(n,r==0?0:r-e)}function AA(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let so=null;function J3(t){if(t.setActive)return t.setActive();if(so)return t.focus(so);let e=CA(t);t.focus(so==null?{get preventScroll(){return so={preventScroll:!0},!0}}:void 0),so||(so=!1,AA(e,0))}function bA(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,u;for(let h=t.firstChild,d=0;h;h=h.nextSibling,d++){let f;if(h.nodeType==1)f=h.getClientRects();else if(h.nodeType==3)f=Pr(h).getClientRects();else continue;for(let m=0;m<f.length;m++){let g=f[m];if(g.top<=o&&g.bottom>=l){o=Math.max(g.bottom,o),l=Math.min(g.top,l);let _=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(_<r){n=h,r=_,i=_&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,h.nodeType==1&&_&&(s=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=h,u={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(s=d+1)}}return!n&&a&&(n=a,i=u,r=0),n&&n.nodeType==3?Y3(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:bA(n,i)}function Y3(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ni(r,1);if(s.top!=s.bottom&&V0(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function V0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function X3(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Z3(t,e,n){let{node:r,offset:i}=bA(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function ej(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function IA(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(V0(e,u))return IA(o,e,u)}}if((s=(s+1)%r)==i)break}return t}function tj(t,e){let n=t.dom.ownerDocument,r,i=0,s=$3(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!V0(e,u)||(o=IA(t.dom,e,u),!o))return null}if(Zt)for(let u=o;r&&u;u=su(u))u.draggable&&(r=void 0);if(o=X3(o,e),r){if(or&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],d;h.nodeName=="IMG"&&(d=h.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;Au&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=ej(t,r,i,e))}l==null&&(l=Z3(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Zx(t){return t.top<t.bottom||t.left<t.right}function ni(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Zx(r))return r}return Array.prototype.find.call(n,Zx)||t.getBoundingClientRect()}const nj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function NA(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Au||or;if(r.nodeType==3)if(o&&(nj.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=ni(Pr(r,i,i),n);if(or&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=ni(Pr(r,i-1,i-1),-1);if(u.top==a.top){let h=ni(Pr(r,i,i+1),-1);if(h.top!=a.top)return Gl(h,h.left<u.left)}}return a}else{let a=i,u=i,h=n<0?1:-1;return n<0&&!i?(u++,h=-1):n>=0&&i==r.nodeValue.length?(a--,h=1):n<0?a--:u++,Gl(ni(Pr(r,a,u),h),h<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==jn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Dp(a.getBoundingClientRect(),!1)}if(s==null&&i<jn(r)){let a=r.childNodes[i];if(a.nodeType==1)return Dp(a.getBoundingClientRect(),!0)}return Dp(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==jn(r))){let a=r.childNodes[i-1],u=a.nodeType==3?Pr(a,jn(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return Gl(ni(u,1),!1)}if(s==null&&i<jn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?Pr(a,0,o?0:1):a.nodeType==1?a:null:null;if(u)return Gl(ni(u,-1),!0)}return Gl(ni(r.nodeType==3?Pr(r):r,-n),n>=0)}function Gl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Dp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function RA(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function rj(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return RA(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=NA(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Pr(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let h=a[u];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const ij=/[\u0590-\u08ac]/;function sj(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!ij.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:RA(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:h,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:_}=t.domSelectionRange(),T=g&&!m.contains(g.nodeType==1?g:g.parentNode)||a==g&&u==_;try{l.collapse(h,d),a&&(a!=h||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),T}):r.pos==r.start()||r.pos==r.end()}let e_=null,t_=null,n_=!1;function oj(t,e,n){return e_==e&&t_==n?n_:(e_=e,t_=n,n_=n=="up"||n=="down"?rj(t,e,n):sj(t,e,n))}const Un=0,r_=1,ps=2,Sr=3;class bu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Un,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>bt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof MA){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof PA&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?bt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?bt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],u=o+a.size;if(i==-1&&e<=u){let h=o+a.border;if(e>=h&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,h);e=o;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=bt(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let h=l+1;h<this.children.length;h++){let d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=bt(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,m=0;f<this.children.length;f++){let g=this.children[f],_=m+g.size;if(s>m&&o<_)return g.setSelection(e-m-g.border,n-m-g.border,r,i);m=_}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.getSelection(),h=!1;if((or||Zt)&&e==n){let{node:f,offset:m}=l;if(f.nodeType==3){if(h=!!(m&&f.nodeValue[m-1]==`
`),h&&m==f.nodeValue.length)for(let g=f,_;g;g=g.parentNode){if(_=g.nextSibling){_.nodeName=="BR"&&(l=a={node:_.parentNode,offset:bt(_)+1});break}let T=g.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let g=f.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(or&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||h&&Zt)&&js(l.node,l.offset,u.anchorNode,u.anchorOffset)&&js(a.node,a.offset,u.focusNode,u.focusOffset))return;let d=!1;if((u.extend||e==n)&&!h){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let m=l;l=a,a=m}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?ps:r_,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Sr:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ps:Sr}r=o}this.dirty=ps}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ps:r_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class PA extends bu{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Un&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class lj extends bu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Fs extends bu{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Ks.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Fs(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Sr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Sr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Un){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Un}}slice(e,n,r){let i=Fs.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Cg(s,n,o,r)),e>0&&(s=Cg(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}}class Vi extends bu{constructor(e,n,r,i,s,o,l,a,u){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,u=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),h=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:d}=Ks.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let f=h;return h=VA(h,r,n),u?a=new aj(e,n,r,i,h,d||null,f,u,s,o+1):n.isText?new gf(e,n,r,i,h,f,s):new Vi(e,n,r,i,h,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>$.empty)}return e}matchesNode(e,n,r){return this.dirty==Un&&e.eq(this.node)&&qh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new cj(this,o&&o.node,e);fj(this.node,this.innerDeco,(u,h,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(h==this.node.childCount?Oe.none:this.node.child(h).marks,r,e),a.placeWidget(u,e,i)},(u,h,d,f)=>{a.syncToMarks(u.marks,r,e);let m;a.findNodeMatch(u,h,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(m=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(u,h,d,m,e)||a.updateNextNode(u,h,d,e,f,i)||a.addNode(u,h,d,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==ps)&&(o&&this.protectLocalComposition(e,o),OA(this.contentDOM,this.children,e),il&&pj(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ce)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=mj(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new lj(this,s,n,i);e.input.compositionNodes.push(o),this.children=Cg(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Sr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Un}updateOuterDeco(e){if(qh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=DA(this.dom,this.nodeDOM,Sg(this.outerDeco,this.node,n),Sg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function i_(t,e,n,r,i){VA(r,e,t);let s=new Vi(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class gf extends Vi{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Sr||this.dirty!=Un&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Un||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Un,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new gf(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Sr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class MA extends bu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Un&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class aj extends Vi{constructor(e,n,r,i,s,o,l,a,u,h){super(e,n,r,i,s,o,l,u,h),this.spec=a}update(e,n,r,i){if(this.dirty==Sr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function OA(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=s_(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof Fs){let a=r?r.previousSibling:t.lastChild;OA(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=s_(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ka=function(t){t&&(this.nodeName=t)};ka.prototype=Object.create(null);const ms=[new ka];function Sg(t,e,n){if(t.length==0)return ms;let r=n?ms[0]:new ka,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new ka(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new ka(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function DA(t,e,n,r){if(n==ms&&r==ms)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=ms[0]),i=a}uj(i,l||ms[0],o)}return i}function uj(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function VA(t,e,n){return DA(t,t,ms,Sg(e,n,t.nodeType!=1))}function qh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function s_(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class cj{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hj(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Un,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=Fs.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Sr&&o.dom==o.contentDOM&&(o.dirty=ps),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Vi){let u=this.preMatch.matched.get(a);if(u!=null&&u!=s)return!1;let h=a.dom,d,f=this.isLocked(h)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Sr&&qh(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=h&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ps,d.updateChildren(i,o+1),d.dirty=Un),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!qh(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Vi.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=Vi.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new PA(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Fs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof gf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Zt||Wt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new MA(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hj(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof Fs)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function dj(t,e){return t.type.side-e.type.side}function fj(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let h=t.child(u);r(h,i,e.forChild(s,h),u),s+=h.nodeSize}return}let o=0,l=[],a=null;for(let u=0;;){let h,d;for(;o<i.length&&i[o].to==s;){let T=i[o++];T.widget&&(h?(d||(d=[h])).push(T):h=T)}if(h)if(d){d.sort(dj);for(let T=0;T<d.length;T++)n(d[T],u,!!a)}else n(h,u,!!a);let f,m;if(a)m=-1,f=a,a=null;else if(u<t.childCount)m=u,f=t.child(u++);else break;for(let T=0;T<l.length;T++)l[T].to<=s&&l.splice(T--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let g=s+f.nodeSize;if(f.isText){let T=g;o<i.length&&i[o].from<T&&(T=i[o].from);for(let w=0;w<l.length;w++)l[w].to<T&&(T=l[w].to);T<g&&(a=f.cut(T-s),f=f.cut(0,T-s),g=T,m=-1)}else for(;o<i.length&&i[o].to<g;)o++;let _=f.isInline&&!f.isLeaf?l.filter(T=>!T.inline):l.slice();r(f,_,e.forChild(s,f),m),s=g}}function pj(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function mj(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;a+=u.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Cg(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],u=l,h=l+=a.size;u>=n||h<=e?s.push(a):(u<e&&s.push(a.slice(0,e-u,r)),i&&(s.push(i),i=void 0),h>n&&s.push(a.slice(n-u,a.size,r)))}return s}function L0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,u;if(mf(n)){for(a=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&se.isSelectable(d)&&i.parent&&!(d.isInline&&z3(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new se(o==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[a,o]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let h=r.resolve(a);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;u=j0(t,h,l,d)}return u}function LA(t){return t.editable?t.hasFocus():FA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Br(t,e=!1){let n=t.state.selection;if(jA(t,n),!!LA(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Wt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&js(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)yj(t);else{let{anchor:r,head:i}=n,s,o;o_&&!(n instanceof ce)&&(n.$from.parent.inlineContent||(s=l_(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=l_(t,n.to))),t.docView.setSelection(r,i,t.root,e),o_&&(s&&a_(s),o&&a_(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gj(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const o_=Zt||Wt&&SA<63;function l_(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Zt&&i&&i.contentEditable=="false")return Vp(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Vp(i);if(s)return Vp(s)}}function Vp(t){return t.contentEditable="true",Zt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function a_(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gj(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!LA(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function yj(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,bt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&pn&&Di<=11&&(r.disabled=!0,r.disabled=!1)}function jA(t,e){if(e instanceof se){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(u_(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else u_(t)}function u_(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function j0(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ce.between(e,n,r)}function c_(t){return t.editable&&!t.hasFocus()?!1:FA(t)}function FA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vj(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return js(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Ag(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&fe.findFrom(s,e)}function si(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function h_(t,e,n){let r=t.state.selection;if(r instanceof ce)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return si(t,new ce(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Ag(t.state,e);return i&&i instanceof se?si(t,i):!1}else if(!(On&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?se.isSelectable(s)?si(t,new se(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Au?si(t,new ce(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof se&&r.node.isInline)return si(t,new ce(e>0?r.$to:r.$from));{let i=Ag(t.state,e);return i?si(t,i):!1}}}function Kh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Sa(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function oo(t,e){return e<0?wj(t):xj(t)}function wj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(or&&n.nodeType==1&&r<Kh(n)&&Sa(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Sa(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(BA(n))break;{let l=n.previousSibling;for(;l&&Sa(l,-1);)i=n.parentNode,s=bt(l),l=l.previousSibling;if(l)n=l,r=Kh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?bg(t,n,r):i&&bg(t,i,s)}function xj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Kh(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Sa(l,1))s=n,o=++r;else break}else{if(BA(n))break;{let l=n.nextSibling;for(;l&&Sa(l,1);)s=l.parentNode,o=bt(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Kh(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&bg(t,s,o)}function BA(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function _j(t,e){for(;t&&e==t.childNodes.length&&!Cu(t);)e=bt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Ej(t,e){for(;t&&!e&&!Cu(t);)e=bt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function bg(t,e,n){if(e.nodeType!=3){let s,o;(o=_j(e,n))?(e=o,n=0):(s=Ej(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(mf(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Br(t)},50)}function d_(t,e){let n=t.state.doc.resolve(e);if(!(Wt||H3)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function f_(t,e,n){let r=t.state.selection;if(r instanceof ce&&!r.empty||n.indexOf("s")>-1||On&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Ag(t.state,e);if(o&&o instanceof se)return si(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof rr?fe.near(o,e):fe.findFrom(o,e);return l?si(t,l):!1}return!1}function p_(t,e){if(!(t.state.selection instanceof ce))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function m_(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Tj(t){if(!Zt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;m_(t,r,"true"),setTimeout(()=>m_(t,r,"false"),20)}return!1}function kj(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Sj(t,e){let n=e.keyCode,r=kj(e);if(n==8||On&&n==72&&r=="c")return p_(t,-1)||oo(t,-1);if(n==46&&!e.shiftKey||On&&n==68&&r=="c")return p_(t,1)||oo(t,1);if(n==13||n==27)return!0;if(n==37||On&&n==66&&r=="c"){let i=n==37?d_(t,t.state.selection.from)=="ltr"?-1:1:-1;return h_(t,i,r)||oo(t,i)}else if(n==39||On&&n==70&&r=="c"){let i=n==39?d_(t,t.state.selection.from)=="ltr"?1:-1:1;return h_(t,i,r)||oo(t,i)}else{if(n==38||On&&n==80&&r=="c")return f_(t,-1,r)||oo(t,-1);if(n==40||On&&n==78&&r=="c")return Tj(t)||f_(t,1,r)||oo(t,1);if(r==(On?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function zA(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let o=t.someProp("clipboardSerializer")||Ks.fromSchema(t.state.schema),l=KA(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let u=a.firstChild,h,d=0;for(;u&&u.nodeType==1&&(h=qA[u.nodeName.toLowerCase()]);){for(let m=h.length-1;m>=0;m--){let g=l.createElement(h[m]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function UA(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new Y($.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Y.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:m}=t.state,g=Ks.fromSchema(m);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(_=>{let T=o.appendChild(document.createElement("p"));_&&T.appendChild(g.serializeNode(m.text(_,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=Ij(n),Au&&Nj(o);let u=o&&o.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let d=+h[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Oi.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||h),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Cj.test(f.parentNode.nodeName)?{ignore:!0}:null}})),h)l=Rj(g_(l,+h[1],+h[2]),h[4]);else if(l=Y.maxOpen(Aj(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let m=l.content.firstChild;d<l.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=l.content.lastChild;f<l.openEnd&&!m.type.spec.isolating;f++,m=m.lastChild);l=g_(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const Cj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Aj(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),u;if(!a)return o=null;if(u=o.length&&s.length&&HA(a,s,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=WA(o[o.length-1],s.length));let h=$A(l,a);o.push(h),i=i.matchType(h.type),s=a}}),o)return $.from(o)}return t}function $A(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,$.from(t));return t}function HA(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=HA(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append($.from($A(n,t,i+1))))}}function WA(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,WA(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore($.empty,!0);return t.copy(n.append(r))}function Ig(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=Ig(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore($.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function g_(t,e,n){return e<t.openStart&&(t=new Y(Ig(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Y(Ig(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const qA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let y_=null;function KA(){return y_||(y_=document.implementation.createHTMLDocument("title"))}function bj(t){let e=window.trustedTypes;return e?e.createPolicy("detachedDocument",{createHTML:n=>n}).createHTML(t):t}function Ij(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=KA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&qA[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=bj(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Nj(t){let e=t.querySelectorAll(Wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Rj(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=$.from(a.create(r[l+1],i)),s++,o++}return new Y(i,s,o)}const en={},tn={},Pj={touchstart:!0,touchmove:!0};class Mj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Oj(t){for(let e in en){let n=en[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Vj(t,r)&&!F0(t,r)&&(t.editable||!(r.type in tn))&&n(t,r)},Pj[e]?{passive:!0}:void 0)}Zt&&t.dom.addEventListener("input",()=>null),Ng(t)}function xi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Dj(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ng(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>F0(t,r))})}function F0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Vj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Lj(t,e){!F0(t,e)&&en[e.type]&&(t.editable||!(e.type in tn))&&en[e.type](t,e)}tn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!QA(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Yn&&Wt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),il&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,ls(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Sj(t,n)?n.preventDefault():xi(t,"key")};tn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};tn.keypress=(t,e)=>{let n=e;if(QA(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||On&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ce)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function yf(t){return{left:t.clientX,top:t.clientY}}function jj(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function B0(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Fo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Fj(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&se.isSelectable(r)?(Fo(t,new se(n)),!0):!1}function Bj(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof se&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(se.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Fo(t,se.create(t.state.doc,i)),!0):!1}function zj(t,e,n,r,i){return B0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Bj(t,n):Fj(t,n))}function Uj(t,e,n,r){return B0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function $j(t,e,n,r){return B0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Hj(t,n,r)}function Hj(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Fo(t,ce.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Fo(t,ce.create(r,l+1,l+1+o.content.size));else if(se.isSelectable(o))Fo(t,se.create(r,l));else continue;return!0}}function z0(t){return Gh(t)}const GA=On?"metaKey":"ctrlKey";en.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=z0(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&jj(n,t.input.lastClick)&&!n[GA]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(yf(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Wj(t,o,n,!!r)):(s=="doubleClick"?Uj:$j)(t,o.pos,o.inside,n)?n.preventDefault():xi(t,"pointer"))};class Wj{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[GA],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let h=e.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof se&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&or&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),xi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Br(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(yf(e))),this.updateAllowDefault(e),this.allowDefault||!n?xi(this.view,"pointer"):zj(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Zt&&this.mightDrag&&!this.mightDrag.node.isAtom||Wt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Fo(this.view,fe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):xi(this.view,"pointer")}move(e){this.updateAllowDefault(e),xi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}en.touchstart=t=>{t.input.lastTouch=Date.now(),z0(t),xi(t,"pointer")};en.touchmove=t=>{t.input.lastTouch=Date.now(),xi(t,"pointer")};en.contextmenu=t=>z0(t);function QA(t,e){return t.composing?!0:Zt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const qj=Yn?5e3:-1;tn.compositionstart=tn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ce&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Gh(t,!0),t.markCursor=null;else if(Gh(t,!e.selection.empty),or&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}JA(t,qj)};tn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,JA(t,20))};function JA(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Gh(t),e))}function YA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Gj());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Kj(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=F3(e.focusNode,e.focusOffset),r=B3(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function Gj(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Gh(t,e=!1){if(!(Yn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),YA(t),e||t.docView&&t.docView.dirty){let n=L0(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Qj(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const ou=pn&&Di<15||il&&W3<604;en.copy=tn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=ou?null:n.clipboardData,o=r.content(),{dom:l,text:a}=zA(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):Qj(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Jj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Yj(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?lu(t,r.value,null,i,e):lu(t,r.textContent,r.innerHTML,i,e)},50)}function lu(t,e,n,r,i){let s=UA(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||Y.empty)))return!0;if(!s)return!1;let o=Jj(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function XA(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}tn.paste=(t,e)=>{let n=e;if(t.composing&&!Yn)return;let r=ou?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&lu(t,XA(r),r.getData("text/html"),i,n)?n.preventDefault():Yj(t,n)};class ZA{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const eb=On?"altKey":"ctrlKey";en.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(yf(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof se?i.to-1:i.to))){if(r&&r.mightDrag)o=se.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=se.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:u,slice:h}=zA(t,l);(!n.dataTransfer.files.length||!Wt||SA>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ou?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",ou||n.dataTransfer.setData("text/plain",u),t.dragging=new ZA(h,!n[eb],o)};en.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};tn.dragover=tn.dragenter=(t,e)=>e.preventDefault();tn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(yf(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",g=>{o=g(o,t)}):o=UA(t,XA(n.dataTransfer),ou?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!n[eb]);if(t.someProp("handleDrop",g=>g(t,n,o||Y.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?gA(t.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let u=t.state.tr;if(l){let{node:g}=r;g?g.replace(u):u.deleteSelection()}let h=u.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(h,h,o.content.firstChild):u.replaceRange(h,h,o),u.doc.eq(f))return;let m=u.doc.resolve(h);if(d&&se.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new se(m));else{let g=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((_,T,w,x)=>g=x),u.setSelection(j0(t,m,u.doc.resolve(g)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};en.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Br(t)},20))};en.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};en.beforeinput=(t,e)=>{if(Wt&&Yn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,ls(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in tn)en[t]=tn[t];function au(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Qh{constructor(e,n){this.toDOM=e,this.spec=n||Ss,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Bn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Qh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&au(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Li{constructor(e,n){this.attrs=e,this.spec=n||Ss}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Bn(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Li&&au(this.attrs,e.attrs)&&au(this.spec,e.spec)}static is(e){return e.type instanceof Li}destroy(){}}class U0{constructor(e,n){this.attrs=e,this.spec=n||Ss}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Bn(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof U0&&au(this.attrs,e.attrs)&&au(this.spec,e.spec)}destroy(){}}class Bn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Bn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Bn(e,e,new Qh(n,r))}static inline(e,n,r,i){return new Bn(e,n,new Li(r,i))}static node(e,n,r,i){return new Bn(e,n,new U0(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Li}get widget(){return this.type instanceof Qh}}const fo=[],Ss={};class dt{constructor(e,n){this.local=e.length?e:fo,this.children=n.length?n:fo}static create(e,n){return n.length?Jh(n,e,0,Ss):zt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==zt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ss)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?Xj(this.children,o||[],e,n,r,i,s):o?new dt(o.sort(Cs),fo):zt}add(e,n){return n.length?this==zt?dt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let u=a+r,h;if(h=nb(n,l,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,h,u+1):i.splice(s,0,a,a+l.nodeSize,Jh(h,l,u+1,Ss)),s+=3}});let o=tb(s?rb(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new dt(o.length?this.local.concat(o).sort(Cs):this.local,i||this.children)}remove(e){return e.length==0||this==zt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let h=0,d;h<e.length;h++)(d=e[h])&&d.from>l&&d.to<a&&(e[h]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,l+1);u!=zt?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new dt(i,r):zt}forChild(e,n){if(this==zt)return this;if(n.isLeaf)return dt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof Li){let u=Math.max(s,a.from)-s,h=Math.min(o,a.to)-s;u<h&&(i||(i=[])).push(a.copy(u,h))}}if(i){let l=new dt(i.sort(Cs),fo);return r?new di([l,r]):l}return r||zt}eq(e){if(this==e)return!0;if(!(e instanceof dt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return $0(this.localsInner(e))}localsInner(e){if(this==zt)return fo;if(e.inlineContent||!this.local.some(Li.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Li||n.push(this.local[r]);return n}forEachSet(e){e(this)}}dt.empty=new dt([],[]);dt.removeOverlap=$0;const zt=dt.empty;class di{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ss));return di.from(r)}forChild(e,n){if(n.isLeaf)return dt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=zt&&(s instanceof di?r=r.concat(s.members):r.push(s))}return di.from(r)}eq(e){if(!(e instanceof di)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?$0(r?n:n.sort(Cs)):fo}static from(e){switch(e.length){case 0:return zt;case 1:return e[0];default:return new di(e.every(n=>n instanceof dt)?e:e.reduce((n,r)=>n.concat(r instanceof dt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Xj(t,e,n,r,i,s,o){let l=t.slice();for(let u=0,h=s;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,m,g,_)=>{let T=_-g-(m-f);for(let w=0;w<l.length;w+=3){let x=l[w+1];if(x<0||f>x+h-d)continue;let C=l[w]+h-d;m>=C?l[w+1]=f<=C?-2:-1:f>=h&&T&&(l[w]+=T,l[w+1]+=T)}d+=T}),h=n.maps[u].map(h,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let h=n.map(t[u]+s),d=h-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+s,-1),m=f-i,{index:g,offset:_}=r.content.findIndex(d),T=r.maybeChild(g);if(T&&_==d&&_+T.nodeSize==m){let w=l[u+2].mapInner(n,T,h+1,t[u]+s+1,o);w!=zt?(l[u]=d,l[u+1]=m,l[u+2]=w):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=Zj(l,t,e,n,i,s,o),h=Jh(u,r,0,o);e=h.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<h.children.length;d+=3){let m=h.children[d];for(;f<l.length&&l[f]<m;)f+=3;l.splice(f,0,h.children[d],h.children[d+1],h.children[d+2])}}return new dt(e.sort(Cs),l)}function tb(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Bn(i.from+e,i.to+e,i.type))}return n}function Zj(t,e,n,r,i,s,o){function l(a,u){for(let h=0;h<a.local.length;h++){let d=a.local[h].map(r,i,u);d?n.push(d):o.onRemove&&o.onRemove(a.local[h].spec)}for(let h=0;h<a.children.length;h+=3)l(a.children[h+2],a.children[h]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function nb(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function rb(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Jh(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let u=nb(t,l,a+n);if(u){s=!0;let h=Jh(u,l,n+a+1,r);h!=zt&&i.push(a,a+l.nodeSize,h)}});let o=tb(s?rb(t):t,-n).sort(Cs);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new dt(o,i):zt}function Cs(t,e){return t.from-e.from||t.to-e.to}function $0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),v_(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),v_(e,i,r.copy(s.from,r.to)));break}}}return e}function v_(t,e,n){for(;e<t.length&&Cs(n,t[e])>0;)e++;t.splice(e,0,n)}function Lp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=zt&&e.push(r)}),t.cursorWrapper&&e.push(dt.create(t.state.doc,[t.cursorWrapper.deco])),di.from(e)}const eF={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tF=pn&&Di<=11;class nF{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class rF{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new nF,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);pn&&Di<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),tF&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,eF)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(c_(this.view)){if(this.suppressingSelectionUpdates)return Br(this.view);if(pn&&Di<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&js(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=su(s))n.add(s);for(let s=e.anchorNode;s;s=su(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&c_(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let h=0;h<n.length;h++){let d=this.registerMutation(n[h],a);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(or&&a.length){let h=a.filter(d=>d.nodeName=="BR");if(h.length==2){let[d,f]=h;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of h){let m=f.parentNode;m&&m.nodeName=="LI"&&(!d||oF(e,d)!=m)&&f.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&mf(r)&&(u=L0(e))&&u.eq(fe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Br(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),iF(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Br(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let d=e.addedNodes[h];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(pn&&Di<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:d,nextSibling:f}=e.addedNodes[h];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?bt(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?bt(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let w_=new WeakMap,x_=!1;function iF(t){if(!w_.has(t)&&(w_.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=or,x_)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),x_=!0}}function __(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return js(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function sF(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return __(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?__(t,n):null}function oF(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function lF(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,h=a.anchorNode;if(h&&t.dom.contains(h.nodeType==1?h:h.parentNode)&&(u=[{node:h,offset:a.anchorOffset}],mf(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Wt&&t.input.lastKeyCode===8)for(let T=s;T>i;T--){let w=r.childNodes[T-1],x=w.pmViewDesc;if(w.nodeName=="BR"&&!x){s=T;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||Oi.fromSchema(t.state.schema),m=d.resolve(o),g=null,_=f.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:aF,context:m});if(u&&u[0].pos!=null){let T=u[0].pos,w=u[1]&&u[1].pos;w==null&&(w=T),g={anchor:T+o,head:w+o}}return{doc:_,sel:g,from:o,to:l}}function aF(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Zt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Zt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const uF=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function cF(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let S=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=L0(t,S);if(I&&!t.state.selection.eq(I)){if(Wt&&Yn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",R=>R(t,ls(13,"Enter"))))return;let P=t.state.tr.setSelection(I);S=="pointer"?P.setMeta("pointer",!0):S=="key"&&P.scrollIntoView(),s&&P.setMeta("composition",s),t.dispatch(P)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=lF(t,e,n),h=t.state.doc,d=h.slice(u.from,u.to),f,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,m="end"):(f=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=fF(d.content,u.doc.content,u.from,f,m);if(g&&t.input.domChangeCount++,(il&&t.input.lastIOSEnter>Date.now()-225||Yn)&&i.some(S=>S.nodeType==1&&!uF.test(S.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",S=>S(t,ls(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof ce&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let S=E_(t,t.state.doc,u.sel);if(S&&!S.eq(t.state.selection)){let I=t.state.tr.setSelection(S);s&&I.setMeta("composition",s),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof ce&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),pn&&Di<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>u.from&&u.doc.textBetween(g.start-u.from-1,g.start-u.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let _=u.doc.resolveNoCache(g.start-u.from),T=u.doc.resolveNoCache(g.endB-u.from),w=h.resolve(g.start),x=_.sameParent(T)&&_.parent.inlineContent&&w.end()>=g.endA,C;if((il&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(S=>S.nodeName=="DIV"||S.nodeName=="P"))||!x&&_.pos<u.doc.content.size&&!_.sameParent(T)&&(C=fe.findFrom(u.doc.resolve(_.pos+1),1,!0))&&C.head==T.pos)&&t.someProp("handleKeyDown",S=>S(t,ls(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&dF(h,g.start,g.endA,_,T)&&t.someProp("handleKeyDown",S=>S(t,ls(8,"Backspace")))){Yn&&Wt&&t.domObserver.suppressSelectionUpdates();return}Wt&&Yn&&g.endB==g.start&&(t.input.lastAndroidDelete=Date.now()),Yn&&!x&&_.start()!=T.start()&&T.parentOffset==0&&_.depth==T.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==g.endA&&(g.endB-=2,T=u.doc.resolveNoCache(g.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(S){return S(t,ls(13,"Enter"))})},20));let M=g.start,L=g.endA,V,A,E;if(x){if(_.pos==T.pos)pn&&Di<=11&&_.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Br(t),20)),V=t.state.tr.delete(M,L),A=h.resolve(g.start).marksAcross(h.resolve(g.endA));else if(g.endA==g.endB&&(E=hF(_.parent.content.cut(_.parentOffset,T.parentOffset),w.parent.content.cut(w.parentOffset,g.endA-w.start()))))V=t.state.tr,E.type=="add"?V.addMark(M,L,E.mark):V.removeMark(M,L,E.mark);else if(_.parent.child(_.index()).isText&&_.index()==T.index()-(T.textOffset?0:1)){let S=_.parent.textBetween(_.parentOffset,T.parentOffset);if(t.someProp("handleTextInput",I=>I(t,M,L,S)))return;V=t.state.tr.insertText(S,M,L)}}if(V||(V=t.state.tr.replace(M,L,u.doc.slice(g.start-u.from,g.endB-u.from))),u.sel){let S=E_(t,V.doc,u.sel);S&&!(Wt&&Yn&&t.composing&&S.empty&&(g.start!=g.endB||t.input.lastAndroidDelete<Date.now()-100)&&(S.head==M||S.head==V.mapping.map(L)-1)||pn&&S.empty&&S.head==M)&&V.setSelection(S)}A&&V.ensureMarks(A),s&&V.setMeta("composition",s),t.dispatch(V.scrollIntoView())}function E_(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:j0(t,e.resolve(n.anchor),e.resolve(n.head))}function hF(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=h=>h.mark(l.removeFromSet(h.marks));else return null;let u=[];for(let h=0;h<e.childCount;h++)u.push(a(e.child(h)));if($.from(u).eq(t))return{mark:l,type:o}}function dF(t,e,n,r,i){if(n-e<=i.pos-r.pos||jp(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(jp(s,!0,!0));return!o.parent.isTextblock||o.pos>n||jp(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function jp(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function fF(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&T_(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&T_(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function T_(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class pF{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Mj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(b_),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=C_(this),S_(this),this.nodeViews=A_(this),this.docView=i_(this.state.doc,k_(this),Lp(this),this.dom,this),this.domObserver=new rF(this,(r,i,s,o)=>cF(this,r,i,s,o)),this.domObserver.start(),Oj(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ng(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(b_),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(YA(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=A_(this);gF(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ng(this),this.editable=C_(this),S_(this);let a=Lp(this),u=k_(this),h=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(i.selection))&&(o=!0);let f=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&G3(this);if(o){this.domObserver.stop();let m=d&&(pn||Wt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&mF(i.selection,e.selection);if(d){let g=Wt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Kj(this)),(s||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=i_(e.doc,u,a,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vj(this))?Br(this,m):(jA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():f&&Q3(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof se){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Xx(this,n.getBoundingClientRect(),e)}else Xx(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new ZA(e.slice,e.move,i<0?void 0:se.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(pn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&J3(this.dom),Br(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tj(this,e)}coordsAtPos(e,n=1){return NA(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return oj(this,n||this.state,e)}pasteHTML(e,n){return lu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return lu(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(Dj(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Lp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,L3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Lj(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Zt&&this.root.nodeType===11&&U3(this.dom.ownerDocument)==this.dom&&sF(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function k_(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Bn.node(0,t.state.doc.content.size,e)]}function S_(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Bn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function C_(t){return!t.someProp("editable",e=>e(t.state)===!1)}function mF(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function A_(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function gF(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function b_(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var $i={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yF=typeof navigator<"u"&&/Mac/.test(navigator.platform),vF=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var It=0;It<10;It++)$i[48+It]=$i[96+It]=String(It);for(var It=1;It<=24;It++)$i[It+111]="F"+It;for(var It=65;It<=90;It++)$i[It]=String.fromCharCode(It+32),Yh[It]=String.fromCharCode(It);for(var Fp in $i)Yh.hasOwnProperty(Fp)||(Yh[Fp]=$i[Fp]);function wF(t){var e=yF&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vF&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Yh:$i)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const xF=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function _F(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))xF?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function EF(t){let e=Object.create(null);for(let n in t)e[_F(n)]=t[n];return e}function Bp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function TF(t){return new Dt({props:{handleKeyDown:ib(t)}})}function ib(t){let e=EF(t);return function(n,r){let i=wF(r),s,o=e[Bp(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Bp(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=$i[r.keyCode])&&s!=i){let l=e[Bp(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const kF=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function sb(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const SF=(t,e,n)=>{let r=sb(t,n);if(!r)return!1;let i=H0(r);if(!i){let o=r.blockRange(),l=o&&wl(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(ub(t,i,e,-1))return!0;if(r.parent.content.size==0&&(sl(s,"end")||se.isSelectable(s)))for(let o=r.depth;;o--){let l=ff(t.doc,r.before(o),r.after(o),Y.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(sl(s,"end")?fe.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):se.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},CF=(t,e,n)=>{let r=sb(t,n);if(!r)return!1;let i=H0(r);return i?ob(t,i,e):!1},AF=(t,e,n)=>{let r=lb(t,n);if(!r)return!1;let i=W0(r);return i?ob(t,i,e):!1};function ob(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let u=ff(t.doc,s,a,Y.empty);if(!u||u.from!=s||u instanceof vt&&u.slice.size>=a-s)return!1;if(n){let h=t.tr.step(u);h.setSelection(ce.create(h.doc,s)),n(h.scrollIntoView())}return!0}function sl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const bF=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=H0(r)}let o=s&&s.nodeBefore;return!o||!se.isSelectable(o)?!1:(e&&e(t.tr.setSelection(se.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function H0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function lb(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const IF=(t,e,n)=>{let r=lb(t,n);if(!r)return!1;let i=W0(r);if(!i)return!1;let s=i.nodeAfter;if(ub(t,i,e,1))return!0;if(r.parent.content.size==0&&(sl(s,"start")||se.isSelectable(s))){let o=ff(t.doc,r.before(),r.after(),Y.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(sl(s,"start")?fe.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):se.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},NF=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=W0(r)}let o=s&&s.nodeAfter;return!o||!se.isSelectable(o)?!1:(e&&e(t.tr.setSelection(se.create(t.doc,s.pos)).scrollIntoView()),!0)};function W0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const RF=(t,e)=>{let n=t.selection,r=n instanceof se,i;if(r){if(n.node.isTextblock||!Gi(t.doc,n.from))return!1;i=n.from}else if(i=df(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(se.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},PF=(t,e)=>{let n=t.selection,r;if(n instanceof se){if(n.node.isTextblock||!Gi(t.doc,n.to))return!1;r=n.to}else if(r=df(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},MF=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&wl(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},OF=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function ab(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const DF=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=ab(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(fe.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},VF=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof rr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=ab(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(ce.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},LF=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Lo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&wl(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},jF=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(se.create(t.doc,i))),!0)};function FF(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Gi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function ub(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&FF(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let m=e.pos+s.nodeSize,g=$.empty;for(let w=o.length-1;w>=0;w--)g=$.from(o[w].create(null,g));g=$.from(i.copy(g));let _=t.tr.step(new xt(e.pos-1,m,e.pos,m,new Y(g,1,0),o.length,!0)),T=_.doc.resolve(m+2*o.length);T.nodeAfter&&T.nodeAfter.type==i.type&&Gi(_.doc,T.pos)&&_.join(T.pos),n(_.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&a?null:fe.findFrom(e,1),d=h&&h.$from.blockRange(h.$to),f=d&&wl(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&sl(s,"start",!0)&&sl(i,"end")){let m=i,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let _=s,T=1;for(;!_.isTextblock;_=_.firstChild)T++;if(m.canReplace(m.childCount,m.childCount,_.content)){if(n){let w=$.empty;for(let C=g.length-1;C>=0;C--)w=$.from(g[C].copy(w));let x=t.tr.step(new xt(e.pos-g.length,e.pos+s.nodeSize,e.pos+T,e.pos+s.nodeSize-T,new Y(w,g.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function cb(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(ce.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const BF=cb(-1),zF=cb(1);function UF(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&O0(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function I_(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let h=n.doc.resolve(u),d=h.index();i=h.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function $F(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=!1,a=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let h=n.doc.resolve(o.start-2);a=new Uh(h,h,o.depth),o.endIndex<o.parent.childCount&&(o=new Uh(i,n.doc.resolve(s.end(o.depth)),o.depth)),l=!0}let u=O0(a,t,e,o);return u?(r&&r(HF(n.tr,o,u,l,t).scrollIntoView()),!0):!1}}function HF(t,e,n,r,i){let s=$.empty;for(let h=n.length-1;h>=0;h--)s=$.from(n[h].type.create(n[h].attrs,s));t.step(new xt(e.start-(r?2:0),e.end,e.start,e.end,new Y(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,a=e.start+n.length-(r?2:0),u=e.parent;for(let h=e.startIndex,d=e.endIndex,f=!0;h<d;h++,f=!1)!f&&Lo(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(h).nodeSize;return t}function WF(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?qF(e,n,t,s):KF(e,n,s):!0:!1}}function qF(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new xt(s-1,o,s,o,new Y($.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Uh(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=wl(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(s,-1)-1;return Gi(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function KF(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,g=n.endIndex-1,_=n.startIndex;g>_;g--)m-=i.child(g).nodeSize,r.delete(m-1,m+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,u=s.node(-1),h=s.index(-1);if(!u.canReplace(h+(l?0:1),h+1,o.content.append(a?$.empty:$.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new xt(d-(l?1:0),f+(a?1:0),d+1,f-1,new Y((l?$.empty:$.from(i.copy($.empty))).append(a?$.empty:$.from(i.copy($.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function GF(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,h=$.from(u?t.create():null),d=new Y($.from(t.create(null,$.from(l.type.create(null,h)))),u?3:1,0),f=s.start,m=s.end;n(e.tr.step(new xt(f-(u?3:1),m,f,m,d,1,!0)).scrollIntoView())}return!0}}function vf(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class wf{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...h)=>{const d=a(...h)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,u=e||s.tr,h=()=>(!a&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,m])=>[f,(..._)=>{const T=this.buildProps(u,n),w=m(..._)(T);return l.push(w),d}])),run:h};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...h)=>u(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:vf({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...h)=>u(...h)(l)]))}};return l}}class QF{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function te(t,e,n){return t.config[e]===void 0&&t.parent?te(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?te(t.parent,e,n):null}):t.config[e]}function xf(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function hb(t){const e=[],{nodeExtensions:n,markExtensions:r}=xf(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=te(o,"addGlobalAttributes",l);if(!a)return;a().forEach(h=>{h.types.forEach(d=>{Object.entries(h.attributes).forEach(([f,m])=>{e.push({type:d,name:f,attribute:{...s,...m}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=te(o,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([h,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:h,attribute:f})})}),e}function Et(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Tt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?s.split(" "):[],a=r[i]?r[i].split(" "):[],u=l.filter(h=>!a.includes(h));r[i]=[...a,...u].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],u=new Map;a.forEach(h=>{const[d,f]=h.split(":").map(m=>m.trim());u.set(d,f)}),l.forEach(h=>{const[d,f]=h.split(":").map(m=>m.trim());u.set(d,f)}),r[i]=Array.from(u.entries()).map(([h,d])=>`${h}: ${d}`).join("; ")}else r[i]=s}),r},{})}function Rg(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Tt(n,r),{})}function db(t){return typeof t=="function"}function me(t,e=void 0,...n){return db(t)?e?t.bind(e)(...n):t(...n):t}function JF(t={}){return Object.keys(t).length===0&&t.constructor===Object}function YF(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function N_(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):YF(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function R_(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&JF(n)?!1:n!=null))}function XF(t,e){var n;const r=hb(t),{nodeExtensions:i,markExtensions:s}=xf(t),o=(n=i.find(u=>te(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(u=>{const h=r.filter(w=>w.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((w,x)=>{const C=te(x,"extendNodeSchema",d);return{...w,...C?C(u):{}}},{}),m=R_({...f,content:me(te(u,"content",d)),marks:me(te(u,"marks",d)),group:me(te(u,"group",d)),inline:me(te(u,"inline",d)),atom:me(te(u,"atom",d)),selectable:me(te(u,"selectable",d)),draggable:me(te(u,"draggable",d)),code:me(te(u,"code",d)),whitespace:me(te(u,"whitespace",d)),defining:me(te(u,"defining",d)),isolating:me(te(u,"isolating",d)),attrs:Object.fromEntries(h.map(w=>{var x;return[w.name,{default:(x=w==null?void 0:w.attribute)===null||x===void 0?void 0:x.default}]}))}),g=me(te(u,"parseHTML",d));g&&(m.parseDOM=g.map(w=>N_(w,h)));const _=te(u,"renderHTML",d);_&&(m.toDOM=w=>_({node:w,HTMLAttributes:Rg(w,h)}));const T=te(u,"renderText",d);return T&&(m.toText=T),[u.name,m]})),a=Object.fromEntries(s.map(u=>{const h=r.filter(T=>T.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((T,w)=>{const x=te(w,"extendMarkSchema",d);return{...T,...x?x(u):{}}},{}),m=R_({...f,inclusive:me(te(u,"inclusive",d)),excludes:me(te(u,"excludes",d)),group:me(te(u,"group",d)),spanning:me(te(u,"spanning",d)),code:me(te(u,"code",d)),attrs:Object.fromEntries(h.map(T=>{var w;return[T.name,{default:(w=T==null?void 0:T.attribute)===null||w===void 0?void 0:w.default}]}))}),g=me(te(u,"parseHTML",d));g&&(m.parseDOM=g.map(T=>N_(T,h)));const _=te(u,"renderHTML",d);return _&&(m.toDOM=T=>_({mark:T,HTMLAttributes:Rg(T,h)})),[u.name,m]}));return new sA({topNode:o,nodes:l,marks:a})}function zp(t,e){return e.nodes[t]||e.marks[t]||null}function P_(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const ZF=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,u;const h=((u=(a=i.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function q0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class _f{constructor(e){this.find=e.find,this.handler=e.handler}}const e6=(t,e)=>{if(q0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function xc(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let h=!1;const d=ZF(u)+s;return o.forEach(f=>{if(h)return;const m=e6(d,f.find);if(!m)return;const g=a.state.tr,_=vf({state:a.state,transaction:g}),T={from:r-(m[0].length-s.length),to:i},{commands:w,chain:x,can:C}=new wf({editor:n,state:_});f.handler({state:_,range:T,match:m,commands:w,chain:x,can:C})===null||!g.steps.length||(g.setMeta(l,{transform:g,from:r,to:i,text:s}),a.dispatch(g),h=!0)}),h}function t6(t){const{editor:e,rules:n}=t,r=new Dt({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{const{from:u,text:h}=l,d=u+h.length;xc({editor:e,from:u,to:d,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return xc({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&xc({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?xc({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function n6(t){return Object.prototype.toString.call(t).slice(8,-1)}function _c(t){return n6(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Ef(t,e){const n={...t};return _c(t)&&_c(e)&&Object.keys(e).forEach(r=>{_c(e[r])&&_c(t[r])?n[r]=Ef(t[r],e[r]):n[r]=e[r]}),n}class Gr{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(te(this,"addOptions",{name:this.name}))),this.storage=me(te(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Gr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ef(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Gr(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=me(te(n,"addOptions",{name:n.name})),n.storage=me(te(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const a=o.find(u=>(u==null?void 0:u.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function r6(t){return typeof t=="number"}class i6{constructor(e){this.find=e.find,this.handler=e.handler}}const s6=(t,e,n)=>{if(q0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function o6(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:u,can:h}=new wf({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const _=Math.max(r,g),T=Math.min(i,g+m.content.size),w=m.textBetween(_-g,T-g,void 0,"￼");s6(w,s.find,o).forEach(C=>{if(C.index===void 0)return;const M=_+C.index+1,L=M+C[0].length,V={from:n.tr.mapping.map(M),to:n.tr.mapping.map(L)},A=s.handler({state:n,range:V,match:C,commands:a,chain:u,can:h,pasteEvent:o,dropEvent:l});d.push(A)})}),d.every(m=>m!==null)}const l6=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function a6(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l=typeof DragEvent<"u"?new DragEvent("drop"):null;const a=({state:h,from:d,to:f,rule:m,pasteEvt:g})=>{const _=h.tr,T=vf({state:h,transaction:_});if(!(!o6({editor:e,state:T,from:Math.max(d-1,0),to:f.b-1,rule:m,pasteEvent:g,dropEvent:l})||!_.steps.length))return l=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,_};return n.map(h=>new Dt({view(d){const f=m=>{var g;r=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(m.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(s=r===d.dom.parentElement,l=f,!1),paste:(d,f)=>{var m;const g=(m=f.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return o=f,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,m)=>{const g=d[0],_=g.getMeta("uiEvent")==="paste"&&!i,T=g.getMeta("uiEvent")==="drop"&&!s,w=g.getMeta("applyPasteRules"),x=!!w;if(!_&&!T&&!x)return;if(x){const{from:L,text:V}=w,A=L+V.length,E=l6(V);return a({rule:h,state:m,from:L,to:{b:A},pasteEvt:E})}const C=f.doc.content.findDiffStart(m.doc.content),M=f.doc.content.findDiffEnd(m.doc.content);if(!(!r6(C)||!M||C===M.b))return a({rule:h,state:m,from:C,to:M,pasteEvt:o})}}))}function u6(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class bo{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=bo.resolve(e),this.schema=XF(this.extensions,n),this.setupExtensions()}static resolve(e){const n=bo.sort(bo.flatten(e)),r=u6(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=te(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=te(r,"priority")||100,o=te(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:zp(n.name,this.schema)},i=te(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=bo.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:zp(o.name,this.schema)},a=[],u=te(o,"addKeyboardShortcuts",l);let h={};if(o.type==="mark"&&te(o,"exitable",l)&&(h.ArrowRight=()=>Gr.handleExit({editor:e,mark:o})),u){const _=Object.fromEntries(Object.entries(u()).map(([T,w])=>[T,()=>w({editor:e})]));h={...h,..._}}const d=TF(h);a.push(d);const f=te(o,"addInputRules",l);P_(o,e.options.enableInputRules)&&f&&r.push(...f());const m=te(o,"addPasteRules",l);P_(o,e.options.enablePasteRules)&&m&&i.push(...m());const g=te(o,"addProseMirrorPlugins",l);if(g){const _=g();a.push(..._)}return a}).flat();return[t6({editor:e,rules:r}),...a6({editor:e,rules:i}),...s]}get attributes(){return hb(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=xf(this.extensions);return Object.fromEntries(n.filter(r=>!!te(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Et(r.name,this.schema)},o=te(r,"addNodeView",s);if(!o)return[];const l=(a,u,h,d,f)=>{const m=Rg(a,i);return o()({node:a,view:u,getPos:h,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:zp(e.name,this.schema)};e.type==="mark"&&(!((n=me(te(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=te(e,"onBeforeCreate",r),s=te(e,"onCreate",r),o=te(e,"onUpdate",r),l=te(e,"onSelectionUpdate",r),a=te(e,"onTransaction",r),u=te(e,"onFocus",r),h=te(e,"onBlur",r),d=te(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),h&&this.editor.on("blur",h),d&&this.editor.on("destroy",d)})}}class nn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(te(this,"addOptions",{name:this.name}))),this.storage=me(te(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new nn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ef(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new nn({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=me(te(n,"addOptions",{name:n.name})),n.storage=me(te(n,"addStorage",{name:n.name,options:n.options})),n}}function fb(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(a,u,h,d)=>{var f;a.isBlock&&u>r&&(l+=s);const m=o==null?void 0:o[a.type.name];if(m)return h&&(l+=m({node:a,pos:u,parent:h,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u))}),l}function pb(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const c6=nn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Dt({key:new An("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),a=pb(n);return fb(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),h6=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),d6=(t=!1)=>({commands:e})=>e.setContent("",t),f6=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:h}=e,d=u.resolve(h.map(a)),f=u.resolve(h.map(a+l.nodeSize)),m=d.blockRange(f);if(!m)return;const g=wl(m);if(l.type.isTextblock){const{defaultType:_}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,_)}(g||g===0)&&e.lift(m,g)})}),!0},p6=t=>e=>t(e),m6=()=>({state:t,dispatch:e})=>VF(t,e),g6=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new ce(r.doc.resolve(o-1))),!0},y6=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},v6=t=>({tr:e,state:n,dispatch:r})=>{const i=Et(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),u=s.after(o);e.delete(a,u).scrollIntoView()}return!0}return!1},w6=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},x6=()=>({state:t,dispatch:e})=>kF(t,e),_6=()=>({commands:t})=>t.keyboardShortcut("Enter"),E6=()=>({state:t,dispatch:e})=>DF(t,e);function Xh(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:q0(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Pg(t,e,n={}){return t.find(r=>r.type===e&&Xh(r.attrs,n))}function T6(t,e,n={}){return!!Pg(t,e,n)}function K0(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if((!r.node||!r.node.marks.some(u=>u.type===e))&&(r=t.parent.childBefore(t.parentOffset)),!r.node||!r.node.marks.some(u=>u.type===e))return;const i=Pg([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,l=s+1,a=o+r.node.nodeSize;for(Pg([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&T6([...t.parent.child(l).marks],e,n);)a+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:a}}function Ji(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const k6=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Ji(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:u,to:h}=l;if(i){const d=K0(a,s,e);if(d&&d.from<=u&&d.to>=h){const f=ce.create(o,d.from,d.to);n.setSelection(f)}}return!0},S6=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function mb(t){return t instanceof ce}function gs(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function gb(t,e=null){if(!e)return null;const n=fe.atStart(t),r=fe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?ce.create(t,gs(0,i,s),gs(t.content.size,i,s)):ce.create(t,gs(e,i,s),gs(e,i,s))}function G0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const C6=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{G0()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!mb(n.state.selection))return o(),!0;const l=gb(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},A6=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),b6=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),yb=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&yb(r)}return t};function Ec(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return yb(n)}function Zh(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return $.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Zh("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const a=new sA({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Oi.fromSchema(a).parseSlice(Ec(t),n.parseOptions):Oi.fromSchema(a).parse(Ec(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Oi.fromSchema(e);return n.slice?s.parseSlice(Ec(t),n.parseOptions).content:s.parse(Ec(t),n.parseOptions)}return Zh("",e,n)}function I6(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof vt||i instanceof xt))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,u,h)=>{o===0&&(o=h)}),t.setSelection(fe.near(t.doc.resolve(o),n))}const N6=t=>!("type"in t),R6=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=Zh(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(g){return s.emit("contentError",{editor:s,error:g,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,d=!0;if((N6(l)?l:[l]).forEach(g=>{g.check(),h=h?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),a===u&&d){const{parent:g}=r.doc.resolve(a);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(a-=1,u+=1)}let m;h?(Array.isArray(e)?m=e.map(g=>g.text||"").join(""):typeof e=="object"&&e&&e.text?m=e.text:m=e,r.insertText(m,a,u)):(m=l,r.replaceWith(a,u,m)),n.updateSelection&&I6(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:m})}return!0},P6=()=>({state:t,dispatch:e})=>RF(t,e),M6=()=>({state:t,dispatch:e})=>PF(t,e),O6=()=>({state:t,dispatch:e})=>SF(t,e),D6=()=>({state:t,dispatch:e})=>IF(t,e),V6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=df(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},L6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=df(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},j6=()=>({state:t,dispatch:e})=>CF(t,e),F6=()=>({state:t,dispatch:e})=>AF(t,e);function vb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function B6(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))G0()||vb()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const z6=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=B6(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const h=u.map(r.mapping);h&&i&&r.maybeStep(h)}),!0};function uu(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Et(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const m=Math.max(r,f),g=Math.min(i,f+d.nodeSize);l.push({node:d,from:m,to:g})});const a=i-r,u=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Xh(d.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}const U6=(t,e={})=>({state:n,dispatch:r})=>{const i=Et(t,n.schema);return uu(n,i,e)?MF(n,r):!1},$6=()=>({state:t,dispatch:e})=>LF(t,e),H6=t=>({state:e,dispatch:n})=>{const r=Et(t,e.schema);return WF(r)(e,n)},W6=()=>({state:t,dispatch:e})=>OF(t,e);function Tf(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function M_(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const q6=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Tf(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=Et(t,r.schema)),l==="mark"&&(o=Ji(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,h)=>{s&&s===u.type&&n.setNodeMarkup(h,void 0,M_(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(d=>{o===d.type&&n.addMark(h,h+u.nodeSize,o.create(M_(d.attrs,e)))})})}),!0):!1},K6=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),G6=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),Q6=()=>({state:t,dispatch:e})=>bF(t,e),J6=()=>({state:t,dispatch:e})=>NF(t,e),Y6=()=>({state:t,dispatch:e})=>jF(t,e),X6=()=>({state:t,dispatch:e})=>zF(t,e),Z6=()=>({state:t,dispatch:e})=>BF(t,e);function Mg(t,e,n={},r={}){return Zh(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const e5=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var a,u;const{doc:h}=s;if(n.preserveWhitespace!=="full"){const d=Mg(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return o&&s.replaceWith(0,h.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:h.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function wb(t,e){const n=Ji(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function t5(t,e){const n=new _A(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function n5(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function r5(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function i5(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Q0(t){return e=>i5(e.$from,t)}function s5(t,e){const n=Ks.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function o5(t,e){const n={from:0,to:t.content.size};return fb(t,n,e)}function l5(t,e){const n=Et(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function xb(t,e){const n=Tf(typeof e=="string"?e:e.name,t.schema);return n==="node"?l5(t,e):n==="mark"?wb(t,e):{}}function a5(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function u5(t){const e=a5(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function c5(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,a)=>{o.push({from:l,to:a})});else{const{from:l,to:a}=n[s];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{const u=e.slice(s).map(l,-1),h=e.slice(s).map(a),d=e.invert().map(u,-1),f=e.invert().map(h);r.push({oldRange:{from:d,to:f},newRange:{from:u,to:h}})})}),u5(r)}function J0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=K0(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Jc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Og(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Ji(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Xh(d.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const m=d.pos,g=f.pos;t.doc.nodesBetween(m,g,(_,T)=>{if(!_.isText&&!_.marks.length)return;const w=Math.max(m,T),x=Math.min(g,T+_.nodeSize),C=x-w;o+=C,l.push(..._.marks.map(M=>({mark:M,from:w,to:x})))})}),o===0)return!1;const a=l.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Xh(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=o}function h5(t,e,n={}){if(!e)return uu(t,null,n)||Og(t,null,n);const r=Tf(e,t.schema);return r==="node"?uu(t,e,n):r==="mark"?Og(t,e,n):!1}function O_(t,e){const{nodeExtensions:n}=xf(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=me(te(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Y0(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Y0(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function d5(t){return t instanceof se}function f5(t,e,n){var r;const{selection:i}=e;let s=null;if(mb(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(h,d,f)=>{if(u)return!1;if(h.isInline){const m=!f||f.type.allowsMarkType(n),g=!!n.isInSet(h.marks)||!h.marks.some(_=>_.type.excludes(n));u=m&&g}return!u}),u})}const p5=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=Ji(t,r.schema);if(i)if(o){const u=wb(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const h=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(h,d,(f,m)=>{const g=Math.max(m,h),_=Math.min(m+f.nodeSize,d);f.marks.find(w=>w.type===a)?f.marks.forEach(w=>{a===w.type&&n.addMark(g,_,a.create({...w.attrs,...e}))}):n.addMark(g,_,a.create(e))})});return f5(r,n,a)},m5=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),g5=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Et(t,n.schema);return s.isTextblock?i().command(({commands:o})=>I_(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>I_(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},y5=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=gs(t,0,r.content.size),s=se.create(r,i);e.setSelection(s)}return!0},v5=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=ce.atStart(r).from,l=ce.atEnd(r).to,a=gs(i,o,l),u=gs(s,o,l),h=ce.create(r,a,u);e.setSelection(h)}return!0},w5=t=>({state:e,dispatch:n})=>{const r=Et(t,e.schema);return GF(r)(e,n)};function D_(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const x5=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,u=i.extensionManager.attributes,h=Jc(u,l.node().type.name,l.node().attrs);if(s instanceof se&&s.node.isBlock)return!l.parentOffset||!Lo(o,l.pos)?!1:(r&&(t&&D_(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:n5(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=d&&f?[{type:f,attrs:h}]:void 0,g=Lo(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!g&&Lo(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(g=!0,m=f?[{type:f,attrs:h}]:void 0),r){if(g&&(s instanceof ce&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const _=e.mapping.map(l.before()),T=e.doc.resolve(_);l.node(-1).canReplaceWith(T.index(),T.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&D_(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return g},_5=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Et(t,r.schema),{$from:a,$to:u}=r.selection,h=r.selection.node;if(h&&h.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let w=$.empty;const x=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-x;E>=a.depth-3;E-=1)w=$.from(a.node(E).copy(w));const C=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,M={...Jc(f,a.node().type.name,a.node().attrs),...e},L=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(M))||void 0;w=w.append($.from(l.createAndFill(null,L)||void 0));const V=a.before(a.depth-(x-1));n.replace(V,a.after(-C),new Y(w,4-x,0));let A=-1;n.doc.nodesBetween(V,n.doc.content.size,(E,S)=>{if(A>-1)return!1;E.isTextblock&&E.content.size===0&&(A=S+1)}),A>-1&&n.setSelection(ce.near(n.doc.resolve(A))),n.scrollIntoView()}return!0}const m=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,g={...Jc(f,d.type.name,d.attrs),...e},_={...Jc(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,u.pos);const T=m?[{type:l,attrs:g},{type:m,attrs:_}]:[{type:l,attrs:g}];if(!Lo(n.doc,a.pos,2))return!1;if(i){const{selection:w,storedMarks:x}=r,{splittableMarks:C}=s.extensionManager,M=x||w.$to.parentOffset&&w.$from.marks();if(n.split(a.pos,2,T).scrollIntoView(),!M||!i)return!0;const L=M.filter(V=>C.includes(V.type.name));n.ensureMarks(L)}return!0},Up=(t,e)=>{const n=Q0(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Gi(t.doc,n.pos)&&t.join(n.pos),!0},$p=(t,e)=>{const n=Q0(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Gi(t.doc,r)&&t.join(r),!0},E5=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:u,can:h})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,m=Et(t,o.schema),g=Et(e,o.schema),{selection:_,storedMarks:T}=o,{$from:w,$to:x}=_,C=w.blockRange(x),M=T||_.$to.parentOffset&&_.$from.marks();if(!C)return!1;const L=Q0(V=>O_(V.type.name,d))(_);if(C.depth>=1&&L&&C.depth-L.depth<=1){if(L.node.type===m)return u.liftListItem(g);if(O_(L.node.type.name,d)&&m.validContent(L.node.content)&&l)return a().command(()=>(s.setNodeMarkup(L.pos,m),!0)).command(()=>Up(s,m)).command(()=>$p(s,m)).run()}return!n||!M||!l?a().command(()=>h().wrapInList(m,r)?!0:u.clearNodes()).wrapInList(m,r).command(()=>Up(s,m)).command(()=>$p(s,m)).run():a().command(()=>{const V=h().wrapInList(m,r),A=M.filter(E=>f.includes(E.type.name));return s.ensureMarks(A),V?!0:u.clearNodes()}).wrapInList(m,r).command(()=>Up(s,m)).command(()=>$p(s,m)).run()},T5=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Ji(t,r.schema);return Og(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},k5=(t,e,n={})=>({state:r,commands:i})=>{const s=Et(t,r.schema),o=Et(e,r.schema),l=uu(r,s,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...n})},S5=(t,e={})=>({state:n,commands:r})=>{const i=Et(t,n.schema);return uu(n,i,e)?r.lift(i):r.wrapIn(i,e)},C5=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},A5=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},b5=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=Ji(t,r.schema),{$from:u,empty:h,ranges:d}=l;if(!i)return!0;if(h&&o){let{from:f,to:m}=l;const g=(s=u.marks().find(T=>T.type===a))===null||s===void 0?void 0:s.attrs,_=K0(u,a,g);_&&(f=_.from,m=_.to),n.removeMark(f,m,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},I5=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Tf(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=Et(t,r.schema)),l==="mark"&&(o=Ji(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,h=a.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(m=>{if(o===m.type){const g=Math.max(f,u),_=Math.min(f+d.nodeSize,h);n.addMark(g,_,o.create({...m.attrs,...e}))}})})}),!0):!1},N5=(t,e={})=>({state:n,dispatch:r})=>{const i=Et(t,n.schema);return UF(i,e)(n,r)},R5=(t,e={})=>({state:n,dispatch:r})=>{const i=Et(t,n.schema);return $F(i,e)(n,r)};var P5=Object.freeze({__proto__:null,blur:h6,clearContent:d6,clearNodes:f6,command:p6,createParagraphNear:m6,cut:g6,deleteCurrentNode:y6,deleteNode:v6,deleteRange:w6,deleteSelection:x6,enter:_6,exitCode:E6,extendMarkRange:k6,first:S6,focus:C6,forEach:A6,insertContent:b6,insertContentAt:R6,joinBackward:O6,joinDown:M6,joinForward:D6,joinItemBackward:V6,joinItemForward:L6,joinTextblockBackward:j6,joinTextblockForward:F6,joinUp:P6,keyboardShortcut:z6,lift:U6,liftEmptyBlock:$6,liftListItem:H6,newlineInCode:W6,resetAttributes:q6,scrollIntoView:K6,selectAll:G6,selectNodeBackward:Q6,selectNodeForward:J6,selectParentNode:Y6,selectTextblockEnd:X6,selectTextblockStart:Z6,setContent:e5,setMark:p5,setMeta:m5,setNode:g5,setNodeSelection:y5,setTextSelection:v5,sinkListItem:w5,splitBlock:x5,splitListItem:_5,toggleList:E5,toggleMark:T5,toggleNode:k5,toggleWrap:S5,undoInputRule:C5,unsetAllMarks:A5,unsetMark:b5,updateAttributes:I5,wrapIn:N5,wrapInList:R5});const M5=nn.create({name:"commands",addCommands(){return{...P5}}}),O5=nn.create({name:"drop",addProseMirrorPlugins(){return[new Dt({key:new An("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),D5=nn.create({name:"editable",addProseMirrorPlugins(){return[new Dt({key:new An("editable"),props:{editable:()=>this.editor.options.editable}})]}}),V5=nn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Dt({key:new An("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),L5=nn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:h,$anchor:d}=a,{pos:f,parent:m}=d,g=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,_=g.parent.type.spec.isolating,T=d.pos-d.parentOffset,w=_&&g.parent.childCount===1?T===d.pos:fe.atStart(u).from===f;return!h||!m.type.isTextblock||m.textContent.length||!w||w&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return G0()||vb()?s:i},addProseMirrorPlugins(){return[new Dt({key:new An("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(_=>_.docChanged)&&!e.doc.eq(n.doc),i=t.some(_=>_.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,a=fe.atStart(e.doc).from,u=fe.atEnd(e.doc).to;if(s||!(o===a&&l===u)||!Y0(n.doc))return;const f=n.tr,m=vf({state:n,transaction:f}),{commands:g}=new wf({editor:this.editor,state:m});if(g.clearNodes(),!!f.steps.length)return f}})]}}),j5=nn.create({name:"paste",addProseMirrorPlugins(){return[new Dt({key:new An("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),F5=nn.create({name:"tabindex",addProseMirrorPlugins(){return[new Dt({key:new An("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class as{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new as(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new as(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new as(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const a=new as(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new as(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(s[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>n[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const B5=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function z5(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class U5 extends QF{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=z5(B5,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=db(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=n.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[D5,c6.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),M5,V5,L5,F5,O5,j5].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new bo(i,this)}createCommandManager(){this.commandManager=new wf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=Mg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),e=Mg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=gb(e,this.options.autofocus);this.view=new pF(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Ao.create({doc:e,selection:n||void 0})}),this.view.dom.setAttribute("role","textbox"),this.view.dom.getAttribute("aria-label")||this.view.dom.setAttribute("aria-label","Rich-Text Editor");const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return xb(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return h5(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return s5(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return o5(this.state.doc,{blockSeparator:n,textSerializers:{...pb(this.schema),...r}})}get isEmpty(){return Y0(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new as(n,this)}get $doc(){return this.$pos(0)}}function ol(t){return new _f({find:t.find,handler:({state:e,range:n,match:r})=>{const i=me(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),u=n.from+l.indexOf(o),h=u+o.length;if(J0(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(_=>_===t.type&&_!==m.mark.type)).filter(m=>m.to>u).length)return null;h<n.to&&s.delete(h,n.to),u>n.from&&s.delete(n.from+a,u);const f=n.from+a+o.length;s.addMark(n.from+a,f,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function _b(t){return new _f({find:t.find,handler:({state:e,range:n,match:r})=>{const i=me(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let h=o+u;h>l?h=l:l=h+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(h,l,a)}else if(r[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function Dg(t){return new _f({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=me(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function cu(t){return new _f({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=me(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),u=a&&O0(a,t.type,s);if(!u)return null;if(o.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:m}=t.editor.extensionManager,g=f||d.$to.parentOffset&&d.$from.marks();if(g){const _=g.filter(T=>m.includes(T.type.name));o.ensureMarks(_)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===t.type&&Gi(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,h))&&o.join(n.from-1)}})}class rn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(te(this,"addOptions",{name:this.name}))),this.storage=me(te(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new rn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ef(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new rn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=me(te(n,"addOptions",{name:n.name})),n.storage=me(te(n,"addStorage",{name:n.name,options:n.options})),n}}function Bs(t){return new i6({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=me(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const h=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(J0(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(T=>T===t.type&&T!==g.mark.type)).filter(g=>g.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+h,d),u=n.from+h+l.length,o.addMark(n.from+h,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function $5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Eb={exports:{}},Hp={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function H5(){if(V_)return Hp;V_=1;var t=Ie;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(d,f){var m=f(),g=r({inst:{value:m,getSnapshot:f}}),_=g[0].inst,T=g[1];return s(function(){_.value=m,_.getSnapshot=f,a(_)&&T({inst:_})},[d,m,f]),i(function(){return a(_)&&T({inst:_}),d(function(){a(_)&&T({inst:_})})},[d]),o(m),m}function a(d){var f=d.getSnapshot;d=d.value;try{var m=f();return!n(d,m)}catch{return!0}}function u(d,f){return f()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return Hp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Hp}Eb.exports=H5();var X0=Eb.exports;const W5=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},q5=({contentComponent:t})=>{const e=X0.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Ie.createElement(Ie.Fragment,null,Object.values(e))};function K5(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:OR.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class G5 extends Ie.Component{constructor(e){var n;super(e),this.editorContentRef=Ie.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=K5(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Ie.createElement(Ie.Fragment,null,Ie.createElement("div",{ref:W5(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Ie.createElement(q5,{contentComponent:e.contentComponent}))}}const Q5=U.forwardRef((t,e)=>{const n=Ie.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ie.createElement(G5,{key:n,innerRef:e,...t})}),J5=Ie.memo(Q5);var Y5=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},X5=$5(Y5),Tb={exports:{}},Wp={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function Z5(){if(L_)return Wp;L_=1;var t=Ie,e=X0;function n(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,a=t.useDebugValue;return Wp.useSyncExternalStoreWithSelector=function(u,h,d,f,m){var g=s(null);if(g.current===null){var _={hasValue:!1,value:null};g.current=_}else _=g.current;g=l(function(){function w(V){if(!x){if(x=!0,C=V,V=f(V),m!==void 0&&_.hasValue){var A=_.value;if(m(A,V))return M=A}return M=V}if(A=M,r(C,V))return A;var E=f(V);return m!==void 0&&m(A,E)?A:(C=V,M=E)}var x=!1,C,M,L=d===void 0?null:d;return[function(){return w(h())},L===null?void 0:function(){return w(L())}]},[h,d,f,m]);var T=i(u,g[0],g[1]);return o(function(){_.hasValue=!0,_.value=T},[T]),a(T),T},Wp}Tb.exports=Z5();var eB=Tb.exports;class tB{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function nB(t){var e;const[n]=U.useState(()=>new tB(t.editor)),r=eB.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:X5);return U.useEffect(()=>n.watch(t.editor),[t.editor,n]),U.useDebugValue(r),r}const rB=!1,Vg=typeof window>"u",iB=Vg||!!(typeof window<"u"&&window.next);class sB{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Vg||iB?null:this.createEditor();if(this.options.current.immediatelyRender&&Vg&&rB)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new U5(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function oB(t={},e=[]){const n=U.useRef(t);n.current=t;const[r]=U.useState(()=>new sB(n)),i=X0.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return U.useDebugValue(i),U.useEffect(r.onRender(e)),nB({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const lB=U.createContext({editor:null});lB.Consumer;const aB=U.createContext({onDragStart:void 0}),uB=()=>U.useContext(aB);Ie.forwardRef((t,e)=>{const{onDragStart:n}=uB(),r=t.as||"div";return Ie.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const cB=/^\s*>\s$/,hB=rn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[cu({find:cB,type:this.type})]}}),dB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,fB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,pB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,mB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,gB=Gr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ol({find:dB,type:this.type}),ol({find:pB,type:this.type})]},addPasteRules(){return[Bs({find:fB,type:this.type}),Bs({find:mB,type:this.type})]}}),yB="listItem",j_="textStyle",F_=/^\s*([-+*])\s$/,vB=rn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yB,this.editor.getAttributes(j_)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=cu({find:F_,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=cu({find:F_,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(j_),editor:this.editor})),[t]}}),wB=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,xB=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,_B=Gr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ol({find:wB,type:this.type})]},addPasteRules(){return[Bs({find:xB,type:this.type})]}}),EB=/^```([a-z]+)?[\s\n]$/,TB=/^~~~([a-z]+)?[\s\n]$/,kB=rn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Tt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(fe.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Dg({find:EB,type:this.type,getAttributes:t=>({language:t[1]})}),Dg({find:TB,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Dt({key:new An("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(ce.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),SB=rn.create({name:"doc",topNode:!0,content:"block+"});function CB(t={}){return new Dt({view(e){return new AB(e,t)}})}class AB{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let h=u.getBoundingClientRect(),d=l?h.bottom:h.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:h.left,right:h.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let l=i.getBoundingClientRect();s=l.left-i.scrollLeft,o=l.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=gA(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const bB=nn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[CB(this.options)]}});class Xe extends fe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Xe.valid(r)?new Xe(r):fe.near(r)}content(){return Y.empty}eq(e){return e instanceof Xe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Xe(e.resolve(n.pos))}getBookmark(){return new Z0(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!IB(e)||!NB(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Xe.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(Xe.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!se.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(Xe.valid(l))return l}return null}}}Xe.prototype.visible=!1;Xe.findFrom=Xe.findGapCursorFrom;fe.jsonID("gapcursor",Xe);class Z0{constructor(e){this.pos=e}map(e){return new Z0(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Xe.valid(n)?new Xe(n):fe.near(n)}}function IB(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function NB(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function RB(){return new Dt({props:{decorations:DB,createSelectionBetween(t,e,n){return e.pos==n.pos&&Xe.valid(n)?new Xe(n):null},handleClick:MB,handleKeyDown:PB,handleDOMEvents:{beforeinput:OB}}})}const PB=ib({ArrowLeft:Tc("horiz",-1),ArrowRight:Tc("horiz",1),ArrowUp:Tc("vert",-1),ArrowDown:Tc("vert",1)});function Tc(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof ce){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Xe.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new Xe(u))),!0):!1}}function MB(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Xe.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&se.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Xe(r))),!0)}function OB(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Xe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=$.empty;for(let o=r.length-1;o>=0;o--)i=$.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Y(i,0,0));return s.setSelection(ce.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function DB(t){if(!(t.selection instanceof Xe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",dt.create(t.doc,[Bn.widget(t.selection.head,e,{key:"gapcursor"})])}const VB=nn.create({name:"gapCursor",addProseMirrorPlugins(){return[RB()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=me(te(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),LB=rn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Tt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:h})=>{if(h&&a&&o){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),kb=rn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Tt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Dg({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ed=200,_t=function(){};_t.prototype.append=function(e){return e.length?(e=_t.from(e),!this.length&&e||e.length<ed&&this.leafAppend(e)||this.length<ed&&e.leafPrepend(this)||this.appendInner(e)):this};_t.prototype.prepend=function(e){return e.length?_t.from(e).append(this):this};_t.prototype.appendInner=function(e){return new jB(this,e)};_t.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?_t.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};_t.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};_t.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};_t.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};_t.from=function(e){return e instanceof _t?e:e&&e.length?new Sb(e):_t.empty};var Sb=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ed)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ed)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(_t);_t.empty=new Sb([]);var jB=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(_t);const FB=500;class Zn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,u=[],h=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,h.push(d);return}if(i){h.push(new ur(d.map));let m=d.step.map(i.slice(s)),g;m&&o.maybeStep(m).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],u.push(new ur(g,void 0,void 0,u.length+h.length))),s--,g&&i.appendMap(g,s)}else o.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(s)):d.selection,a=new Zn(this.items.slice(0,r).append(h.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<e.steps.length;h++){let d=e.steps[h].invert(e.docs[h]),f=new ur(e.mapping.maps[h],d,n),m;(m=a&&a.merge(f))&&(f=m,h?s.pop():l=l.slice(0,l.length-1)),s.push(f),n&&(o++,n=void 0),i||(a=f)}let u=o-r.depth;return u>zB&&(l=BB(l,u),o-=u),new Zn(l.append(s),o)}remapping(e,n){let r=new Vo;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Zn(this.items.append(e.map(n=>new ur(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let m=s.getMirror(--a);if(m==null)return;o=Math.min(o,m);let g=s.maps[m];if(f.step){let _=e.steps[m].invert(e.docs[m]),T=f.selection&&f.selection.map(s.slice(a+1,m));T&&l++,r.push(new ur(g,_,T))}else r.push(new ur(g))},i);let u=[];for(let f=n;f<o;f++)u.push(new ur(s.maps[f]));let h=this.items.slice(0,i).append(u).append(r),d=new Zn(h,l);return d.emptyItemCount()>FB&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let d=new ur(u.invert(),a,h),f,m=i.length-1;(f=i.length&&i[m].merge(d))?i[m]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new Zn(_t.from(i.reverse()),s)}}Zn.empty=new Zn(_t.empty,0);function BB(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class ur{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ur(n.getMap().invert(),n,this.selection)}}}class oi{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const zB=20;function UB(t,e,n,r){let i=n.getMeta(As),s;if(i)return i.historyState;n.getMeta(WB)&&(t=new oi(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(As))return o.getMeta(As).redo?new oi(t.done.addTransform(n,void 0,r,Yc(e)),t.undone,B_(n.mapping.maps),t.prevTime,t.prevComposition):new oi(t.done,t.undone.addTransform(n,void 0,r,Yc(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!$B(n,t.prevRanges)),u=o?qp(t.prevRanges,n.mapping):B_(n.mapping.maps);return new oi(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Yc(e)),Zn.empty,u,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new oi(t.done.rebased(n,s),t.undone.rebased(n,s),qp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new oi(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),qp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function $B(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function B_(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function qp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function HB(t,e,n){let r=Yc(e),i=As.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new oi(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(As,{redo:n,historyState:a})}let Kp=!1,z_=null;function Yc(t){let e=t.plugins;if(z_!=e){Kp=!1,z_=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Kp=!0;break}}return Kp}const As=new An("history"),WB=new An("closeHistory");function qB(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Dt({key:As,state:{init(){return new oi(Zn.empty,Zn.empty,null,0,-1)},apply(e,n,r){return UB(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Ab:r=="historyRedo"?bb:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Cb(t,e){return(n,r)=>{let i=As.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=HB(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Ab=Cb(!1,!0),bb=Cb(!0,!0),KB=nn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Ab(t,e),redo:()=>({state:t,dispatch:e})=>bb(t,e)}},addProseMirrorPlugins(){return[qB(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),GB=rn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Tt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):d5(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:u}=o.selection,h=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?o.setSelection(ce.create(o.doc,u.pos+1)):u.nodeAfter.isBlock?o.setSelection(se.create(o.doc,u.pos)):o.setSelection(ce.create(o.doc,u.pos));else{const d=(a=u.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(o.insert(h,d),o.setSelection(ce.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[_b({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),QB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,JB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,YB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,XB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ZB=Gr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ol({find:QB,type:this.type}),ol({find:YB,type:this.type})]},addPasteRules(){return[Bs({find:JB,type:this.type}),Bs({find:XB,type:this.type})]}}),e9=rn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Tt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),t9="listItem",U_="textStyle",$_=/^(\d+)\.\s$/,n9=rn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Tt(this.options.HTMLAttributes,n),0]:["ol",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(t9,this.editor.getAttributes(U_)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=cu({find:$_,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=cu({find:$_,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(U_)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),r9=rn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),i9=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,s9=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,o9=Gr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Tt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ol({find:i9,type:this.type})]},addPasteRules(){return[Bs({find:s9,type:this.type})]}}),l9=rn.create({name:"text",group:"inline"}),a9=nn.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,l,a,u,h,d,f,m,g,_,T,w;const x=[];return this.options.bold!==!1&&x.push(gB.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&x.push(hB.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&x.push(vB.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&x.push(_B.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&x.push(kB.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&x.push(SB.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&x.push(bB.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&x.push(VB.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&x.push(LB.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&x.push(kb.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&x.push(KB.configure((h=this.options)===null||h===void 0?void 0:h.history)),this.options.horizontalRule!==!1&&x.push(GB.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&x.push(ZB.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&x.push(e9.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&x.push(n9.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&x.push(r9.configure((_=this.options)===null||_===void 0?void 0:_.paragraph)),this.options.strike!==!1&&x.push(o9.configure((T=this.options)===null||T===void 0?void 0:T.strike)),this.options.text!==!1&&x.push(l9.configure((w=this.options)===null||w===void 0?void 0:w.text)),x}}),u9=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,c9=rn.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Tt(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[_b({find:u9,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),h9="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",d9="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",ll=(t,e)=>{for(const n in e)t[n]=e[n];return t},Lg="numeric",jg="ascii",Fg="alpha",Xc="asciinumeric",kc="alphanumeric",Bg="domain",Ib="emoji",f9="scheme",p9="slashscheme",H_="whitespace";function m9(t,e){return t in e||(e[t]=[]),e[t]}function ys(t,e,n){e[Lg]&&(e[Xc]=!0,e[kc]=!0),e[jg]&&(e[Xc]=!0,e[Fg]=!0),e[Xc]&&(e[kc]=!0),e[Fg]&&(e[kc]=!0),e[kc]&&(e[Bg]=!0),e[Ib]&&(e[Bg]=!0);for(const r in e){const i=m9(r,n);i.indexOf(t)<0&&i.push(t)}}function g9(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function un(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}un.groups={};un.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||un.groups;let i;return e&&e.j?i=e:(i=new un(e),n&&r&&ys(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||un.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new un,ll(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new un,s){if(r)if(o.t&&typeof o.t=="string"){const a=ll(g9(o.t,r),n);ys(s,a,r)}else n&&ys(s,n,r);o.t=s}return i.j[t]=o,o}};const pe=(t,e,n,r,i)=>t.ta(e,n,r,i),Rn=(t,e,n,r,i)=>t.tr(e,n,r,i),W_=(t,e,n,r,i)=>t.ts(e,n,r,i),G=(t,e,n,r,i)=>t.tt(e,n,r,i),Nr="WORD",zg="UWORD",hu="LOCALHOST",Ug="TLD",$g="UTLD",Zc="SCHEME",po="SLASH_SCHEME",ev="NUM",Nb="WS",tv="NL",Ca="OPENBRACE",Aa="CLOSEBRACE",td="OPENBRACKET",nd="CLOSEBRACKET",rd="OPENPAREN",id="CLOSEPAREN",sd="OPENANGLEBRACKET",od="CLOSEANGLEBRACKET",ld="FULLWIDTHLEFTPAREN",ad="FULLWIDTHRIGHTPAREN",ud="LEFTCORNERBRACKET",cd="RIGHTCORNERBRACKET",hd="LEFTWHITECORNERBRACKET",dd="RIGHTWHITECORNERBRACKET",fd="FULLWIDTHLESSTHAN",pd="FULLWIDTHGREATERTHAN",md="AMPERSAND",gd="APOSTROPHE",yd="ASTERISK",li="AT",vd="BACKSLASH",wd="BACKTICK",xd="CARET",fi="COLON",nv="COMMA",_d="DOLLAR",cr="DOT",Ed="EQUALS",rv="EXCLAMATION",hr="HYPHEN",Td="PERCENT",kd="PIPE",Sd="PLUS",Cd="POUND",Ad="QUERY",iv="QUOTE",sv="SEMI",dr="SLASH",ba="TILDE",bd="UNDERSCORE",Rb="EMOJI",Id="SYM";var Pb=Object.freeze({__proto__:null,WORD:Nr,UWORD:zg,LOCALHOST:hu,TLD:Ug,UTLD:$g,SCHEME:Zc,SLASH_SCHEME:po,NUM:ev,WS:Nb,NL:tv,OPENBRACE:Ca,CLOSEBRACE:Aa,OPENBRACKET:td,CLOSEBRACKET:nd,OPENPAREN:rd,CLOSEPAREN:id,OPENANGLEBRACKET:sd,CLOSEANGLEBRACKET:od,FULLWIDTHLEFTPAREN:ld,FULLWIDTHRIGHTPAREN:ad,LEFTCORNERBRACKET:ud,RIGHTCORNERBRACKET:cd,LEFTWHITECORNERBRACKET:hd,RIGHTWHITECORNERBRACKET:dd,FULLWIDTHLESSTHAN:fd,FULLWIDTHGREATERTHAN:pd,AMPERSAND:md,APOSTROPHE:gd,ASTERISK:yd,AT:li,BACKSLASH:vd,BACKTICK:wd,CARET:xd,COLON:fi,COMMA:nv,DOLLAR:_d,DOT:cr,EQUALS:Ed,EXCLAMATION:rv,HYPHEN:hr,PERCENT:Td,PIPE:kd,PLUS:Sd,POUND:Cd,QUERY:Ad,QUOTE:iv,SEMI:sv,SLASH:dr,TILDE:ba,UNDERSCORE:bd,EMOJI:Rb,SYM:Id});const lo=/[a-z]/,Gp=new RegExp("\\p{L}","u"),Qp=new RegExp("\\p{Emoji}","u"),Jp=/\d/,q_=/\s/,K_=`
`,y9="️",v9="‍";let Sc=null,Cc=null;function w9(t){t===void 0&&(t=[]);const e={};un.groups=e;const n=new un;Sc==null&&(Sc=G_(h9)),Cc==null&&(Cc=G_(d9)),G(n,"'",gd),G(n,"{",Ca),G(n,"}",Aa),G(n,"[",td),G(n,"]",nd),G(n,"(",rd),G(n,")",id),G(n,"<",sd),G(n,">",od),G(n,"（",ld),G(n,"）",ad),G(n,"「",ud),G(n,"」",cd),G(n,"『",hd),G(n,"』",dd),G(n,"＜",fd),G(n,"＞",pd),G(n,"&",md),G(n,"*",yd),G(n,"@",li),G(n,"`",wd),G(n,"^",xd),G(n,":",fi),G(n,",",nv),G(n,"$",_d),G(n,".",cr),G(n,"=",Ed),G(n,"!",rv),G(n,"-",hr),G(n,"%",Td),G(n,"|",kd),G(n,"+",Sd),G(n,"#",Cd),G(n,"?",Ad),G(n,'"',iv),G(n,"/",dr),G(n,";",sv),G(n,"~",ba),G(n,"_",bd),G(n,"\\",vd);const r=Rn(n,Jp,ev,{[Lg]:!0});Rn(r,Jp,r);const i=Rn(n,lo,Nr,{[jg]:!0});Rn(i,lo,i);const s=Rn(n,Gp,zg,{[Fg]:!0});Rn(s,lo),Rn(s,Gp,s);const o=Rn(n,q_,Nb,{[H_]:!0});G(n,K_,tv,{[H_]:!0}),G(o,K_),Rn(o,q_,o);const l=Rn(n,Qp,Rb,{[Ib]:!0});Rn(l,Qp,l),G(l,y9,l);const a=G(l,v9);Rn(a,Qp,l);const u=[[lo,i]],h=[[lo,null],[Gp,s]];for(let d=0;d<Sc.length;d++)ti(n,Sc[d],Ug,Nr,u);for(let d=0;d<Cc.length;d++)ti(n,Cc[d],$g,zg,h);ys(Ug,{tld:!0,ascii:!0},e),ys($g,{utld:!0,alpha:!0},e),ti(n,"file",Zc,Nr,u),ti(n,"mailto",Zc,Nr,u),ti(n,"http",po,Nr,u),ti(n,"https",po,Nr,u),ti(n,"ftp",po,Nr,u),ti(n,"ftps",po,Nr,u),ys(Zc,{scheme:!0,ascii:!0},e),ys(po,{slashscheme:!0,ascii:!0},e),t=t.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<t.length;d++){const f=t[d][0],g=t[d][1]?{[f9]:!0}:{[p9]:!0};f.indexOf("-")>=0?g[Bg]=!0:lo.test(f)?Jp.test(f)?g[Xc]=!0:g[jg]=!0:g[Lg]=!0,W_(n,f,f,g)}return W_(n,"localhost",hu,{ascii:!0}),n.jd=new un(Id),{start:n,tokens:ll({groups:e},Pb)}}function x9(t,e){const n=_9(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,a=null,u=0,h=null,d=-1,f=-1;for(;o<r&&(a=l.go(n[o]));)l=a,l.accepts()?(d=0,f=0,h=l):d>=0&&(d+=n[o].length,f++),u+=n[o].length,s+=n[o].length,o++;s-=d,o-=f,u-=d,i.push({t:h.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function _9(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function ti(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const a=e[l];t.j[a]?s=t.j[a]:(s=new un(r),s.jr=i.slice(),t.j[a]=s),t=s}return s=new un(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function G_(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const du={defaultProtocol:"http",events:null,format:Q_,formatHref:Q_,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ov(t,e){e===void 0&&(e=null);let n=ll({},du);t&&(n=ll(n,t instanceof ov?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}ov.prototype={o:du,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:du[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Q_(t){return t}function Mb(t,e){this.t="token",this.v=t,this.tk=e}Mb.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=du.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),a=t.get("target",n,e),u=t.get("rel",n,e),h=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),a&&(o.target=a),u&&(o.rel=u),h&&ll(o,h),{tagName:i,attributes:o,content:s,eventListeners:d}}};function kf(t,e){class n extends Mb{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const J_=kf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Y_=kf("text"),E9=kf("nl"),Ac=kf("url",{isLink:!0,toHref(t){return t===void 0&&(t=du.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==hu&&t[1].t===fi}}),Pn=t=>new un(t);function T9(t){let{groups:e}=t;const n=e.domain.concat([md,yd,li,vd,wd,xd,_d,Ed,hr,ev,Td,kd,Sd,Cd,dr,Id,ba,bd]),r=[gd,fi,nv,cr,rv,Ad,iv,sv,sd,od,Ca,Aa,nd,td,rd,id,ld,ad,ud,cd,hd,dd,fd,pd],i=[md,gd,yd,vd,wd,xd,_d,Ed,hr,Ca,Aa,Td,kd,Sd,Cd,Ad,dr,Id,ba,bd],s=Pn(),o=G(s,ba);pe(o,i,o),pe(o,e.domain,o);const l=Pn(),a=Pn(),u=Pn();pe(s,e.domain,l),pe(s,e.scheme,a),pe(s,e.slashscheme,u),pe(l,i,o),pe(l,e.domain,l);const h=G(l,li);G(o,li,h),G(a,li,h),G(u,li,h);const d=G(o,cr);pe(d,i,o),pe(d,e.domain,o);const f=Pn();pe(h,e.domain,f),pe(f,e.domain,f);const m=G(f,cr);pe(m,e.domain,f);const g=Pn(J_);pe(m,e.tld,g),pe(m,e.utld,g),G(h,hu,g);const _=G(f,hr);pe(_,e.domain,f),pe(g,e.domain,f),G(g,cr,m),G(g,hr,_);const T=G(g,fi);pe(T,e.numeric,J_);const w=G(l,hr),x=G(l,cr);pe(w,e.domain,l),pe(x,i,o),pe(x,e.domain,l);const C=Pn(Ac);pe(x,e.tld,C),pe(x,e.utld,C),pe(C,e.domain,l),pe(C,i,o),G(C,cr,x),G(C,hr,w),G(C,li,h);const M=G(C,fi),L=Pn(Ac);pe(M,e.numeric,L);const V=Pn(Ac),A=Pn();pe(V,n,V),pe(V,r,A),pe(A,n,V),pe(A,r,A),G(C,dr,V),G(L,dr,V);const E=G(a,fi),S=G(u,fi),I=G(S,dr),P=G(I,dr);pe(a,e.domain,l),G(a,cr,x),G(a,hr,w),pe(u,e.domain,l),G(u,cr,x),G(u,hr,w),pe(E,e.domain,V),G(E,dr,V),pe(P,e.domain,V),pe(P,n,V),G(P,dr,V);const R=[[Ca,Aa],[td,nd],[rd,id],[sd,od],[ld,ad],[ud,cd],[hd,dd],[fd,pd]];for(let b=0;b<R.length;b++){const[we,Pe]=R[b],Qe=G(V,we);G(A,we,Qe),G(Qe,Pe,V);const be=Pn(Ac);pe(Qe,n,be);const q=Pn();pe(Qe,r),pe(be,n,be),pe(be,r,q),pe(q,n,be),pe(q,r,q),G(be,Pe,V),G(q,Pe,V)}return G(s,hu,C),G(s,tv,E9),{start:s,tokens:Pb}}function k9(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,a=null,u=null,h=0,d=null,f=-1;for(;i<r&&!(a=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(u=a||l.go(n[i].t));)a=null,l=u,l.accepts()?(f=0,d=l):f>=0&&f++,i++,h++;if(f<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Yp(Y_,e,o)),o=[]),i-=f,h-=f;const m=d.t,g=n.slice(i-h,i);s.push(Yp(m,e,g))}}return o.length>0&&s.push(Yp(Y_,e,o)),s}function Yp(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const S9=typeof console<"u"&&console&&console.warn||(()=>{}),C9="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",He={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function A9(){un.groups={},He.scanner=null,He.parser=null,He.tokenQueue=[],He.pluginQueue=[],He.customSchemes=[],He.initialized=!1}function X_(t,e){if(e===void 0&&(e=!1),He.initialized&&S9(`linkifyjs: already initialized - will not register custom scheme "${t}" ${C9}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);He.customSchemes.push([t,e])}function b9(){He.scanner=w9(He.customSchemes);for(let t=0;t<He.tokenQueue.length;t++)He.tokenQueue[t][1]({scanner:He.scanner});He.parser=T9(He.scanner.tokens);for(let t=0;t<He.pluginQueue.length;t++)He.pluginQueue[t][1]({scanner:He.scanner,parser:He.parser});He.initialized=!0}function Ob(t){return He.initialized||b9(),k9(He.parser.start,t,x9(He.scanner.start,t))}function Db(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new ov(n),i=Ob(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}function I9(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function N9(t){return new Dt({key:new An("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=t5(n.doc,[...e]);if(c5(l).forEach(({newRange:u})=>{const h=r5(r.doc,u,m=>m.isTextblock);let d,f;if(h.length>1?(d=h[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):h.length&&r.doc.textBetween(u.from,u.to," "," ").endsWith(" ")&&(d=h[0],f=r.doc.textBetween(d.pos,u.to,void 0," ")),d&&f){const m=f.split(" ").filter(w=>w!=="");if(m.length<=0)return!1;const g=m[m.length-1],_=d.pos+f.lastIndexOf(g);if(!g)return!1;const T=Ob(g).map(w=>w.toObject(t.defaultProtocol));if(!I9(T))return!1;T.filter(w=>w.isLink).map(w=>({...w,from:_+w.start+1,to:_+w.end+1})).filter(w=>r.schema.marks.code?!r.doc.rangeHasMark(w.from,w.to,r.schema.marks.code):!0).filter(w=>t.validate(w.value)).forEach(w=>{J0(w.from,w.to,r.doc).some(x=>x.mark.type===t.type)||o.addMark(w.from,w.to,t.type.create({href:w.href}))})}}),!!o.steps.length)return o}})}function R9(t){return new Dt({key:new An("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=r.target;const l=[];for(;o.nodeName!=="DIV";)l.push(o),o=o.parentNode;if(!l.find(f=>f.nodeName==="A"))return!1;const a=xb(e.state,t.type.name),u=r.target,h=(i=u==null?void 0:u.href)!==null&&i!==void 0?i:a.href,d=(s=u==null?void 0:u.target)!==null&&s!==void 0?s:a.target;return u&&h?(window.open(h,d),!0):!1}}})}function P9(t){return new Dt({key:new An("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const a=Db(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!a?!1:(t.editor.commands.setMark(t.type,{href:a.href}),!0)}}})}const M9=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Z_(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(M9,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const O9=Gr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(t=>{if(typeof t=="string"){X_(t);return}X_(t.scheme,t.optionalSlashes)})},onDestroy(){A9()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!Z_(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:t}){return Z_(t.href,this.options.protocols)?["a",Tt(this.options.HTMLAttributes,t),0]:["a",Tt(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Bs({find:t=>{const e=[];if(t){const{validate:n}=this.options,r=Db(t).filter(i=>i.isLink&&n(i.value));r.length&&r.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(N9({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&t.push(R9({type:this.type})),this.options.linkOnPaste&&t.push(P9({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),D9=({content:t,onChange:e})=>{const n=oB({extensions:[a9,c9,O9.configure({openOnClick:!1}),kb.configure({levels:[1,2]})],content:t,onUpdate:({editor:o})=>{e(o.getHTML())}});if(!n)return null;const r=()=>{const o=window.prompt("Enter image URL");o&&n.chain().focus().setImage({src:o}).run()},i=()=>{const o=window.prompt("Enter URL");o&&n.chain().focus().setLink({href:o}).run()},s=({onClick:o,active:l,children:a})=>v.jsx("button",{type:"button",onClick:o,className:`p-2 rounded hover:bg-gray-100 ${l?"text-indigo-600 bg-gray-100":"text-gray-600"}`,children:a});return v.jsxs("div",{className:"border rounded-md overflow-hidden",children:[v.jsxs("div",{className:"flex flex-wrap gap-1 p-2 border-b bg-gray-50",children:[v.jsx(s,{onClick:()=>n.chain().focus().toggleBold().run(),active:n.isActive("bold"),children:v.jsx(V2,{className:"w-5 h-5"})}),v.jsx(s,{onClick:()=>n.chain().focus().toggleItalic().run(),active:n.isActive("italic"),children:v.jsx(Q2,{className:"w-5 h-5"})}),v.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),v.jsx(s,{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),active:n.isActive("heading",{level:1}),children:v.jsx(H2,{className:"w-5 h-5"})}),v.jsx(s,{onClick:()=>n.chain().focus().toggleHeading({level:2}).run(),active:n.isActive("heading",{level:2}),children:v.jsx(W2,{className:"w-5 h-5"})}),v.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),v.jsx(s,{onClick:()=>n.chain().focus().toggleBulletList().run(),active:n.isActive("bulletList"),children:v.jsx(X2,{className:"w-5 h-5"})}),v.jsx(s,{onClick:()=>n.chain().focus().toggleOrderedList().run(),active:n.isActive("orderedList"),children:v.jsx(Y2,{className:"w-5 h-5"})}),v.jsx(s,{onClick:()=>n.chain().focus().toggleBlockquote().run(),active:n.isActive("blockquote"),children:v.jsx(nP,{className:"w-5 h-5"})}),v.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),v.jsx(s,{onClick:i,active:n.isActive("link"),children:v.jsx(J2,{className:"w-5 h-5"})}),v.jsx(s,{onClick:r,children:v.jsx(Ck,{className:"w-5 h-5"})}),v.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),v.jsx(s,{onClick:()=>n.chain().focus().undo().run(),children:v.jsx(hP,{className:"w-5 h-5"})}),v.jsx(s,{onClick:()=>n.chain().focus().redo().run(),children:v.jsx(rP,{className:"w-5 h-5"})})]}),v.jsx(J5,{editor:n,className:"prose max-w-none p-4 min-h-[400px] focus:outline-none"})]})},V9=({imagePreview:t,onImageChange:e,onRemoveImage:n})=>v.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:t?v.jsxs("div",{className:"relative",children:[v.jsx("img",{src:t,alt:"Preview",className:"max-h-48 rounded"}),v.jsx("button",{type:"button",onClick:n,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:v.jsx(pP,{className:"w-4 h-4"})})]}):v.jsxs("div",{className:"space-y-1 text-center",children:[v.jsx(Ck,{className:"mx-auto h-12 w-12 text-gray-400"}),v.jsx("div",{className:"flex text-sm text-gray-600",children:v.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500",children:[v.jsx("span",{children:"Upload a file"}),v.jsx("input",{type:"file",className:"sr-only",onChange:e,accept:"image/*"})]})}),v.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})}),L9=({title:t,content:e,tags:n,excerpt:r,imagePreview:i})=>v.jsxs("div",{className:"border rounded-lg p-6 space-y-4",children:[v.jsx("h3",{className:"text-2xl font-bold",children:"Preview"}),v.jsxs("div",{className:"prose max-w-none",children:[i&&v.jsx("img",{src:i,alt:"Preview",className:"rounded-lg mb-4"}),v.jsx("h1",{children:t||"Article Title"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n==null?void 0:n.split(",").map((s,o)=>v.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:s.trim()},o))}),v.jsx("p",{className:"text-gray-600 italic",children:r}),v.jsx("div",{dangerouslySetInnerHTML:{__html:e}})]})]}),j9=()=>{const{logout:t}=R0(),e=Kd(),n=async()=>{try{await t(),e("/login")}catch(i){console.error("Logout failed:",i)}},r=()=>{const{register:i,handleSubmit:s,formState:{errors:o},watch:l,reset:a}=UC(),[u,h]=U.useState(null),[d,f]=U.useState(""),[m,g]=U.useState(!1),[_,T]=U.useState(!1),[w,x]=U.useState(""),C=V=>{var E;const A=(E=V.target.files)==null?void 0:E[0];if(A){h(A);const S=new FileReader;S.onloadend=()=>{f(S.result)},S.readAsDataURL(A)}},M=()=>{h(null),f("")},L=async V=>{try{g(!0);let A="";if(u){const S=dL(vL,`articles/${Date.now()}-${u.name}`);await cL(S,u),A=await hL(S)}const E=V.tags.split(",").map(S=>S.trim());await mC(Hc(ra,"articles"),{...V,content:w,imageUrl:A,tags:E,createdAt:new Date().toISOString()}),a(),x(""),h(null),f(""),alert("Article published successfully!")}catch(A){console.error("Error publishing article:",A),alert("Error publishing article. Please try again.")}finally{g(!1)}};return v.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold",children:"Add New Article"}),v.jsxs("button",{type:"button",onClick:()=>T(!_),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[v.jsx(z2,{className:"w-4 h-4 mr-2"}),_?"Hide Preview":"Show Preview"]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("form",{onSubmit:s(L),className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),v.jsx("input",{...i("title",{required:"Title is required",minLength:{value:10,message:"Title must be at least 10 characters"}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),o.title&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.title.message})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),v.jsxs("select",{...i("category",{required:"Category is required"}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[v.jsx("option",{value:"home-decor",children:"Home Decor"}),v.jsx("option",{value:"travel-deals",children:"Travel Deals"}),v.jsx("option",{value:"home-appliances",children:"Home Appliances"}),v.jsx("option",{value:"garden-planting",children:"Garden Planting"})]}),o.category&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.category.message})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Excerpt"}),v.jsx("textarea",{...i("excerpt",{required:"Excerpt is required",maxLength:{value:160,message:"Excerpt must be less than 160 characters"}}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),o.excerpt&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.excerpt.message})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags"}),v.jsx("input",{...i("tags",{required:"At least one tag is required"}),placeholder:"Enter tags separated by commas",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),o.tags&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.tags.message})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Featured Image"}),v.jsx(V9,{imagePreview:d,onImageChange:C,onRemoveImage:M})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),v.jsx(D9,{content:w,onChange:x})]}),v.jsxs("button",{type:"submit",disabled:m,className:"w-full flex justify-center items-center bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors disabled:bg-gray-400",children:[v.jsx(iP,{className:"w-4 h-4 mr-2"}),m?"Publishing...":"Publish Article"]})]}),_&&v.jsx(L9,{title:l("title"),content:w,tags:l("tags"),excerpt:l("excerpt"),imagePreview:d})]})]})};return v.jsxs("div",{className:"min-h-screen bg-gray-100",children:[v.jsx("nav",{className:"bg-white shadow-sm",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex justify-between h-16",children:[v.jsxs("div",{className:"flex space-x-8",children:[v.jsx(yt,{to:"/dashboard",className:"inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900",children:"Dashboard"}),v.jsx(yt,{to:"/dashboard/add",className:"inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 hover:text-gray-900",children:"Add Article"})]}),v.jsx("button",{onClick:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Logout"})]})})}),v.jsx("div",{className:"py-6",children:v.jsxs(kk,{children:[v.jsx(yn,{path:"/",element:v.jsx("h1",{className:"text-2xl font-bold text-center",children:"Welcome to Dashboard"})}),v.jsx(yn,{path:"/add",element:v.jsx(r,{})})]})})]})},F9=({children:t})=>{const{user:e}=R0();return!e||!e.isAdmin?v.jsx(E2,{to:"/login"}):v.jsx(v.Fragment,{children:t})};function B9(){return v.jsx(BL,{children:v.jsx(N2,{children:v.jsxs("div",{className:"min-h-screen flex flex-col",children:[v.jsx(gP,{}),v.jsx("main",{className:"flex-grow",children:v.jsxs(kk,{children:[v.jsx(yn,{path:"/",element:v.jsx(xP,{})}),v.jsx(yn,{path:"/home-decor",element:v.jsx(_P,{})}),v.jsx(yn,{path:"/travel-deals",element:v.jsx(EP,{})}),v.jsx(yn,{path:"/home-appliances",element:v.jsx(TP,{})}),v.jsx(yn,{path:"/garden-planting",element:v.jsx(kP,{})}),v.jsx(yn,{path:"/about",element:v.jsx(SP,{})}),v.jsx(yn,{path:"/contact",element:v.jsx(CP,{})}),v.jsx(yn,{path:"/article/:category/:slug",element:v.jsx(wL,{})}),v.jsx(yn,{path:"/login",element:v.jsx(zL,{})}),v.jsx(yn,{path:"/dashboard/*",element:v.jsx(F9,{children:v.jsx(j9,{})})})]})}),v.jsx(yP,{}),v.jsx(vP,{})]})})})}pk(document.getElementById("root")).render(v.jsx(U.StrictMode,{children:v.jsx(B9,{})}));
